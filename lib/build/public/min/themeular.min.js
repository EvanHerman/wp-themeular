if(function(a,b,c){"use strict";function d(a,b){return b=b||Error,function(){var c,d,e=2,f=arguments,g=f[0],h="["+(a?a+":":"")+g+"] ",i=f[1];for(h+=i.replace(/\{\d+\}/g,function(a){var b=+a.slice(1,-1),c=b+e;return c<f.length?ta(f[c]):a}),h+="\nhttp://errors.angularjs.org/1.4.3/"+(a?a+"/":"")+g,d=e,c="?";d<f.length;d++,c="&")h+=c+"p"+(d-e)+"="+encodeURIComponent(ta(f[d]));return new b(h)}}function e(a){if(null==a||C(a))return!1;var b="length"in Object(a)&&a.length;return a.nodeType===Ud&&b?!0:x(a)||Ld(a)||0===b||"number"==typeof b&&b>0&&b-1 in a}function f(a,b,c){var d,g;if(a)if(A(a))for(d in a)"prototype"==d||"length"==d||"name"==d||a.hasOwnProperty&&!a.hasOwnProperty(d)||b.call(c,a[d],d,a);else if(Ld(a)||e(a)){var h="object"!=typeof a;for(d=0,g=a.length;g>d;d++)(h||d in a)&&b.call(c,a[d],d,a)}else if(a.forEach&&a.forEach!==f)a.forEach(b,c,a);else if(w(a))for(d in a)b.call(c,a[d],d,a);else if("function"==typeof a.hasOwnProperty)for(d in a)a.hasOwnProperty(d)&&b.call(c,a[d],d,a);else for(d in a)ud.call(a,d)&&b.call(c,a[d],d,a);return a}function g(a,b,c){for(var d=Object.keys(a).sort(),e=0;e<d.length;e++)b.call(c,a[d[e]],d[e]);return d}function h(a){return function(b,c){a(c,b)}}function i(){return++Jd}function j(a,b){b?a.$$hashKey=b:delete a.$$hashKey}function k(a,b,c){for(var d=a.$$hashKey,e=0,f=b.length;f>e;++e){var g=b[e];if(v(g)||A(g))for(var h=Object.keys(g),i=0,l=h.length;l>i;i++){var m=h[i],n=g[m];c&&v(n)?z(n)?a[m]=new Date(n.valueOf()):(v(a[m])||(a[m]=Ld(n)?[]:{}),k(a[m],[n],!0)):a[m]=n}}return j(a,d),a}function l(a){return k(a,Cd.call(arguments,1),!1)}function m(a){return k(a,Cd.call(arguments,1),!0)}function n(a){return parseInt(a,10)}function o(a,b){return l(Object.create(a),b)}function p(){}function q(a){return a}function r(a){return function(){return a}}function s(a){return A(a.toString)&&a.toString!==Object.prototype.toString}function t(a){return"undefined"==typeof a}function u(a){return"undefined"!=typeof a}function v(a){return null!==a&&"object"==typeof a}function w(a){return null!==a&&"object"==typeof a&&!Gd(a)}function x(a){return"string"==typeof a}function y(a){return"number"==typeof a}function z(a){return"[object Date]"===Fd.call(a)}function A(a){return"function"==typeof a}function B(a){return"[object RegExp]"===Fd.call(a)}function C(a){return a&&a.window===a}function D(a){return a&&a.$evalAsync&&a.$watch}function E(a){return"[object File]"===Fd.call(a)}function F(a){return"[object FormData]"===Fd.call(a)}function G(a){return"[object Blob]"===Fd.call(a)}function H(a){return"boolean"==typeof a}function I(a){return a&&A(a.then)}function J(a){return Md.test(Fd.call(a))}function K(a){return!(!a||!(a.nodeName||a.prop&&a.attr&&a.find))}function L(a){var b,c={},d=a.split(",");for(b=0;b<d.length;b++)c[d[b]]=!0;return c}function M(a){return td(a.nodeName||a[0]&&a[0].nodeName)}function N(a,b){var c=a.indexOf(b);return c>=0&&a.splice(c,1),c}function O(a,b,c,d){if(C(a)||D(a))throw Hd("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");if(J(b))throw Hd("cpta","Can't copy! TypedArray destination cannot be mutated.");if(b){if(a===b)throw Hd("cpi","Can't copy! Source and destination are identical.");c=c||[],d=d||[],v(a)&&(c.push(a),d.push(b));var e;if(Ld(a)){b.length=0;for(var g=0;g<a.length;g++)b.push(O(a[g],null,c,d))}else{var h=b.$$hashKey;if(Ld(b)?b.length=0:f(b,function(a,c){delete b[c]}),w(a))for(e in a)b[e]=O(a[e],null,c,d);else if(a&&"function"==typeof a.hasOwnProperty)for(e in a)a.hasOwnProperty(e)&&(b[e]=O(a[e],null,c,d));else for(e in a)ud.call(a,e)&&(b[e]=O(a[e],null,c,d));j(b,h)}}else if(b=a,v(a)){var i;if(c&&-1!==(i=c.indexOf(a)))return d[i];if(Ld(a))return O(a,[],c,d);if(J(a))b=new a.constructor(a);else if(z(a))b=new Date(a.getTime());else{if(!B(a)){var k=Object.create(Gd(a));return O(a,k,c,d)}b=new RegExp(a.source,a.toString().match(/[^\/]*$/)[0]),b.lastIndex=a.lastIndex}d&&(c.push(a),d.push(b))}return b}function P(a,b){if(Ld(a)){b=b||[];for(var c=0,d=a.length;d>c;c++)b[c]=a[c]}else if(v(a)){b=b||{};for(var e in a)("$"!==e.charAt(0)||"$"!==e.charAt(1))&&(b[e]=a[e])}return b||a}function Q(a,b){if(a===b)return!0;if(null===a||null===b)return!1;if(a!==a&&b!==b)return!0;var d,e,f,g=typeof a,h=typeof b;if(g==h&&"object"==g){if(!Ld(a)){if(z(a))return z(b)?Q(a.getTime(),b.getTime()):!1;if(B(a))return B(b)?a.toString()==b.toString():!1;if(D(a)||D(b)||C(a)||C(b)||Ld(b)||z(b)||B(b))return!1;f=qa();for(e in a)if("$"!==e.charAt(0)&&!A(a[e])){if(!Q(a[e],b[e]))return!1;f[e]=!0}for(e in b)if(!(e in f||"$"===e.charAt(0)||b[e]===c||A(b[e])))return!1;return!0}if(!Ld(b))return!1;if((d=a.length)==b.length){for(e=0;d>e;e++)if(!Q(a[e],b[e]))return!1;return!0}}return!1}function R(a,b,c){return a.concat(Cd.call(b,c))}function S(a,b){return Cd.call(a,b||0)}function T(a,b){var c=arguments.length>2?S(arguments,2):[];return!A(b)||b instanceof RegExp?b:c.length?function(){return arguments.length?b.apply(a,R(c,arguments,0)):b.apply(a,c)}:function(){return arguments.length?b.apply(a,arguments):b.call(a)}}function U(a,d){var e=d;return"string"==typeof a&&"$"===a.charAt(0)&&"$"===a.charAt(1)?e=c:C(d)?e="$WINDOW":d&&b===d?e="$DOCUMENT":D(d)&&(e="$SCOPE"),e}function V(a,b){return"undefined"==typeof a?c:(y(b)||(b=b?2:null),JSON.stringify(a,U,b))}function W(a){return x(a)?JSON.parse(a):a}function X(a,b){var c=Date.parse("Jan 01, 1970 00:00:00 "+a)/6e4;return isNaN(c)?b:c}function Y(a,b){return a=new Date(a.getTime()),a.setMinutes(a.getMinutes()+b),a}function Z(a,b,c){c=c?-1:1;var d=X(b,a.getTimezoneOffset());return Y(a,c*(d-a.getTimezoneOffset()))}function $(a){a=zd(a).clone();try{a.empty()}catch(b){}var c=zd("<div>").append(a).html();try{return a[0].nodeType===Wd?td(c):c.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(a,b){return"<"+td(b)})}catch(b){return td(c)}}function _(a){try{return decodeURIComponent(a)}catch(b){}}function aa(a){var b,c,d={};return f((a||"").split("&"),function(a){if(a&&(b=a.replace(/\+/g,"%20").split("="),c=_(b[0]),u(c))){var e=u(b[1])?_(b[1]):!0;ud.call(d,c)?Ld(d[c])?d[c].push(e):d[c]=[d[c],e]:d[c]=e}}),d}function ba(a){var b=[];return f(a,function(a,c){Ld(a)?f(a,function(a){b.push(da(c,!0)+(a===!0?"":"="+da(a,!0)))}):b.push(da(c,!0)+(a===!0?"":"="+da(a,!0)))}),b.length?b.join("&"):""}function ca(a){return da(a,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function da(a,b){return encodeURIComponent(a).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,b?"%20":"+")}function ea(a,b){var c,d,e=Rd.length;for(d=0;e>d;++d)if(c=Rd[d]+b,x(c=a.getAttribute(c)))return c;return null}function fa(a,b){var c,d,e={};f(Rd,function(b){var e=b+"app";!c&&a.hasAttribute&&a.hasAttribute(e)&&(c=a,d=a.getAttribute(e))}),f(Rd,function(b){var e,f=b+"app";!c&&(e=a.querySelector("["+f.replace(":","\\:")+"]"))&&(c=e,d=e.getAttribute(f))}),c&&(e.strictDi=null!==ea(c,"strict-di"),b(c,d?[d]:[],e))}function ga(c,d,e){v(e)||(e={});var g={strictDi:!1};e=l(g,e);var h=function(){if(c=zd(c),c.injector()){var a=c[0]===b?"document":$(c);throw Hd("btstrpd","App Already Bootstrapped with this Element '{0}'",a.replace(/</,"&lt;").replace(/>/,"&gt;"))}d=d||[],d.unshift(["$provide",function(a){a.value("$rootElement",c)}]),e.debugInfoEnabled&&d.push(["$compileProvider",function(a){a.debugInfoEnabled(!0)}]),d.unshift("ng");var f=$a(d,e.strictDi);return f.invoke(["$rootScope","$rootElement","$compile","$injector",function(a,b,c,d){a.$apply(function(){b.data("$injector",d),c(b)(a)})}]),f},i=/^NG_ENABLE_DEBUG_INFO!/,j=/^NG_DEFER_BOOTSTRAP!/;return a&&i.test(a.name)&&(e.debugInfoEnabled=!0,a.name=a.name.replace(i,"")),a&&!j.test(a.name)?h():(a.name=a.name.replace(j,""),Id.resumeBootstrap=function(a){return f(a,function(a){d.push(a)}),h()},void(A(Id.resumeDeferredBootstrap)&&Id.resumeDeferredBootstrap()))}function ha(){a.name="NG_ENABLE_DEBUG_INFO!"+a.name,a.location.reload()}function ia(a){var b=Id.element(a).injector();if(!b)throw Hd("test","no injector found for element argument to getTestability");return b.get("$$testability")}function ja(a,b){return b=b||"_",a.replace(Sd,function(a,c){return(c?b:"")+a.toLowerCase()})}function ka(){var b;if(!Td){var d=Qd();Ad=a.jQuery,u(d)&&(Ad=null===d?c:a[d]),Ad&&Ad.fn.on?(zd=Ad,l(Ad.fn,{scope:me.scope,isolateScope:me.isolateScope,controller:me.controller,injector:me.injector,inheritedData:me.inheritedData}),b=Ad.cleanData,Ad.cleanData=function(a){var c;if(Kd)Kd=!1;else for(var d,e=0;null!=(d=a[e]);e++)c=Ad._data(d,"events"),c&&c.$destroy&&Ad(d).triggerHandler("$destroy");b(a)}):zd=Ca,Id.element=zd,Td=!0}}function la(a,b,c){if(!a)throw Hd("areq","Argument '{0}' is {1}",b||"?",c||"required");return a}function ma(a,b,c){return c&&Ld(a)&&(a=a[a.length-1]),la(A(a),b,"not a function, got "+(a&&"object"==typeof a?a.constructor.name||"Object":typeof a)),a}function na(a,b){if("hasOwnProperty"===a)throw Hd("badname","hasOwnProperty is not a valid {0} name",b)}function oa(a,b,c){if(!b)return a;for(var d,e=b.split("."),f=a,g=e.length,h=0;g>h;h++)d=e[h],a&&(a=(f=a)[d]);return!c&&A(a)?T(f,a):a}function pa(a){var b=a[0],c=a[a.length-1],d=[b];do{if(b=b.nextSibling,!b)break;d.push(b)}while(b!==c);return zd(d)}function qa(){return Object.create(null)}function ra(a){function b(a,b,c){return a[b]||(a[b]=c())}var c=d("$injector"),e=d("ng"),f=b(a,"angular",Object);return f.$$minErr=f.$$minErr||d,b(f,"module",function(){var a={};return function(d,f,g){var h=function(a,b){if("hasOwnProperty"===a)throw e("badname","hasOwnProperty is not a valid {0} name",b)};return h(d,"module"),f&&a.hasOwnProperty(d)&&(a[d]=null),b(a,d,function(){function a(a,b,c,d){return d||(d=e),function(){return d[c||"push"]([a,b,arguments]),k}}function b(a,b){return function(c,f){return f&&A(f)&&(f.$$moduleName=d),e.push([a,b,arguments]),k}}if(!f)throw c("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",d);var e=[],h=[],i=[],j=a("$injector","invoke","push",h),k={_invokeQueue:e,_configBlocks:h,_runBlocks:i,requires:f,name:d,provider:b("$provide","provider"),factory:b("$provide","factory"),service:b("$provide","service"),value:a("$provide","value"),constant:a("$provide","constant","unshift"),decorator:b("$provide","decorator"),animation:b("$animateProvider","register"),filter:b("$filterProvider","register"),controller:b("$controllerProvider","register"),directive:b("$compileProvider","directive"),config:j,run:function(a){return i.push(a),this}};return g&&j(g),k})}})}function sa(a){var b=[];return JSON.stringify(a,function(a,c){if(c=U(a,c),v(c)){if(b.indexOf(c)>=0)return"<<already seen>>";b.push(c)}return c})}function ta(a){return"function"==typeof a?a.toString().replace(/ \{[\s\S]*$/,""):"undefined"==typeof a?"undefined":"string"!=typeof a?sa(a):a}function ua(b){l(b,{bootstrap:ga,copy:O,extend:l,merge:m,equals:Q,element:zd,forEach:f,injector:$a,noop:p,bind:T,toJson:V,fromJson:W,identity:q,isUndefined:t,isDefined:u,isString:x,isFunction:A,isObject:v,isNumber:y,isElement:K,isArray:Ld,version:$d,isDate:z,lowercase:td,uppercase:vd,callbacks:{counter:0},getTestability:ia,$$minErr:d,$$csp:Pd,reloadWithDebugInfo:ha}),Bd=ra(a);try{Bd("ngLocale")}catch(c){Bd("ngLocale",[]).provider("$locale",Fb)}Bd("ng",["ngLocale"],["$provide",function(a){a.provider({$$sanitizeUri:qc}),a.provider("$compile",ib).directive({a:jf,input:Af,textarea:Af,form:of,script:sg,select:vg,style:xg,option:wg,ngBind:Df,ngBindHtml:Ff,ngBindTemplate:Ef,ngClass:Hf,ngClassEven:Jf,ngClassOdd:If,ngCloak:Kf,ngController:Lf,ngForm:pf,ngHide:mg,ngIf:Of,ngInclude:Pf,ngInit:Rf,ngNonBindable:dg,ngPluralize:hg,ngRepeat:ig,ngShow:lg,ngStyle:ng,ngSwitch:og,ngSwitchWhen:pg,ngSwitchDefault:qg,ngOptions:gg,ngTransclude:rg,ngModel:ag,ngList:Sf,ngChange:Gf,pattern:zg,ngPattern:zg,required:yg,ngRequired:yg,minlength:Bg,ngMinlength:Bg,maxlength:Ag,ngMaxlength:Ag,ngValue:Cf,ngModelOptions:cg}).directive({ngInclude:Qf}).directive(kf).directive(Mf),a.provider({$anchorScroll:_a,$animate:Be,$$animateQueue:Ae,$$AnimateRunner:ze,$browser:fb,$cacheFactory:gb,$controller:nb,$document:ob,$exceptionHandler:pb,$filter:Ec,$interpolate:Db,$interval:Eb,$http:zb,$httpParamSerializer:rb,$httpParamSerializerJQLike:sb,$httpBackend:Bb,$location:Tb,$log:Ub,$parse:kc,$rootScope:pc,$q:lc,$$q:mc,$sce:uc,$sceDelegate:tc,$sniffer:vc,$templateCache:hb,$templateRequest:wc,$$testability:xc,$timeout:yc,$window:Bc,$$rAF:oc,$$jqLite:Va,$$HashMap:qe,$$cookieReader:Dc})}])}function va(){return++ae}function wa(a){return a.replace(de,function(a,b,c,d){return d?c.toUpperCase():c}).replace(ee,"Moz$1")}function xa(a){return!ie.test(a)}function ya(a){var b=a.nodeType;return b===Ud||!b||b===Yd}function za(a){for(var b in _d[a.ng339])return!0;return!1}function Aa(a,b){var c,d,e,g,h=b.createDocumentFragment(),i=[];if(xa(a))i.push(b.createTextNode(a));else{for(c=c||h.appendChild(b.createElement("div")),d=(je.exec(a)||["",""])[1].toLowerCase(),e=le[d]||le._default,c.innerHTML=e[1]+a.replace(ke,"<$1></$2>")+e[2],g=e[0];g--;)c=c.lastChild;i=R(i,c.childNodes),c=h.firstChild,c.textContent=""}return h.textContent="",h.innerHTML="",f(i,function(a){h.appendChild(a)}),h}function Ba(a,c){c=c||b;var d;return(d=he.exec(a))?[c.createElement(d[1])]:(d=Aa(a,c))?d.childNodes:[]}function Ca(a){if(a instanceof Ca)return a;var b;if(x(a)&&(a=Nd(a),b=!0),!(this instanceof Ca)){if(b&&"<"!=a.charAt(0))throw ge("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new Ca(a)}b?Ma(this,Ba(a)):Ma(this,a)}function Da(a){return a.cloneNode(!0)}function Ea(a,b){if(b||Ga(a),a.querySelectorAll)for(var c=a.querySelectorAll("*"),d=0,e=c.length;e>d;d++)Ga(c[d])}function Fa(a,b,c,d){if(u(d))throw ge("offargs","jqLite#off() does not support the `selector` argument");var e=Ha(a),g=e&&e.events,h=e&&e.handle;if(h)if(b)f(b.split(" "),function(b){if(u(c)){var d=g[b];if(N(d||[],c),d&&d.length>0)return}ce(a,b,h),delete g[b]});else for(b in g)"$destroy"!==b&&ce(a,b,h),delete g[b]}function Ga(a,b){var d=a.ng339,e=d&&_d[d];if(e){if(b)return void delete e.data[b];e.handle&&(e.events.$destroy&&e.handle({},"$destroy"),Fa(a)),delete _d[d],a.ng339=c}}function Ha(a,b){var d=a.ng339,e=d&&_d[d];return b&&!e&&(a.ng339=d=va(),e=_d[d]={events:{},data:{},handle:c}),e}function Ia(a,b,c){if(ya(a)){var d=u(c),e=!d&&b&&!v(b),f=!b,g=Ha(a,!e),h=g&&g.data;if(d)h[b]=c;else{if(f)return h;if(e)return h&&h[b];l(h,b)}}}function Ja(a,b){return a.getAttribute?(" "+(a.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+b+" ")>-1:!1}function Ka(a,b){b&&a.setAttribute&&f(b.split(" "),function(b){a.setAttribute("class",Nd((" "+(a.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+Nd(b)+" "," ")))})}function La(a,b){if(b&&a.setAttribute){var c=(" "+(a.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");f(b.split(" "),function(a){a=Nd(a),-1===c.indexOf(" "+a+" ")&&(c+=a+" ")}),a.setAttribute("class",Nd(c))}}function Ma(a,b){if(b)if(b.nodeType)a[a.length++]=b;else{var c=b.length;if("number"==typeof c&&b.window!==b){if(c)for(var d=0;c>d;d++)a[a.length++]=b[d]}else a[a.length++]=b}}function Na(a,b){return Oa(a,"$"+(b||"ngController")+"Controller")}function Oa(a,b,d){a.nodeType==Yd&&(a=a.documentElement);for(var e=Ld(b)?b:[b];a;){for(var f=0,g=e.length;g>f;f++)if((d=zd.data(a,e[f]))!==c)return d;a=a.parentNode||a.nodeType===Zd&&a.host}}function Pa(a){for(Ea(a,!0);a.firstChild;)a.removeChild(a.firstChild)}function Qa(a,b){b||Ea(a);var c=a.parentNode;c&&c.removeChild(a)}function Ra(b,c){c=c||a,"complete"===c.document.readyState?c.setTimeout(b):zd(c).on("load",b)}function Sa(a,b){var c=ne[b.toLowerCase()];return c&&oe[M(a)]&&c}function Ta(a,b){var c=a.nodeName;return("INPUT"===c||"TEXTAREA"===c)&&pe[b]}function Ua(a,b){var c=function(c,d){c.isDefaultPrevented=function(){return c.defaultPrevented};var e=b[d||c.type],f=e?e.length:0;if(f){if(t(c.immediatePropagationStopped)){var g=c.stopImmediatePropagation;c.stopImmediatePropagation=function(){c.immediatePropagationStopped=!0,c.stopPropagation&&c.stopPropagation(),g&&g.call(c)}}c.isImmediatePropagationStopped=function(){return c.immediatePropagationStopped===!0},f>1&&(e=P(e));for(var h=0;f>h;h++)c.isImmediatePropagationStopped()||e[h].call(a,c)}};return c.elem=a,c}function Va(){this.$get=function(){return l(Ca,{hasClass:function(a,b){return a.attr&&(a=a[0]),Ja(a,b)},addClass:function(a,b){return a.attr&&(a=a[0]),La(a,b)},removeClass:function(a,b){return a.attr&&(a=a[0]),Ka(a,b)}})}}function Wa(a,b){var c=a&&a.$$hashKey;if(c)return"function"==typeof c&&(c=a.$$hashKey()),c;var d=typeof a;return c="function"==d||"object"==d&&null!==a?a.$$hashKey=d+":"+(b||i)():d+":"+a}function Xa(a,b){if(b){var c=0;this.nextUid=function(){return++c}}f(a,this.put,this)}function Ya(a){var b=a.toString().replace(ue,""),c=b.match(re);return c?"function("+(c[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}function Za(a,b,c){var d,e,g,h;if("function"==typeof a){if(!(d=a.$inject)){if(d=[],a.length){if(b)throw x(c)&&c||(c=a.name||Ya(a)),ve("strictdi","{0} is not using explicit annotation and cannot be invoked in strict mode",c);e=a.toString().replace(ue,""),g=e.match(re),f(g[1].split(se),function(a){a.replace(te,function(a,b,c){d.push(c)})})}a.$inject=d}}else Ld(a)?(h=a.length-1,ma(a[h],"fn"),d=a.slice(0,h)):ma(a,"fn",!0);return d}function $a(a,b){function d(a){return function(b,c){return v(b)?void f(b,h(a)):a(b,c)}}function e(a,b){if(na(a,"service"),(A(b)||Ld(b))&&(b=y.instantiate(b)),!b.$get)throw ve("pget","Provider '{0}' must define $get factory method.",a);return w[a+q]=b}function g(a,b){return function(){var c=B.invoke(b,this);if(t(c))throw ve("undef","Provider '{0}' must return a value from $get factory method.",a);return c}}function i(a,b,c){return e(a,{$get:c!==!1?g(a,b):b})}function j(a,b){return i(a,["$injector",function(a){return a.instantiate(b)}])}function k(a,b){return i(a,r(b),!1)}function l(a,b){na(a,"constant"),w[a]=b,z[a]=b}function m(a,b){var c=y.get(a+q),d=c.$get;c.$get=function(){var a=B.invoke(d,c);return B.invoke(b,null,{$delegate:a})}}function n(a){var b,c=[];return f(a,function(a){function d(a){var b,c;for(b=0,c=a.length;c>b;b++){var d=a[b],e=y.get(d[0]);e[d[1]].apply(e,d[2])}}if(!u.get(a)){u.put(a,!0);try{x(a)?(b=Bd(a),c=c.concat(n(b.requires)).concat(b._runBlocks),d(b._invokeQueue),d(b._configBlocks)):A(a)?c.push(y.invoke(a)):Ld(a)?c.push(y.invoke(a)):ma(a,"module")}catch(e){throw Ld(a)&&(a=a[a.length-1]),e.message&&e.stack&&-1==e.stack.indexOf(e.message)&&(e=e.message+"\n"+e.stack),ve("modulerr","Failed to instantiate module {0} due to:\n{1}",a,e.stack||e.message||e)}}}),c}function o(a,c){function d(b,d){if(a.hasOwnProperty(b)){if(a[b]===p)throw ve("cdep","Circular dependency found: {0}",b+" <- "+s.join(" <- "));return a[b]}try{return s.unshift(b),a[b]=p,a[b]=c(b,d)}catch(e){throw a[b]===p&&delete a[b],e}finally{s.shift()}}function e(a,c,e,f){"string"==typeof e&&(f=e,e=null);var g,h,i,j=[],k=$a.$$annotate(a,b,f);for(h=0,g=k.length;g>h;h++){if(i=k[h],"string"!=typeof i)throw ve("itkn","Incorrect injection token! Expected service name as string, got {0}",i);j.push(e&&e.hasOwnProperty(i)?e[i]:d(i,f))}return Ld(a)&&(a=a[g]),a.apply(c,j)}function f(a,b,c){var d=Object.create((Ld(a)?a[a.length-1]:a).prototype||null),f=e(a,d,b,c);return v(f)||A(f)?f:d}return{invoke:e,instantiate:f,get:d,annotate:$a.$$annotate,has:function(b){return w.hasOwnProperty(b+q)||a.hasOwnProperty(b)}}}b=b===!0;var p={},q="Provider",s=[],u=new Xa([],!0),w={$provide:{provider:d(e),factory:d(i),service:d(j),value:d(k),constant:d(l),decorator:m}},y=w.$injector=o(w,function(a,b){throw Id.isString(b)&&s.push(b),ve("unpr","Unknown provider: {0}",s.join(" <- "))}),z={},B=z.$injector=o(z,function(a,b){var d=y.get(a+q,b);return B.invoke(d.$get,d,c,a)});return f(n(a),function(a){a&&B.invoke(a)}),B}function _a(){var a=!0;this.disableAutoScrolling=function(){a=!1},this.$get=["$window","$location","$rootScope",function(b,c,d){function e(a){var b=null;return Array.prototype.some.call(a,function(a){return"a"===M(a)?(b=a,!0):void 0}),b}function f(){var a=h.yOffset;if(A(a))a=a();else if(K(a)){var c=a[0],d=b.getComputedStyle(c);a="fixed"!==d.position?0:c.getBoundingClientRect().bottom}else y(a)||(a=0);return a}function g(a){if(a){a.scrollIntoView();var c=f();if(c){var d=a.getBoundingClientRect().top;b.scrollBy(0,d-c)}}else b.scrollTo(0,0)}function h(a){a=x(a)?a:c.hash();var b;a?(b=i.getElementById(a))?g(b):(b=e(i.getElementsByName(a)))?g(b):"top"===a&&g(null):g(null)}var i=b.document;return a&&d.$watch(function(){return c.hash()},function(a,b){(a!==b||""!==a)&&Ra(function(){d.$evalAsync(h)})}),h}]}function ab(a,b){return a||b?a?b?(Ld(a)&&(a=a.join(" ")),Ld(b)&&(b=b.join(" ")),a+" "+b):a:b:""}function bb(a){for(var b=0;b<a.length;b++){var c=a[b];if(c.nodeType===xe)return c}}function cb(a){x(a)&&(a=a.split(" "));var b=qa();return f(a,function(a){a.length&&(b[a]=!0)}),b}function db(a){return v(a)?a:{}}function eb(a,b,c,d){function e(a){try{a.apply(null,S(arguments,1))}finally{if(s--,0===s)for(;u.length;)try{u.pop()()}catch(b){c.error(b)}}}function g(a){var b=a.indexOf("#");return-1===b?"":a.substr(b)}function h(){j(),k()}function i(){try{return n.state}catch(a){}}function j(){v=i(),v=t(v)?null:v,Q(v,C)&&(v=C),C=v}function k(){(x!==l.url()||w!==v)&&(x=l.url(),w=v,f(A,function(a){a(l.url(),v)}))}var l=this,m=(b[0],a.location),n=a.history,o=a.setTimeout,q=a.clearTimeout,r={};l.isMock=!1;var s=0,u=[];l.$$completeOutstandingRequest=e,l.$$incOutstandingRequestCount=function(){s++},l.notifyWhenNoOutstandingRequests=function(a){0===s?a():u.push(a)};var v,w,x=m.href,y=b.find("base"),z=null;j(),w=v,l.url=function(b,c,e){if(t(e)&&(e=null),m!==a.location&&(m=a.location),n!==a.history&&(n=a.history),b){var f=w===e;if(x===b&&(!d.history||f))return l;var h=x&&Kb(x)===Kb(b);return x=b,w=e,!d.history||h&&f?((!h||z)&&(z=b),c?m.replace(b):h?m.hash=g(b):m.href=b):(n[c?"replaceState":"pushState"](e,"",b),j(),w=v),l}return z||m.href.replace(/%27/g,"'")},l.state=function(){return v};var A=[],B=!1,C=null;l.onUrlChange=function(b){return B||(d.history&&zd(a).on("popstate",h),zd(a).on("hashchange",h),B=!0),A.push(b),b},l.$$applicationDestroyed=function(){zd(a).off("hashchange popstate",h)},l.$$checkUrlChange=k,l.baseHref=function(){var a=y.attr("href");return a?a.replace(/^(https?\:)?\/\/[^\/]*/,""):""},l.defer=function(a,b){var c;return s++,c=o(function(){delete r[c],e(a)},b||0),r[c]=!0,c},l.defer.cancel=function(a){return r[a]?(delete r[a],q(a),e(p),!0):!1}}function fb(){this.$get=["$window","$log","$sniffer","$document",function(a,b,c,d){return new eb(a,d,b,c)}]}function gb(){this.$get=function(){function a(a,c){function e(a){a!=m&&(n?n==a&&(n=a.n):n=a,f(a.n,a.p),f(a,m),m=a,m.n=null)}function f(a,b){a!=b&&(a&&(a.p=b),b&&(b.n=a))}if(a in b)throw d("$cacheFactory")("iid","CacheId '{0}' is already taken!",a);var g=0,h=l({},c,{id:a}),i={},j=c&&c.capacity||Number.MAX_VALUE,k={},m=null,n=null;return b[a]={put:function(a,b){if(!t(b)){if(j<Number.MAX_VALUE){var c=k[a]||(k[a]={key:a});e(c)}return a in i||g++,i[a]=b,g>j&&this.remove(n.key),b}},get:function(a){if(j<Number.MAX_VALUE){var b=k[a];if(!b)return;e(b)}return i[a]},remove:function(a){if(j<Number.MAX_VALUE){var b=k[a];if(!b)return;b==m&&(m=b.p),b==n&&(n=b.n),f(b.n,b.p),delete k[a]}delete i[a],g--},removeAll:function(){i={},g=0,k={},m=n=null},destroy:function(){i=null,h=null,k=null,delete b[a]},info:function(){return l({},h,{size:g})}}}var b={};return a.info=function(){var a={};return f(b,function(b,c){a[c]=b.info()}),a},a.get=function(a){return b[a]},a}}function hb(){this.$get=["$cacheFactory",function(a){return a("templates")}]}function ib(a,d){function e(a,b,c){var d=/^\s*([@&]|=(\*?))(\??)\s*(\w*)\s*$/,e={};return f(a,function(a,f){var g=a.match(d);if(!g)throw Ce("iscp","Invalid {3} for directive '{0}'. Definition: {... {1}: '{2}' ...}",b,f,a,c?"controller bindings definition":"isolate scope definition");e[f]={mode:g[1][0],collection:"*"===g[2],optional:"?"===g[3],attrName:g[4]||f}}),e}function g(a,b){var c={isolateScope:null,bindToController:null};if(v(a.scope)&&(a.bindToController===!0?(c.bindToController=e(a.scope,b,!0),c.isolateScope={}):c.isolateScope=e(a.scope,b,!1)),v(a.bindToController)&&(c.bindToController=e(a.bindToController,b,!0)),v(c.bindToController)){var d=a.controller,f=a.controllerAs;if(!d)throw Ce("noctrl","Cannot bind to controller without directive '{0}'s controller.",b);if(!mb(d,f))throw Ce("noident","Cannot bind to controller without identifier for directive '{0}'.",b)}return c}function i(a){var b=a.charAt(0);if(!b||b!==td(b))throw Ce("baddir","Directive name '{0}' is invalid. The first character must be a lowercase letter",a);if(a!==a.trim())throw Ce("baddir","Directive name '{0}' is invalid. The name should not contain leading or trailing whitespaces",a)}var j={},k="Directive",m=/^\s*directive\:\s*([\w\-]+)\s+(.*)$/,n=/(([\w\-]+)(?:\:([^;]+))?;?)/,s=L("ngSrc,ngSrcset,src,srcset"),t=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,w=/^(on[a-z]+|formaction)$/;this.directive=function z(b,c){return na(b,"directive"),x(b)?(i(b),la(c,"directiveFactory"),j.hasOwnProperty(b)||(j[b]=[],a.factory(b+k,["$injector","$exceptionHandler",function(a,c){var d=[];return f(j[b],function(e,f){try{var h=a.invoke(e);A(h)?h={compile:r(h)}:!h.compile&&h.link&&(h.compile=r(h.link)),h.priority=h.priority||0,h.index=f,h.name=h.name||b,h.require=h.require||h.controller&&h.name,h.restrict=h.restrict||"EA";var i=h.$$bindings=g(h,h.name);v(i.isolateScope)&&(h.$$isolateBindings=i.isolateScope),h.$$moduleName=e.$$moduleName,d.push(h)}catch(j){c(j)}}),d}])),j[b].push(c)):f(b,h(z)),this},this.aHrefSanitizationWhitelist=function(a){return u(a)?(d.aHrefSanitizationWhitelist(a),this):d.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(a){return u(a)?(d.imgSrcSanitizationWhitelist(a),this):d.imgSrcSanitizationWhitelist()};var y=!0;this.debugInfoEnabled=function(a){return u(a)?(y=a,this):y},this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$document","$sce","$animate","$$sanitizeUri",function(a,d,e,g,h,i,r,u,z,B,C){function E(a,b){try{a.addClass(b)}catch(c){}}function F(a,b,c,d,e){a instanceof zd||(a=zd(a)),f(a,function(b,c){b.nodeType==Wd&&b.nodeValue.match(/\S+/)&&(a[c]=zd(b).wrap("<span></span>").parent()[0])});var g=H(a,b,a,c,d,e);F.$$addScopeClass(a);var h=null;return function(b,c,d){la(b,"scope"),d=d||{};var e=d.parentBoundTranscludeFn,f=d.transcludeControllers,i=d.futureParentElement;e&&e.$$boundTransclude&&(e=e.$$boundTransclude),h||(h=G(i));var j;if(j="html"!==h?zd(Z(h,zd("<div>").append(a).html())):c?me.clone.call(a):a,f)for(var k in f)j.data("$"+k+"Controller",f[k].instance);return F.$$addScopeInfo(j,b),c&&c(j,b),g&&g(b,j,j,e),j}}function G(a){var b=a&&a[0];return b&&"foreignobject"!==M(b)&&b.toString().match(/SVG/)?"svg":"html"}function H(a,b,d,e,f,g){function h(a,d,e,f){var g,h,i,j,k,l,m,n,q;if(o){var r=d.length;for(q=new Array(r),k=0;k<p.length;k+=3)m=p[k],q[m]=d[m]}else q=d;for(k=0,l=p.length;l>k;)if(i=q[p[k++]],g=p[k++],h=p[k++],g){if(g.scope){j=a.$new(),F.$$addScopeInfo(zd(i),j);var s=g.$$destroyBindings;s&&(g.$$destroyBindings=null,j.$on("$destroyed",s))}else j=a;n=g.transcludeOnThisElement?I(a,g.transclude,f):!g.templateOnThisElement&&f?f:!f&&b?I(a,b):null,g(h,j,i,e,n,g)}else h&&h(a,i.childNodes,c,f)}for(var i,j,k,l,m,n,o,p=[],q=0;q<a.length;q++)i=new fa,j=J(a[q],[],i,0===q?e:c,f),k=j.length?O(j,a[q],i,b,d,null,[],[],g):null,k&&k.scope&&F.$$addScopeClass(i.$$element),m=k&&k.terminal||!(l=a[q].childNodes)||!l.length?null:H(l,k?(k.transcludeOnThisElement||!k.templateOnThisElement)&&k.transclude:b),(k||m)&&(p.push(q,k,m),n=!0,o=o||k),g=null;return n?h:null}function I(a,b,c){var d=function(d,e,f,g,h){return d||(d=a.$new(!1,h),d.$$transcluded=!0),b(d,e,{parentBoundTranscludeFn:c,transcludeControllers:f,futureParentElement:g})};return d}function J(a,b,c,d,e){var f,g,h=a.nodeType,i=c.$attr;switch(h){case Ud:R(b,jb(M(a)),"E",d,e);for(var j,k,l,o,p,q,r=a.attributes,s=0,t=r&&r.length;t>s;s++){var u=!1,w=!1;j=r[s],k=j.name,p=Nd(j.value),o=jb(k),(q=ka.test(o))&&(k=k.replace(De,"").substr(8).replace(/_(.)/g,function(a,b){return b.toUpperCase()}));var y=o.replace(/(Start|End)$/,"");T(y)&&o===y+"Start"&&(u=k,w=k.substr(0,k.length-5)+"end",k=k.substr(0,k.length-6)),l=jb(k.toLowerCase()),i[l]=k,(q||!c.hasOwnProperty(l))&&(c[l]=p,Sa(a,l)&&(c[l]=!0)),aa(a,b,p,l,q),R(b,l,"A",d,e,u,w)}if(g=a.className,v(g)&&(g=g.animVal),x(g)&&""!==g)for(;f=n.exec(g);)l=jb(f[2]),R(b,l,"C",d,e)&&(c[l]=Nd(f[3])),g=g.substr(f.index+f[0].length);break;case Wd:if(11===yd)for(;a.parentNode&&a.nextSibling&&a.nextSibling.nodeType===Wd;)a.nodeValue=a.nodeValue+a.nextSibling.nodeValue,a.parentNode.removeChild(a.nextSibling);Y(b,a.nodeValue);break;case Xd:try{f=m.exec(a.nodeValue),f&&(l=jb(f[1]),R(b,l,"M",d,e)&&(c[l]=Nd(f[2])))}catch(z){}}return b.sort(W),b}function K(a,b,c){var d=[],e=0;if(b&&a.hasAttribute&&a.hasAttribute(b)){do{if(!a)throw Ce("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",b,c);a.nodeType==Ud&&(a.hasAttribute(b)&&e++,a.hasAttribute(c)&&e--),d.push(a),a=a.nextSibling}while(e>0)}else d.push(a);return zd(d)}function L(a,b,c){return function(d,e,f,g,h){return e=K(e[0],b,c),a(d,e,f,g,h)}}function O(a,d,f,g,h,j,k,l,m){function n(a,b,c,d){a&&(c&&(a=L(a,c,d)),a.require=r.require,a.directiveName=s,(E===r||r.$$isolateScope)&&(a=ca(a,{isolateScope:!0})),k.push(a)),b&&(c&&(b=L(b,c,d)),b.require=r.require,b.directiveName=s,(E===r||r.$$isolateScope)&&(b=ca(b,{isolateScope:!0})),l.push(b))}function o(a,b,c,d){var e;if(x(b)){var f=b.match(t),g=b.substring(f[0].length),h=f[1]||f[3],i="?"===f[2];if("^^"===h?c=c.parent():(e=d&&d[g],e=e&&e.instance),!e){var j="$"+g+"Controller";e=h?c.inheritedData(j):c.data(j)}if(!e&&!i)throw Ce("ctreq","Controller '{0}', required by directive '{1}', can't be found!",g,a)}else if(Ld(b)){e=[];for(var k=0,l=b.length;l>k;k++)e[k]=o(a,b[k],c,d)}return e||null}function p(a,b,c,d,e,f){var g=qa();for(var h in d){var j=d[h],k={$scope:j===E||j.$$isolateScope?e:f,$element:a,$attrs:b,$transclude:c},l=j.controller;"@"==l&&(l=b[j.name]);var m=i(l,k,!0,j.controllerAs);g[j.name]=m,N||a.data("$"+j.name+"Controller",m.instance)}return g}function q(a,b,e,g,h,i){function j(a,b,d){var e;return D(a)||(d=b,b=a,a=c),N&&(e=t),d||(d=N?v.parent():v),h(a,b,e,d,H)}var m,n,q,r,s,t,u,v,w;if(d===e?(w=f,v=f.$$element):(v=zd(e),w=new fa(v,f)),E&&(s=b.$new(!0)),h&&(u=j,u.$$boundTransclude=h),C&&(t=p(v,w,u,C,s,b)),E&&(F.$$addScopeInfo(v,s,!0,!(G&&(G===E||G===E.$$originalDirective))),F.$$addScopeClass(v,!0),s.$$isolateBindings=E.$$isolateBindings,ea(b,w,s,s.$$isolateBindings,E,s)),t){var x,y,z=E||B;z&&t[z.name]&&(x=z.$$bindings.bindToController,r=t[z.name],r&&r.identifier&&x&&(y=r,i.$$destroyBindings=ea(b,w,r.instance,x,z)));for(m in t){r=t[m];var A=r();A!==r.instance&&(r.instance=A,v.data("$"+m+"Controller",A),r===y&&(i.$$destroyBindings(),i.$$destroyBindings=ea(b,w,A,x,z)))}}for(m=0,n=k.length;n>m;m++)q=k[m],da(q,q.isolateScope?s:b,v,w,q.require&&o(q.directiveName,q.require,v,t),u);var H=b;for(E&&(E.template||null===E.templateUrl)&&(H=s),a&&a(H,e.childNodes,c,h),m=l.length-1;m>=0;m--)q=l[m],da(q,q.isolateScope?s:b,v,w,q.require&&o(q.directiveName,q.require,v,t),u)}m=m||{};for(var r,s,u,w,y,z=-Number.MAX_VALUE,B=m.newScopeDirective,C=m.controllerDirectives,E=m.newIsolateScopeDirective,G=m.templateDirective,H=m.nonTlbTranscludeDirective,I=!1,M=!1,N=m.hasElementTranscludeDirective,O=f.$$element=zd(d),Q=j,R=g,T=0,W=a.length;W>T;T++){r=a[T];var Y=r.$$start,_=r.$$end;if(Y&&(O=K(d,Y,_)),u=c,z>r.priority)break;if((y=r.scope)&&(r.templateUrl||(v(y)?(X("new/isolated scope",E||B,r,O),E=r):X("new/isolated scope",E,r,O)),B=B||r),s=r.name,!r.templateUrl&&r.controller&&(y=r.controller,C=C||qa(),X("'"+s+"' controller",C[s],r,O),C[s]=r),(y=r.transclude)&&(I=!0,r.$$tlb||(X("transclusion",H,r,O),H=r),"element"==y?(N=!0,
z=r.priority,u=O,O=f.$$element=zd(b.createComment(" "+s+": "+f[s]+" ")),d=O[0],ba(h,S(u),d),R=F(u,g,z,Q&&Q.name,{nonTlbTranscludeDirective:H})):(u=zd(Da(d)).contents(),O.empty(),R=F(u,g))),r.template)if(M=!0,X("template",G,r,O),G=r,y=A(r.template)?r.template(O,f):r.template,y=ia(y),r.replace){if(Q=r,u=xa(y)?[]:lb(Z(r.templateNamespace,Nd(y))),d=u[0],1!=u.length||d.nodeType!==Ud)throw Ce("tplrt","Template for directive '{0}' must have exactly one root element. {1}",s,"");ba(h,O,d);var aa={$attr:{}},ga=J(d,[],aa),ha=a.splice(T+1,a.length-(T+1));E&&P(ga),a=a.concat(ga).concat(ha),U(f,aa),W=a.length}else O.html(y);if(r.templateUrl)M=!0,X("template",G,r,O),G=r,r.replace&&(Q=r),q=V(a.splice(T,a.length-T),O,f,h,I&&R,k,l,{controllerDirectives:C,newScopeDirective:B!==r&&B,newIsolateScopeDirective:E,templateDirective:G,nonTlbTranscludeDirective:H}),W=a.length;else if(r.compile)try{w=r.compile(O,f,R),A(w)?n(null,w,Y,_):w&&n(w.pre,w.post,Y,_)}catch(ja){e(ja,$(O))}r.terminal&&(q.terminal=!0,z=Math.max(z,r.priority))}return q.scope=B&&B.scope===!0,q.transcludeOnThisElement=I,q.templateOnThisElement=M,q.transclude=R,m.hasElementTranscludeDirective=N,q}function P(a){for(var b=0,c=a.length;c>b;b++)a[b]=o(a[b],{$$isolateScope:!0})}function R(b,d,f,g,h,i,l){if(d===h)return null;var m=null;if(j.hasOwnProperty(d))for(var n,p=a.get(d+k),q=0,r=p.length;r>q;q++)try{n=p[q],(g===c||g>n.priority)&&-1!=n.restrict.indexOf(f)&&(i&&(n=o(n,{$$start:i,$$end:l})),b.push(n),m=n)}catch(s){e(s)}return m}function T(b){if(j.hasOwnProperty(b))for(var c,d=a.get(b+k),e=0,f=d.length;f>e;e++)if(c=d[e],c.multiElement)return!0;return!1}function U(a,b){var c=b.$attr,d=a.$attr,e=a.$$element;f(a,function(d,e){"$"!=e.charAt(0)&&(b[e]&&b[e]!==d&&(d+=("style"===e?";":" ")+b[e]),a.$set(e,d,!0,c[e]))}),f(b,function(b,f){"class"==f?(E(e,b),a["class"]=(a["class"]?a["class"]+" ":"")+b):"style"==f?(e.attr("style",e.attr("style")+";"+b),a.style=(a.style?a.style+";":"")+b):"$"==f.charAt(0)||a.hasOwnProperty(f)||(a[f]=b,d[f]=c[f])})}function V(a,b,c,d,e,h,i,j){var k,l,m=[],n=b[0],p=a.shift(),q=o(p,{templateUrl:null,transclude:null,replace:null,$$originalDirective:p}),r=A(p.templateUrl)?p.templateUrl(b,c):p.templateUrl,s=p.templateNamespace;return b.empty(),g(r).then(function(g){var o,t,u,w;if(g=ia(g),p.replace){if(u=xa(g)?[]:lb(Z(s,Nd(g))),o=u[0],1!=u.length||o.nodeType!==Ud)throw Ce("tplrt","Template for directive '{0}' must have exactly one root element. {1}",p.name,r);t={$attr:{}},ba(d,b,o);var x=J(o,[],t);v(p.scope)&&P(x),a=x.concat(a),U(c,t)}else o=n,b.html(g);for(a.unshift(q),k=O(a,o,c,e,b,p,h,i,j),f(d,function(a,c){a==o&&(d[c]=b[0])}),l=H(b[0].childNodes,e);m.length;){var y=m.shift(),z=m.shift(),A=m.shift(),B=m.shift(),C=b[0];if(!y.$$destroyed){if(z!==n){var D=z.className;j.hasElementTranscludeDirective&&p.replace||(C=Da(o)),ba(A,zd(z),C),E(zd(C),D)}w=k.transcludeOnThisElement?I(y,k.transclude,B):B,k(l,y,C,d,w,k)}}m=null}),function(a,b,c,d,e){var f=e;b.$$destroyed||(m?m.push(b,c,d,f):(k.transcludeOnThisElement&&(f=I(b,k.transclude,e)),k(l,b,c,d,f,k)))}}function W(a,b){var c=b.priority-a.priority;return 0!==c?c:a.name!==b.name?a.name<b.name?-1:1:a.index-b.index}function X(a,b,c,d){function e(a){return a?" (module: "+a+")":""}if(b)throw Ce("multidir","Multiple directives [{0}{1}, {2}{3}] asking for {4} on: {5}",b.name,e(b.$$moduleName),c.name,e(c.$$moduleName),a,$(d))}function Y(a,b){var c=d(b,!0);c&&a.push({priority:0,compile:function(a){var b=a.parent(),d=!!b.length;return d&&F.$$addBindingClass(b),function(a,b){var e=b.parent();d||F.$$addBindingClass(e),F.$$addBindingInfo(e,c.expressions),a.$watch(c,function(a){b[0].nodeValue=a})}}})}function Z(a,c){switch(a=td(a||"html")){case"svg":case"math":var d=b.createElement("div");return d.innerHTML="<"+a+">"+c+"</"+a+">",d.childNodes[0].childNodes;default:return c}}function _(a,b){if("srcdoc"==b)return z.HTML;var c=M(a);return"xlinkHref"==b||"form"==c&&"action"==b||"img"!=c&&("src"==b||"ngSrc"==b)?z.RESOURCE_URL:void 0}function aa(a,b,c,e,f){var g=_(a,e);f=s[e]||f;var h=d(c,!0,g,f);if(h){if("multiple"===e&&"select"===M(a))throw Ce("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",$(a));b.push({priority:100,compile:function(){return{pre:function(a,b,i){var j=i.$$observers||(i.$$observers={});if(w.test(e))throw Ce("nodomevents","Interpolations for HTML DOM event attributes are disallowed.  Please use the ng- versions (such as ng-click instead of onclick) instead.");var k=i[e];k!==c&&(h=k&&d(k,!0,g,f),c=k),h&&(i[e]=h(a),(j[e]||(j[e]=[])).$$inter=!0,(i.$$observers&&i.$$observers[e].$$scope||a).$watch(h,function(a,b){"class"===e&&a!=b?i.$updateClass(a,b):i.$set(e,a)}))}}}})}}function ba(a,c,d){var e,f,g=c[0],h=c.length,i=g.parentNode;if(a)for(e=0,f=a.length;f>e;e++)if(a[e]==g){a[e++]=d;for(var j=e,k=j+h-1,l=a.length;l>j;j++,k++)l>k?a[j]=a[k]:delete a[j];a.length-=h-1,a.context===g&&(a.context=d);break}i&&i.replaceChild(d,g);var m=b.createDocumentFragment();m.appendChild(g),zd.hasData(g)&&(zd(d).data(zd(g).data()),Ad?(Kd=!0,Ad.cleanData([g])):delete zd.cache[g[zd.expando]]);for(var n=1,o=c.length;o>n;n++){var p=c[n];zd(p).remove(),m.appendChild(p),delete c[n]}c[0]=d,c.length=1}function ca(a,b){return l(function(){return a.apply(null,arguments)},a,b)}function da(a,b,c,d,f,g){try{a(b,c,d,f,g)}catch(h){e(h,$(c))}}function ea(a,b,e,g,i,j){var k;f(g,function(f,g){var j,l,m,n,o=f.attrName,q=f.optional,r=f.mode;switch(ud.call(b,o)||(b[o]=c),r){case"@":b[o]||q||(e[g]=c),b.$observe(o,function(a){e[g]=a}),b.$$observers[o].$$scope=a,b[o]&&(e[g]=d(b[o])(a));break;case"=":if(q&&!b[o])return;l=h(b[o]),n=l.literal?Q:function(a,b){return a===b||a!==a&&b!==b},m=l.assign||function(){throw j=e[g]=l(a),Ce("nonassign","Expression '{0}' used with directive '{1}' is non-assignable!",b[o],i.name)},j=e[g]=l(a);var s=function(b){return n(b,e[g])||(n(b,j)?m(a,b=e[g]):e[g]=b),j=b};s.$stateful=!0;var t;t=f.collection?a.$watchCollection(b[o],s):a.$watch(h(b[o],s),null,l.literal),k=k||[],k.push(t);break;case"&":if(l=h(b[o]),l===p&&q)break;e[g]=function(b){return l(a,b)}}});var l=k?function(){for(var a=0,b=k.length;b>a;++a)k[a]()}:p;return j&&l!==p?(j.$on("$destroy",l),p):l}var fa=function(a,b){if(b){var c,d,e,f=Object.keys(b);for(c=0,d=f.length;d>c;c++)e=f[c],this[e]=b[e]}else this.$attr={};this.$$element=a};fa.prototype={$normalize:jb,$addClass:function(a){a&&a.length>0&&B.addClass(this.$$element,a)},$removeClass:function(a){a&&a.length>0&&B.removeClass(this.$$element,a)},$updateClass:function(a,b){var c=kb(a,b);c&&c.length&&B.addClass(this.$$element,c);var d=kb(b,a);d&&d.length&&B.removeClass(this.$$element,d)},$set:function(a,b,d,g){var h,i=this.$$element[0],j=Sa(i,a),k=Ta(i,a),l=a;if(j?(this.$$element.prop(a,b),g=j):k&&(this[k]=b,l=k),this[a]=b,g?this.$attr[a]=g:(g=this.$attr[a],g||(this.$attr[a]=g=ja(a,"-"))),h=M(this.$$element),"a"===h&&"href"===a||"img"===h&&"src"===a)this[a]=b=C(b,"src"===a);else if("img"===h&&"srcset"===a){for(var m="",n=Nd(b),o=/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/,p=/\s/.test(n)?o:/(,)/,q=n.split(p),r=Math.floor(q.length/2),s=0;r>s;s++){var t=2*s;m+=C(Nd(q[t]),!0),m+=" "+Nd(q[t+1])}var u=Nd(q[2*s]).split(/\s/);m+=C(Nd(u[0]),!0),2===u.length&&(m+=" "+Nd(u[1])),this[a]=b=m}d!==!1&&(null===b||b===c?this.$$element.removeAttr(g):this.$$element.attr(g,b));var v=this.$$observers;v&&f(v[l],function(a){try{a(b)}catch(c){e(c)}})},$observe:function(a,b){var c=this,d=c.$$observers||(c.$$observers=qa()),e=d[a]||(d[a]=[]);return e.push(b),r.$evalAsync(function(){!e.$$inter&&c.hasOwnProperty(a)&&b(c[a])}),function(){N(e,b)}}};var ga=d.startSymbol(),ha=d.endSymbol(),ia="{{"==ga||"}}"==ha?q:function(a){return a.replace(/\{\{/g,ga).replace(/}}/g,ha)},ka=/^ngAttr[A-Z]/;return F.$$addBindingInfo=y?function(a,b){var c=a.data("$binding")||[];Ld(b)?c=c.concat(b):c.push(b),a.data("$binding",c)}:p,F.$$addBindingClass=y?function(a){E(a,"ng-binding")}:p,F.$$addScopeInfo=y?function(a,b,c,d){var e=c?d?"$isolateScopeNoTemplate":"$isolateScope":"$scope";a.data(e,b)}:p,F.$$addScopeClass=y?function(a,b){E(a,b?"ng-isolate-scope":"ng-scope")}:p,F}]}function jb(a){return wa(a.replace(De,""))}function kb(a,b){var c="",d=a.split(/\s+/),e=b.split(/\s+/);a:for(var f=0;f<d.length;f++){for(var g=d[f],h=0;h<e.length;h++)if(g==e[h])continue a;c+=(c.length>0?" ":"")+g}return c}function lb(a){a=zd(a);var b=a.length;if(1>=b)return a;for(;b--;){var c=a[b];c.nodeType===Xd&&Dd.call(a,b,1)}return a}function mb(a,b){if(b&&x(b))return b;if(x(a)){var c=Fe.exec(a);if(c)return c[3]}}function nb(){var a={},b=!1;this.register=function(b,c){na(b,"controller"),v(b)?l(a,b):a[b]=c},this.allowGlobals=function(){b=!0},this.$get=["$injector","$window",function(e,f){function g(a,b,c,e){if(!a||!v(a.$scope))throw d("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",e,b);a.$scope[b]=c}return function(d,h,i,j){var k,m,n,o;if(i=i===!0,j&&x(j)&&(o=j),x(d)){if(m=d.match(Fe),!m)throw Ee("ctrlfmt","Badly formed controller string '{0}'. Must match `__name__ as __id__` or `__name__`.",d);n=m[1],o=o||m[3],d=a.hasOwnProperty(n)?a[n]:oa(h.$scope,n,!0)||(b?oa(f,n,!0):c),ma(d,n,!0)}if(i){var p=(Ld(d)?d[d.length-1]:d).prototype;k=Object.create(p||null),o&&g(h,o,k,n||d.name);var q;return q=l(function(){var a=e.invoke(d,k,h,n);return a!==k&&(v(a)||A(a))&&(k=a,o&&g(h,o,k,n||d.name)),k},{instance:k,identifier:o})}return k=e.instantiate(d,h,n),o&&g(h,o,k,n||d.name),k}}]}function ob(){this.$get=["$window",function(a){return zd(a.document)}]}function pb(){this.$get=["$log",function(a){return function(b,c){a.error.apply(a,arguments)}}]}function qb(a){return v(a)?z(a)?a.toISOString():V(a):a}function rb(){this.$get=function(){return function(a){if(!a)return"";var b=[];return g(a,function(a,c){null===a||t(a)||(Ld(a)?f(a,function(a,d){b.push(da(c)+"="+da(qb(a)))}):b.push(da(c)+"="+da(qb(a))))}),b.join("&")}}}function sb(){this.$get=function(){return function(a){function b(a,d,e){null===a||t(a)||(Ld(a)?f(a,function(a){b(a,d+"[]")}):v(a)&&!z(a)?g(a,function(a,c){b(a,d+(e?"":"[")+c+(e?"":"]"))}):c.push(da(d)+"="+da(qb(a))))}if(!a)return"";var c=[];return b(a,"",!0),c.join("&")}}}function tb(a,b){if(x(a)){var c=a.replace(Ke,"").trim();if(c){var d=b("Content-Type");(d&&0===d.indexOf(Ge)||ub(c))&&(a=W(c))}}return a}function ub(a){var b=a.match(Ie);return b&&Je[b[0]].test(a)}function vb(a){function b(a,b){a&&(d[a]=d[a]?d[a]+", "+b:b)}var c,d=qa();return x(a)?f(a.split("\n"),function(a){c=a.indexOf(":"),b(td(Nd(a.substr(0,c))),Nd(a.substr(c+1)))}):v(a)&&f(a,function(a,c){b(td(c),Nd(a))}),d}function wb(a){var b;return function(c){if(b||(b=vb(a)),c){var d=b[td(c)];return void 0===d&&(d=null),d}return b}}function xb(a,b,c,d){return A(d)?d(a,b,c):(f(d,function(d){a=d(a,b,c)}),a)}function yb(a){return a>=200&&300>a}function zb(){var a=this.defaults={transformResponse:[tb],transformRequest:[function(a){return!v(a)||E(a)||G(a)||F(a)?a:V(a)}],headers:{common:{Accept:"application/json, text/plain, */*"},post:P(He),put:P(He),patch:P(He)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",paramSerializer:"$httpParamSerializer"},b=!1;this.useApplyAsync=function(a){return u(a)?(b=!!a,this):b};var e=this.interceptors=[];this.$get=["$httpBackend","$$cookieReader","$cacheFactory","$rootScope","$q","$injector",function(g,h,i,j,k,m){function n(b){function e(a){var b=l({},a);return a.data?b.data=xb(a.data,a.headers,a.status,i.transformResponse):b.data=a.data,yb(a.status)?b:k.reject(b)}function g(a,b){var c,d={};return f(a,function(a,e){A(a)?(c=a(b),null!=c&&(d[e]=c)):d[e]=a}),d}function h(b){var c,d,e,f=a.headers,h=l({},b.headers);f=l({},f.common,f[td(b.method)]);a:for(c in f){d=td(c);for(e in h)if(td(e)===d)continue a;h[c]=f[c]}return g(h,P(b))}if(!Id.isObject(b))throw d("$http")("badreq","Http request configuration must be an object.  Received: {0}",b);var i=l({method:"get",transformRequest:a.transformRequest,transformResponse:a.transformResponse,paramSerializer:a.paramSerializer},b);i.headers=h(b),i.method=vd(i.method),i.paramSerializer=x(i.paramSerializer)?m.get(i.paramSerializer):i.paramSerializer;var j=function(b){var d=b.headers,g=xb(b.data,wb(d),c,b.transformRequest);return t(g)&&f(d,function(a,b){"content-type"===td(b)&&delete d[b]}),t(b.withCredentials)&&!t(a.withCredentials)&&(b.withCredentials=a.withCredentials),q(b,g).then(e,e)},n=[j,c],o=k.when(i);for(f(w,function(a){(a.request||a.requestError)&&n.unshift(a.request,a.requestError),(a.response||a.responseError)&&n.push(a.response,a.responseError)});n.length;){var p=n.shift(),r=n.shift();o=o.then(p,r)}return o.success=function(a){return ma(a,"fn"),o.then(function(b){a(b.data,b.status,b.headers,i)}),o},o.error=function(a){return ma(a,"fn"),o.then(null,function(b){a(b.data,b.status,b.headers,i)}),o},o}function o(a){f(arguments,function(a){n[a]=function(b,c){return n(l({},c||{},{method:a,url:b}))}})}function p(a){f(arguments,function(a){n[a]=function(b,c,d){return n(l({},d||{},{method:a,url:b,data:c}))}})}function q(d,e){function f(a,c,d,e){function f(){i(c,a,d,e)}o&&(yb(a)?o.put(y,[a,c,vb(d),e]):o.remove(y)),b?j.$applyAsync(f):(f(),j.$$phase||j.$apply())}function i(a,b,c,e){b=Math.max(b,0),(yb(b)?q.resolve:q.reject)({data:a,status:b,headers:wb(c),config:d,statusText:e})}function l(a){i(a.data,a.status,P(a.headers()),a.statusText)}function m(){var a=n.pendingRequests.indexOf(d);-1!==a&&n.pendingRequests.splice(a,1)}var o,p,q=k.defer(),w=q.promise,x=d.headers,y=r(d.url,d.paramSerializer(d.params));if(n.pendingRequests.push(d),w.then(m,m),!d.cache&&!a.cache||d.cache===!1||"GET"!==d.method&&"JSONP"!==d.method||(o=v(d.cache)?d.cache:v(a.cache)?a.cache:s),o&&(p=o.get(y),u(p)?I(p)?p.then(l,l):Ld(p)?i(p[1],p[0],P(p[2]),p[3]):i(p,200,{},"OK"):o.put(y,w)),t(p)){var z=Ac(d.url)?h()[d.xsrfCookieName||a.xsrfCookieName]:c;z&&(x[d.xsrfHeaderName||a.xsrfHeaderName]=z),g(d.method,y,e,f,x,d.timeout,d.withCredentials,d.responseType)}return w}function r(a,b){return b.length>0&&(a+=(-1==a.indexOf("?")?"?":"&")+b),a}var s=i("$http");a.paramSerializer=x(a.paramSerializer)?m.get(a.paramSerializer):a.paramSerializer;var w=[];return f(e,function(a){w.unshift(x(a)?m.get(a):m.invoke(a))}),n.pendingRequests=[],o("get","delete","head","jsonp"),p("post","put","patch"),n.defaults=a,n}]}function Ab(){return new a.XMLHttpRequest}function Bb(){this.$get=["$browser","$window","$document",function(a,b,c){return Cb(a,Ab,a.defer,b.angular.callbacks,c[0])}]}function Cb(a,b,d,e,g){function h(a,b,c){var d=g.createElement("script"),f=null;return d.type="text/javascript",d.src=a,d.async=!0,f=function(a){ce(d,"load",f),ce(d,"error",f),g.body.removeChild(d),d=null;var h=-1,i="unknown";a&&("load"!==a.type||e[b].called||(a={type:"error"}),i=a.type,h="error"===a.type?404:200),c&&c(h,i)},be(d,"load",f),be(d,"error",f),g.body.appendChild(d),f}return function(g,i,j,k,l,m,n,o){function q(){t&&t(),v&&v.abort()}function r(b,e,f,g,h){y!==c&&d.cancel(y),t=v=null,b(e,f,g,h),a.$$completeOutstandingRequest(p)}if(a.$$incOutstandingRequestCount(),i=i||a.url(),"jsonp"==td(g)){var s="_"+(e.counter++).toString(36);e[s]=function(a){e[s].data=a,e[s].called=!0};var t=h(i.replace("JSON_CALLBACK","angular.callbacks."+s),s,function(a,b){r(k,a,e[s].data,"",b),e[s]=p})}else{var v=b();v.open(g,i,!0),f(l,function(a,b){u(a)&&v.setRequestHeader(b,a)}),v.onload=function(){var a=v.statusText||"",b="response"in v?v.response:v.responseText,c=1223===v.status?204:v.status;0===c&&(c=b?200:"file"==zc(i).protocol?404:0),r(k,c,b,v.getAllResponseHeaders(),a)};var w=function(){r(k,-1,null,null,"")};if(v.onerror=w,v.onabort=w,n&&(v.withCredentials=!0),o)try{v.responseType=o}catch(x){if("json"!==o)throw x}v.send(j)}if(m>0)var y=d(q,m);else I(m)&&m.then(q)}}function Db(){var a="{{",b="}}";this.startSymbol=function(b){return b?(a=b,this):a},this.endSymbol=function(a){return a?(b=a,this):b},this.$get=["$parse","$exceptionHandler","$sce",function(c,d,e){function f(a){return"\\\\\\"+a}function g(c){return c.replace(m,a).replace(n,b)}function h(a){if(null==a)return"";switch(typeof a){case"string":break;case"number":a=""+a;break;default:a=V(a)}return a}function i(f,i,m,n){function o(a){try{return a=C(a),n&&!u(a)?a:h(a)}catch(b){d(Le.interr(f,b))}}n=!!n;for(var p,q,r,s=0,v=[],w=[],x=f.length,y=[],z=[];x>s;){if(-1==(p=f.indexOf(a,s))||-1==(q=f.indexOf(b,p+j))){s!==x&&y.push(g(f.substring(s)));break}s!==p&&y.push(g(f.substring(s,p))),r=f.substring(p+j,q),v.push(r),w.push(c(r,o)),s=q+k,z.push(y.length),y.push("")}if(m&&y.length>1&&Le.throwNoconcat(f),!i||v.length){var B=function(a){for(var b=0,c=v.length;c>b;b++){if(n&&t(a[b]))return;y[z[b]]=a[b]}return y.join("")},C=function(a){return m?e.getTrusted(m,a):e.valueOf(a)};return l(function(a){var b=0,c=v.length,e=new Array(c);try{for(;c>b;b++)e[b]=w[b](a);return B(e)}catch(g){d(Le.interr(f,g))}},{exp:f,expressions:v,$$watchDelegate:function(a,b){var c;return a.$watchGroup(w,function(d,e){var f=B(d);A(b)&&b.call(this,f,d!==e?c:f,a),c=f})}})}}var j=a.length,k=b.length,m=new RegExp(a.replace(/./g,f),"g"),n=new RegExp(b.replace(/./g,f),"g");return i.startSymbol=function(){return a},i.endSymbol=function(){return b},i}]}function Eb(){this.$get=["$rootScope","$window","$q","$$q",function(a,b,c,d){function e(e,g,h,i){var j=arguments.length>4,k=j?S(arguments,4):[],l=b.setInterval,m=b.clearInterval,n=0,o=u(i)&&!i,p=(o?d:c).defer(),q=p.promise;return h=u(h)?h:0,q.then(null,null,j?function(){e.apply(null,k)}:e),q.$$intervalId=l(function(){p.notify(n++),h>0&&n>=h&&(p.resolve(n),m(q.$$intervalId),delete f[q.$$intervalId]),o||a.$apply()},g),f[q.$$intervalId]=p,q}var f={};return e.cancel=function(a){return a&&a.$$intervalId in f?(f[a.$$intervalId].reject("canceled"),b.clearInterval(a.$$intervalId),delete f[a.$$intervalId],!0):!1},e}]}function Fb(){this.$get=function(){return{id:"en-us",NUMBER_FORMATS:{DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{minInt:1,minFrac:0,maxFrac:3,posPre:"",posSuf:"",negPre:"-",negSuf:"",gSize:3,lgSize:3},{minInt:1,minFrac:2,maxFrac:2,posPre:"¤",posSuf:"",negPre:"(¤",negSuf:")",gSize:3,lgSize:3}],CURRENCY_SYM:"$"},DATETIME_FORMATS:{MONTH:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),SHORTMONTH:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),DAY:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),SHORTDAY:"Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(","),AMPMS:["AM","PM"],medium:"MMM d, y h:mm:ss a","short":"M/d/yy h:mm a",fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",mediumDate:"MMM d, y",shortDate:"M/d/yy",mediumTime:"h:mm:ss a",shortTime:"h:mm a",ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"]},pluralCat:function(a){return 1===a?"one":"other"}}}}function Gb(a){for(var b=a.split("/"),c=b.length;c--;)b[c]=ca(b[c]);return b.join("/")}function Hb(a,b){var c=zc(a);b.$$protocol=c.protocol,b.$$host=c.hostname,b.$$port=n(c.port)||Ne[c.protocol]||null}function Ib(a,b){var c="/"!==a.charAt(0);c&&(a="/"+a);var d=zc(a);b.$$path=decodeURIComponent(c&&"/"===d.pathname.charAt(0)?d.pathname.substring(1):d.pathname),b.$$search=aa(d.search),b.$$hash=decodeURIComponent(d.hash),b.$$path&&"/"!=b.$$path.charAt(0)&&(b.$$path="/"+b.$$path)}function Jb(a,b){return 0===b.indexOf(a)?b.substr(a.length):void 0}function Kb(a){var b=a.indexOf("#");return-1==b?a:a.substr(0,b)}function Lb(a){return a.replace(/(#.+)|#$/,"$1")}function Mb(a){return a.substr(0,Kb(a).lastIndexOf("/")+1)}function Nb(a){return a.substring(0,a.indexOf("/",a.indexOf("//")+2))}function Ob(a,b){this.$$html5=!0,b=b||"";var d=Mb(a);Hb(a,this),this.$$parse=function(a){var b=Jb(d,a);if(!x(b))throw Oe("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',a,d);Ib(b,this),this.$$path||(this.$$path="/"),this.$$compose()},this.$$compose=function(){var a=ba(this.$$search),b=this.$$hash?"#"+ca(this.$$hash):"";this.$$url=Gb(this.$$path)+(a?"?"+a:"")+b,this.$$absUrl=d+this.$$url.substr(1)},this.$$parseLinkUrl=function(e,f){if(f&&"#"===f[0])return this.hash(f.slice(1)),!0;var g,h,i;return(g=Jb(a,e))!==c?(h=g,i=(g=Jb(b,g))!==c?d+(Jb("/",g)||g):a+h):(g=Jb(d,e))!==c?i=d+g:d==e+"/"&&(i=d),i&&this.$$parse(i),!!i}}function Pb(a,b){var c=Mb(a);Hb(a,this),this.$$parse=function(d){function e(a,b,c){var d,e=/^\/[A-Z]:(\/.*)/;return 0===b.indexOf(c)&&(b=b.replace(c,"")),e.exec(b)?a:(d=e.exec(a),d?d[1]:a)}var f,g=Jb(a,d)||Jb(c,d);t(g)||"#"!==g.charAt(0)?this.$$html5?f=g:(f="",t(g)&&(a=d,this.replace())):(f=Jb(b,g),t(f)&&(f=g)),Ib(f,this),this.$$path=e(this.$$path,f,a),this.$$compose()},this.$$compose=function(){var c=ba(this.$$search),d=this.$$hash?"#"+ca(this.$$hash):"";this.$$url=Gb(this.$$path)+(c?"?"+c:"")+d,this.$$absUrl=a+(this.$$url?b+this.$$url:"")},this.$$parseLinkUrl=function(b,c){return Kb(a)==Kb(b)?(this.$$parse(b),!0):!1}}function Qb(a,b){this.$$html5=!0,Pb.apply(this,arguments);var c=Mb(a);this.$$parseLinkUrl=function(d,e){if(e&&"#"===e[0])return this.hash(e.slice(1)),!0;var f,g;return a==Kb(d)?f=d:(g=Jb(c,d))?f=a+b+g:c===d+"/"&&(f=c),f&&this.$$parse(f),!!f},this.$$compose=function(){var c=ba(this.$$search),d=this.$$hash?"#"+ca(this.$$hash):"";this.$$url=Gb(this.$$path)+(c?"?"+c:"")+d,this.$$absUrl=a+b+this.$$url}}function Rb(a){return function(){return this[a]}}function Sb(a,b){return function(c){return t(c)?this[a]:(this[a]=b(c),this.$$compose(),this)}}function Tb(){var a="",b={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(b){return u(b)?(a=b,this):a},this.html5Mode=function(a){return H(a)?(b.enabled=a,this):v(a)?(H(a.enabled)&&(b.enabled=a.enabled),H(a.requireBase)&&(b.requireBase=a.requireBase),H(a.rewriteLinks)&&(b.rewriteLinks=a.rewriteLinks),this):b},this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(c,d,e,f,g){function h(a,b,c){var e=j.url(),f=j.$$state;try{d.url(a,b,c),j.$$state=d.state()}catch(g){throw j.url(e),j.$$state=f,g}}function i(a,b){c.$broadcast("$locationChangeSuccess",j.absUrl(),a,j.$$state,b)}var j,k,l,m=d.baseHref(),n=d.url();if(b.enabled){if(!m&&b.requireBase)throw Oe("nobase","$location in HTML5 mode requires a <base> tag to be present!");l=Nb(n)+(m||"/"),k=e.history?Ob:Qb}else l=Kb(n),k=Pb;j=new k(l,"#"+a),j.$$parseLinkUrl(n,n),j.$$state=d.state();var o=/^\s*(javascript|mailto):/i;f.on("click",function(a){if(b.rewriteLinks&&!a.ctrlKey&&!a.metaKey&&!a.shiftKey&&2!=a.which&&2!=a.button){for(var e=zd(a.target);"a"!==M(e[0]);)if(e[0]===f[0]||!(e=e.parent())[0])return;var h=e.prop("href"),i=e.attr("href")||e.attr("xlink:href");v(h)&&"[object SVGAnimatedString]"===h.toString()&&(h=zc(h.animVal).href),o.test(h)||!h||e.attr("target")||a.isDefaultPrevented()||j.$$parseLinkUrl(h,i)&&(a.preventDefault(),j.absUrl()!=d.url()&&(c.$apply(),g.angular["ff-684208-preventDefault"]=!0))}}),Lb(j.absUrl())!=Lb(n)&&d.url(j.absUrl(),!0);var p=!0;return d.onUrlChange(function(a,b){c.$evalAsync(function(){var d,e=j.absUrl(),f=j.$$state;j.$$parse(a),j.$$state=b,d=c.$broadcast("$locationChangeStart",a,e,b,f).defaultPrevented,j.absUrl()===a&&(d?(j.$$parse(e),j.$$state=f,h(e,!1,f)):(p=!1,i(e,f)))}),c.$$phase||c.$digest()}),c.$watch(function(){var a=Lb(d.url()),b=Lb(j.absUrl()),f=d.state(),g=j.$$replace,k=a!==b||j.$$html5&&e.history&&f!==j.$$state;(p||k)&&(p=!1,c.$evalAsync(function(){var b=j.absUrl(),d=c.$broadcast("$locationChangeStart",b,a,j.$$state,f).defaultPrevented;j.absUrl()===b&&(d?(j.$$parse(a),j.$$state=f):(k&&h(b,g,f===j.$$state?null:j.$$state),i(a,f)))})),j.$$replace=!1}),j}]}function Ub(){var a=!0,b=this;this.debugEnabled=function(b){return u(b)?(a=b,this):a},this.$get=["$window",function(c){function d(a){return a instanceof Error&&(a.stack?a=a.message&&-1===a.stack.indexOf(a.message)?"Error: "+a.message+"\n"+a.stack:a.stack:a.sourceURL&&(a=a.message+"\n"+a.sourceURL+":"+a.line)),a}function e(a){var b=c.console||{},e=b[a]||b.log||p,g=!1;try{g=!!e.apply}catch(h){}return g?function(){var a=[];return f(arguments,function(b){a.push(d(b))}),e.apply(b,a)}:function(a,b){e(a,null==b?"":b)}}return{log:e("log"),info:e("info"),warn:e("warn"),error:e("error"),debug:function(){var c=e("debug");return function(){a&&c.apply(b,arguments)}}()}}]}function Vb(a,b){if("__defineGetter__"===a||"__defineSetter__"===a||"__lookupGetter__"===a||"__lookupSetter__"===a||"__proto__"===a)throw Qe("isecfld","Attempting to access a disallowed field in Angular expressions! Expression: {0}",b);return a}function Wb(a,b){if(a){if(a.constructor===a)throw Qe("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",b);if(a.window===a)throw Qe("isecwindow","Referencing the Window in Angular expressions is disallowed! Expression: {0}",b);if(a.children&&(a.nodeName||a.prop&&a.attr&&a.find))throw Qe("isecdom","Referencing DOM nodes in Angular expressions is disallowed! Expression: {0}",b);if(a===Object)throw Qe("isecobj","Referencing Object in Angular expressions is disallowed! Expression: {0}",b)}return a}function Xb(a,b){if(a){if(a.constructor===a)throw Qe("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",b);if(a===Re||a===Se||a===Te)throw Qe("isecff","Referencing call, apply or bind in Angular expressions is disallowed! Expression: {0}",b)}}function Yb(a,b){return"undefined"!=typeof a?a:b}function Zb(a,b){return"undefined"==typeof a?b:"undefined"==typeof b?a:a+b}function $b(a,b){var c=a(b);return!c.$stateful}function _b(a,b){var c,d;switch(a.type){case Xe.Program:c=!0,f(a.body,function(a){_b(a.expression,b),c=c&&a.expression.constant}),a.constant=c;break;case Xe.Literal:a.constant=!0,a.toWatch=[];break;case Xe.UnaryExpression:_b(a.argument,b),a.constant=a.argument.constant,a.toWatch=a.argument.toWatch;break;case Xe.BinaryExpression:_b(a.left,b),_b(a.right,b),a.constant=a.left.constant&&a.right.constant,a.toWatch=a.left.toWatch.concat(a.right.toWatch);break;case Xe.LogicalExpression:_b(a.left,b),_b(a.right,b),a.constant=a.left.constant&&a.right.constant,a.toWatch=a.constant?[]:[a];break;case Xe.ConditionalExpression:_b(a.test,b),_b(a.alternate,b),_b(a.consequent,b),a.constant=a.test.constant&&a.alternate.constant&&a.consequent.constant,a.toWatch=a.constant?[]:[a];break;case Xe.Identifier:a.constant=!1,a.toWatch=[a];break;case Xe.MemberExpression:_b(a.object,b),a.computed&&_b(a.property,b),a.constant=a.object.constant&&(!a.computed||a.property.constant),a.toWatch=[a];break;case Xe.CallExpression:c=a.filter?$b(b,a.callee.name):!1,d=[],f(a.arguments,function(a){_b(a,b),c=c&&a.constant,a.constant||d.push.apply(d,a.toWatch)}),a.constant=c,a.toWatch=a.filter&&$b(b,a.callee.name)?d:[a];break;case Xe.AssignmentExpression:_b(a.left,b),_b(a.right,b),a.constant=a.left.constant&&a.right.constant,a.toWatch=[a];break;case Xe.ArrayExpression:c=!0,d=[],f(a.elements,function(a){_b(a,b),c=c&&a.constant,a.constant||d.push.apply(d,a.toWatch)}),a.constant=c,a.toWatch=d;break;case Xe.ObjectExpression:c=!0,d=[],f(a.properties,function(a){_b(a.value,b),c=c&&a.value.constant,a.value.constant||d.push.apply(d,a.value.toWatch)}),a.constant=c,a.toWatch=d;break;case Xe.ThisExpression:a.constant=!1,a.toWatch=[]}}function ac(a){if(1==a.length){var b=a[0].expression,d=b.toWatch;return 1!==d.length?d:d[0]!==b?d:c}}function bc(a){return a.type===Xe.Identifier||a.type===Xe.MemberExpression}function cc(a){return 1===a.body.length&&bc(a.body[0].expression)?{type:Xe.AssignmentExpression,left:a.body[0].expression,right:{type:Xe.NGValueParameter},operator:"="}:void 0}function dc(a){return 0===a.body.length||1===a.body.length&&(a.body[0].expression.type===Xe.Literal||a.body[0].expression.type===Xe.ArrayExpression||a.body[0].expression.type===Xe.ObjectExpression)}function ec(a){return a.constant}function fc(a,b){this.astBuilder=a,this.$filter=b}function gc(a,b){this.astBuilder=a,this.$filter=b}function hc(a,b,c,d){Wb(a,d);for(var e,f=b.split("."),g=0;f.length>1;g++){e=Vb(f.shift(),d);var h=Wb(a[e],d);h||(h={},a[e]=h),a=h}return e=Vb(f.shift(),d),Wb(a[e],d),a[e]=c,c}function ic(a){return"constructor"==a}function jc(a){return A(a.valueOf)?a.valueOf():Ze.call(a)}function kc(){var a=qa(),b=qa();this.$get=["$filter","$sniffer",function(d,e){function g(a,b){return null==a||null==b?a===b:"object"==typeof a&&(a=jc(a),"object"==typeof a)?!1:a===b||a!==a&&b!==b}function h(a,b,d,e,f){var h,i=e.inputs;if(1===i.length){var j=g;return i=i[0],a.$watch(function(a){var b=i(a);return g(b,j)||(h=e(a,c,c,[b]),j=b&&jc(b)),h},b,d,f)}for(var k=[],l=[],m=0,n=i.length;n>m;m++)k[m]=g,l[m]=null;return a.$watch(function(a){for(var b=!1,d=0,f=i.length;f>d;d++){var j=i[d](a);(b||(b=!g(j,k[d])))&&(l[d]=j,k[d]=j&&jc(j))}return b&&(h=e(a,c,c,l)),h},b,d,f)}function i(a,b,c,d){var e,f;return e=a.$watch(function(a){return d(a)},function(a,c,d){f=a,A(b)&&b.apply(this,arguments),u(a)&&d.$$postDigest(function(){u(f)&&e()})},c)}function j(a,b,c,d){function e(a){var b=!0;return f(a,function(a){u(a)||(b=!1)}),b}var g,h;return g=a.$watch(function(a){return d(a)},function(a,c,d){h=a,A(b)&&b.call(this,a,c,d),e(a)&&d.$$postDigest(function(){e(h)&&g()})},c)}function k(a,b,c,d){var e;return e=a.$watch(function(a){return d(a)},function(a,c,d){A(b)&&b.apply(this,arguments),e()},c)}function l(a,b){if(!b)return a;var c=a.$$watchDelegate,d=c!==j&&c!==i,e=d?function(c,d,e,f){var g=a(c,d,e,f);return b(g,c,d)}:function(c,d,e,f){var g=a(c,d,e,f),h=b(g,c,d);return u(g)?h:g};return a.$$watchDelegate&&a.$$watchDelegate!==h?e.$$watchDelegate=a.$$watchDelegate:b.$stateful||(e.$$watchDelegate=h,e.inputs=a.inputs?a.inputs:[a]),e}var m={csp:e.csp,expensiveChecks:!1},n={csp:e.csp,expensiveChecks:!0};return function(c,e,f){var g,o,q;switch(typeof c){case"string":c=c.trim(),q=c;var r=f?b:a;if(g=r[q],!g){":"===c.charAt(0)&&":"===c.charAt(1)&&(o=!0,c=c.substring(2));var s=f?n:m,t=new We(s),u=new Ye(t,d,s);g=u.parse(c),g.constant?g.$$watchDelegate=k:o?g.$$watchDelegate=g.literal?j:i:g.inputs&&(g.$$watchDelegate=h),r[q]=g}return l(g,e);case"function":return l(c,e);default:return p}}}]}function lc(){this.$get=["$rootScope","$exceptionHandler",function(a,b){return nc(function(b){a.$evalAsync(b)},b)}]}function mc(){this.$get=["$browser","$exceptionHandler",function(a,b){return nc(function(b){a.defer(b)},b)}]}function nc(a,b){function e(a,b,c){function d(b){return function(c){e||(e=!0,b.call(a,c))}}var e=!1;return[d(b),d(c)]}function g(){this.$$state={status:0}}function h(a,b){return function(c){b.call(a,c)}}function i(a){var d,e,f;f=a.pending,a.processScheduled=!1,a.pending=c;for(var g=0,h=f.length;h>g;++g){e=f[g][0],d=f[g][a.status];try{A(d)?e.resolve(d(a.value)):1===a.status?e.resolve(a.value):e.reject(a.value)}catch(i){e.reject(i),b(i)}}}function j(b){!b.processScheduled&&b.pending&&(b.processScheduled=!0,a(function(){i(b)}))}function k(){this.promise=new g,this.resolve=h(this,this.resolve),this.reject=h(this,this.reject),this.notify=h(this,this.notify)}function l(a){var b=new k,c=0,d=Ld(a)?[]:{};return f(a,function(a,e){c++,r(a).then(function(a){d.hasOwnProperty(e)||(d[e]=a,--c||b.resolve(d))},function(a){d.hasOwnProperty(e)||b.reject(a)})}),0===c&&b.resolve(d),b.promise}var m=d("$q",TypeError),n=function(){return new k};g.prototype={then:function(a,b,c){var d=new k;return this.$$state.pending=this.$$state.pending||[],this.$$state.pending.push([d,a,b,c]),this.$$state.status>0&&j(this.$$state),d.promise},"catch":function(a){return this.then(null,a)},"finally":function(a,b){return this.then(function(b){return q(b,!0,a)},function(b){return q(b,!1,a)},b)}},k.prototype={resolve:function(a){this.promise.$$state.status||(a===this.promise?this.$$reject(m("qcycle","Expected promise to be resolved with value other than itself '{0}'",a)):this.$$resolve(a))},$$resolve:function(a){var c,d;d=e(this,this.$$resolve,this.$$reject);try{(v(a)||A(a))&&(c=a&&a.then),A(c)?(this.promise.$$state.status=-1,c.call(a,d[0],d[1],this.notify)):(this.promise.$$state.value=a,this.promise.$$state.status=1,j(this.promise.$$state))}catch(f){d[1](f),b(f)}},reject:function(a){this.promise.$$state.status||this.$$reject(a)},$$reject:function(a){this.promise.$$state.value=a,this.promise.$$state.status=2,j(this.promise.$$state)},notify:function(c){var d=this.promise.$$state.pending;
this.promise.$$state.status<=0&&d&&d.length&&a(function(){for(var a,e,f=0,g=d.length;g>f;f++){e=d[f][0],a=d[f][3];try{e.notify(A(a)?a(c):c)}catch(h){b(h)}}})}};var o=function(a){var b=new k;return b.reject(a),b.promise},p=function(a,b){var c=new k;return b?c.resolve(a):c.reject(a),c.promise},q=function(a,b,c){var d=null;try{A(c)&&(d=c())}catch(e){return p(e,!1)}return I(d)?d.then(function(){return p(a,b)},function(a){return p(a,!1)}):p(a,b)},r=function(a,b,c,d){var e=new k;return e.resolve(a),e.promise.then(b,c,d)},s=r,t=function u(a){function b(a){d.resolve(a)}function c(a){d.reject(a)}if(!A(a))throw m("norslvr","Expected resolverFn, got '{0}'",a);if(!(this instanceof u))return new u(a);var d=new k;return a(b,c),d.promise};return t.defer=n,t.reject=o,t.when=r,t.resolve=s,t.all=l,t}function oc(){this.$get=["$window","$timeout",function(a,b){function c(){for(var a=0;a<k.length;a++){var b=k[a];b&&(k[a]=null,b())}j=k.length=0}function d(a){var b=k.length;return j++,k.push(a),0===b&&(i=h(c)),function(){b>=0&&(k[b]=null,b=null,0===--j&&i&&(i(),i=null,k.length=0))}}var e=a.requestAnimationFrame||a.webkitRequestAnimationFrame,f=a.cancelAnimationFrame||a.webkitCancelAnimationFrame||a.webkitCancelRequestAnimationFrame,g=!!e,h=g?function(a){var b=e(a);return function(){f(b)}}:function(a){var c=b(a,16.66,!1);return function(){b.cancel(c)}};d.supported=g;var i,j=0,k=[];return d}]}function pc(){function a(a){function b(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$id=i(),this.$$ChildScope=null}return b.prototype=a,b}var b=10,c=d("$rootScope"),g=null,h=null;this.digestTtl=function(a){return arguments.length&&(b=a),b},this.$get=["$injector","$exceptionHandler","$parse","$browser",function(d,j,k,l){function m(a){a.currentScope.$$destroyed=!0}function n(){this.$id=i(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this.$root=this,this.$$destroyed=!1,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$$isolateBindings=null}function o(a){if(y.$$phase)throw c("inprog","{0} already in progress",y.$$phase);y.$$phase=a}function q(){y.$$phase=null}function r(a,b){do a.$$watchersCount+=b;while(a=a.$parent)}function s(a,b,c){do a.$$listenerCount[c]-=b,0===a.$$listenerCount[c]&&delete a.$$listenerCount[c];while(a=a.$parent)}function u(){}function w(){for(;C.length;)try{C.shift()()}catch(a){j(a)}h=null}function x(){null===h&&(h=l.defer(function(){y.$apply(w)}))}n.prototype={constructor:n,$new:function(b,c){var d;return c=c||this,b?(d=new n,d.$root=this.$root):(this.$$ChildScope||(this.$$ChildScope=a(this)),d=new this.$$ChildScope),d.$parent=c,d.$$prevSibling=c.$$childTail,c.$$childHead?(c.$$childTail.$$nextSibling=d,c.$$childTail=d):c.$$childHead=c.$$childTail=d,(b||c!=this)&&d.$on("$destroy",m),d},$watch:function(a,b,c,d){var e=k(a);if(e.$$watchDelegate)return e.$$watchDelegate(this,b,c,e,a);var f=this,h=f.$$watchers,i={fn:b,last:u,get:e,exp:d||a,eq:!!c};return g=null,A(b)||(i.fn=p),h||(h=f.$$watchers=[]),h.unshift(i),r(this,1),function(){N(h,i)>=0&&r(f,-1),g=null}},$watchGroup:function(a,b){function c(){i=!1,j?(j=!1,b(e,e,h)):b(e,d,h)}var d=new Array(a.length),e=new Array(a.length),g=[],h=this,i=!1,j=!0;if(!a.length){var k=!0;return h.$evalAsync(function(){k&&b(e,e,h)}),function(){k=!1}}return 1===a.length?this.$watch(a[0],function(a,c,f){e[0]=a,d[0]=c,b(e,a===c?e:d,f)}):(f(a,function(a,b){var f=h.$watch(a,function(a,f){e[b]=a,d[b]=f,i||(i=!0,h.$evalAsync(c))});g.push(f)}),function(){for(;g.length;)g.shift()()})},$watchCollection:function(a,b){function c(a){f=a;var b,c,d,h,i;if(!t(f)){if(v(f))if(e(f)){g!==n&&(g=n,q=g.length=0,l++),b=f.length,q!==b&&(l++,g.length=q=b);for(var j=0;b>j;j++)i=g[j],h=f[j],d=i!==i&&h!==h,d||i===h||(l++,g[j]=h)}else{g!==o&&(g=o={},q=0,l++),b=0;for(c in f)f.hasOwnProperty(c)&&(b++,h=f[c],i=g[c],c in g?(d=i!==i&&h!==h,d||i===h||(l++,g[c]=h)):(q++,g[c]=h,l++));if(q>b){l++;for(c in g)f.hasOwnProperty(c)||(q--,delete g[c])}}else g!==f&&(g=f,l++);return l}}function d(){if(p?(p=!1,b(f,f,i)):b(f,h,i),j)if(v(f))if(e(f)){h=new Array(f.length);for(var a=0;a<f.length;a++)h[a]=f[a]}else{h={};for(var c in f)ud.call(f,c)&&(h[c]=f[c])}else h=f}c.$stateful=!0;var f,g,h,i=this,j=b.length>1,l=0,m=k(a,c),n=[],o={},p=!0,q=0;return this.$watch(m,d)},$digest:function(){var a,d,e,f,i,k,m,n,p,r,s=b,t=this,v=[];o("$digest"),l.$$checkUrlChange(),this===y&&null!==h&&(l.defer.cancel(h),w()),g=null;do{for(k=!1,n=t;z.length;){try{r=z.shift(),r.scope.$eval(r.expression,r.locals)}catch(x){j(x)}g=null}a:do{if(f=n.$$watchers)for(i=f.length;i--;)try{if(a=f[i])if((d=a.get(n))===(e=a.last)||(a.eq?Q(d,e):"number"==typeof d&&"number"==typeof e&&isNaN(d)&&isNaN(e))){if(a===g){k=!1;break a}}else k=!0,g=a,a.last=a.eq?O(d,null):d,a.fn(d,e===u?d:e,n),5>s&&(p=4-s,v[p]||(v[p]=[]),v[p].push({msg:A(a.exp)?"fn: "+(a.exp.name||a.exp.toString()):a.exp,newVal:d,oldVal:e}))}catch(x){j(x)}if(!(m=n.$$watchersCount&&n.$$childHead||n!==t&&n.$$nextSibling))for(;n!==t&&!(m=n.$$nextSibling);)n=n.$parent}while(n=m);if((k||z.length)&&!s--)throw q(),c("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",b,v)}while(k||z.length);for(q();B.length;)try{B.shift()()}catch(x){j(x)}},$destroy:function(){if(!this.$$destroyed){var a=this.$parent;this.$broadcast("$destroy"),this.$$destroyed=!0,this===y&&l.$$applicationDestroyed(),r(this,-this.$$watchersCount);for(var b in this.$$listenerCount)s(this,this.$$listenerCount[b],b);a&&a.$$childHead==this&&(a.$$childHead=this.$$nextSibling),a&&a.$$childTail==this&&(a.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=p,this.$on=this.$watch=this.$watchGroup=function(){return p},this.$$listeners={},this.$parent=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=this.$root=this.$$watchers=null}},$eval:function(a,b){return k(a)(this,b)},$evalAsync:function(a,b){y.$$phase||z.length||l.defer(function(){z.length&&y.$digest()}),z.push({scope:this,expression:a,locals:b})},$$postDigest:function(a){B.push(a)},$apply:function(a){try{return o("$apply"),this.$eval(a)}catch(b){j(b)}finally{q();try{y.$digest()}catch(b){throw j(b),b}}},$applyAsync:function(a){function b(){c.$eval(a)}var c=this;a&&C.push(b),x()},$on:function(a,b){var c=this.$$listeners[a];c||(this.$$listeners[a]=c=[]),c.push(b);var d=this;do d.$$listenerCount[a]||(d.$$listenerCount[a]=0),d.$$listenerCount[a]++;while(d=d.$parent);var e=this;return function(){var d=c.indexOf(b);-1!==d&&(c[d]=null,s(e,1,a))}},$emit:function(a,b){var c,d,e,f=[],g=this,h=!1,i={name:a,targetScope:g,stopPropagation:function(){h=!0},preventDefault:function(){i.defaultPrevented=!0},defaultPrevented:!1},k=R([i],arguments,1);do{for(c=g.$$listeners[a]||f,i.currentScope=g,d=0,e=c.length;e>d;d++)if(c[d])try{c[d].apply(null,k)}catch(l){j(l)}else c.splice(d,1),d--,e--;if(h)return i.currentScope=null,i;g=g.$parent}while(g);return i.currentScope=null,i},$broadcast:function(a,b){var c=this,d=c,e=c,f={name:a,targetScope:c,preventDefault:function(){f.defaultPrevented=!0},defaultPrevented:!1};if(!c.$$listenerCount[a])return f;for(var g,h,i,k=R([f],arguments,1);d=e;){for(f.currentScope=d,g=d.$$listeners[a]||[],h=0,i=g.length;i>h;h++)if(g[h])try{g[h].apply(null,k)}catch(l){j(l)}else g.splice(h,1),h--,i--;if(!(e=d.$$listenerCount[a]&&d.$$childHead||d!==c&&d.$$nextSibling))for(;d!==c&&!(e=d.$$nextSibling);)d=d.$parent}return f.currentScope=null,f}};var y=new n,z=y.$$asyncQueue=[],B=y.$$postDigestQueue=[],C=y.$$applyAsyncQueue=[];return y}]}function qc(){var a=/^\s*(https?|ftp|mailto|tel|file):/,b=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(b){return u(b)?(a=b,this):a},this.imgSrcSanitizationWhitelist=function(a){return u(a)?(b=a,this):b},this.$get=function(){return function(c,d){var e,f=d?b:a;return e=zc(c).href,""===e||e.match(f)?c:"unsafe:"+e}}}function rc(a){if("self"===a)return a;if(x(a)){if(a.indexOf("***")>-1)throw $e("iwcard","Illegal sequence *** in string matcher.  String: {0}",a);return a=Od(a).replace("\\*\\*",".*").replace("\\*","[^:/.?&;]*"),new RegExp("^"+a+"$")}if(B(a))return new RegExp("^"+a.source+"$");throw $e("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}function sc(a){var b=[];return u(a)&&f(a,function(a){b.push(rc(a))}),b}function tc(){this.SCE_CONTEXTS=_e;var a=["self"],b=[];this.resourceUrlWhitelist=function(b){return arguments.length&&(a=sc(b)),a},this.resourceUrlBlacklist=function(a){return arguments.length&&(b=sc(a)),b},this.$get=["$injector",function(d){function e(a,b){return"self"===a?Ac(b):!!a.exec(b.href)}function f(c){var d,f,g=zc(c.toString()),h=!1;for(d=0,f=a.length;f>d;d++)if(e(a[d],g)){h=!0;break}if(h)for(d=0,f=b.length;f>d;d++)if(e(b[d],g)){h=!1;break}return h}function g(a){var b=function(a){this.$$unwrapTrustedValue=function(){return a}};return a&&(b.prototype=new a),b.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},b.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},b}function h(a,b){var d=m.hasOwnProperty(a)?m[a]:null;if(!d)throw $e("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",a,b);if(null===b||b===c||""===b)return b;if("string"!=typeof b)throw $e("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",a);return new d(b)}function i(a){return a instanceof l?a.$$unwrapTrustedValue():a}function j(a,b){if(null===b||b===c||""===b)return b;var d=m.hasOwnProperty(a)?m[a]:null;if(d&&b instanceof d)return b.$$unwrapTrustedValue();if(a===_e.RESOURCE_URL){if(f(b))return b;throw $e("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",b.toString())}if(a===_e.HTML)return k(b);throw $e("unsafe","Attempting to use an unsafe value in a safe context.")}var k=function(a){throw $e("unsafe","Attempting to use an unsafe value in a safe context.")};d.has("$sanitize")&&(k=d.get("$sanitize"));var l=g(),m={};return m[_e.HTML]=g(l),m[_e.CSS]=g(l),m[_e.URL]=g(l),m[_e.JS]=g(l),m[_e.RESOURCE_URL]=g(m[_e.URL]),{trustAs:h,getTrusted:j,valueOf:i}}]}function uc(){var a=!0;this.enabled=function(b){return arguments.length&&(a=!!b),a},this.$get=["$parse","$sceDelegate",function(b,c){if(a&&8>yd)throw $e("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 11 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var d=P(_e);d.isEnabled=function(){return a},d.trustAs=c.trustAs,d.getTrusted=c.getTrusted,d.valueOf=c.valueOf,a||(d.trustAs=d.getTrusted=function(a,b){return b},d.valueOf=q),d.parseAs=function(a,c){var e=b(c);return e.literal&&e.constant?e:b(c,function(b){return d.getTrusted(a,b)})};var e=d.parseAs,g=d.getTrusted,h=d.trustAs;return f(_e,function(a,b){var c=td(b);d[wa("parse_as_"+c)]=function(b){return e(a,b)},d[wa("get_trusted_"+c)]=function(b){return g(a,b)},d[wa("trust_as_"+c)]=function(b){return h(a,b)}}),d}]}function vc(){this.$get=["$window","$document",function(a,b){var c,d,e={},f=n((/android (\d+)/.exec(td((a.navigator||{}).userAgent))||[])[1]),g=/Boxee/i.test((a.navigator||{}).userAgent),h=b[0]||{},i=/^(Moz|webkit|ms)(?=[A-Z])/,j=h.body&&h.body.style,k=!1,l=!1;if(j){for(var m in j)if(d=i.exec(m)){c=d[0],c=c.substr(0,1).toUpperCase()+c.substr(1);break}c||(c="WebkitOpacity"in j&&"webkit"),k=!!("transition"in j||c+"Transition"in j),l=!!("animation"in j||c+"Animation"in j),!f||k&&l||(k=x(j.webkitTransition),l=x(j.webkitAnimation))}return{history:!(!a.history||!a.history.pushState||4>f||g),hasEvent:function(a){if("input"===a&&11>=yd)return!1;if(t(e[a])){var b=h.createElement("div");e[a]="on"+a in b}return e[a]},csp:Pd(),vendorPrefix:c,transitions:k,animations:l,android:f}}]}function wc(){this.$get=["$templateCache","$http","$q","$sce",function(a,b,c,d){function e(f,g){function h(a){if(!g)throw Ce("tpload","Failed to load template: {0} (HTTP status: {1} {2})",f,a.status,a.statusText);return c.reject(a)}e.totalPendingRequests++,x(f)&&a.get(f)||(f=d.getTrustedResourceUrl(f));var i=b.defaults&&b.defaults.transformResponse;Ld(i)?i=i.filter(function(a){return a!==tb}):i===tb&&(i=null);var j={cache:a,transformResponse:i};return b.get(f,j)["finally"](function(){e.totalPendingRequests--}).then(function(b){return a.put(f,b.data),b.data},h)}return e.totalPendingRequests=0,e}]}function xc(){this.$get=["$rootScope","$browser","$location",function(a,b,c){var d={};return d.findBindings=function(a,b,c){var d=a.getElementsByClassName("ng-binding"),e=[];return f(d,function(a){var d=Id.element(a).data("$binding");d&&f(d,function(d){if(c){var f=new RegExp("(^|\\s)"+Od(b)+"(\\s|\\||$)");f.test(d)&&e.push(a)}else-1!=d.indexOf(b)&&e.push(a)})}),e},d.findModels=function(a,b,c){for(var d=["ng-","data-ng-","ng\\:"],e=0;e<d.length;++e){var f=c?"=":"*=",g="["+d[e]+"model"+f+'"'+b+'"]',h=a.querySelectorAll(g);if(h.length)return h}},d.getLocation=function(){return c.url()},d.setLocation=function(b){b!==c.url()&&(c.url(b),a.$digest())},d.whenStable=function(a){b.notifyWhenNoOutstandingRequests(a)},d}]}function yc(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(a,b,c,d,e){function f(f,h,i){A(f)||(i=h,h=f,f=p);var j,k=S(arguments,3),l=u(i)&&!i,m=(l?d:c).defer(),n=m.promise;return j=b.defer(function(){try{m.resolve(f.apply(null,k))}catch(b){m.reject(b),e(b)}finally{delete g[n.$$timeoutId]}l||a.$apply()},h),n.$$timeoutId=j,g[j]=m,n}var g={};return f.cancel=function(a){return a&&a.$$timeoutId in g?(g[a.$$timeoutId].reject("canceled"),delete g[a.$$timeoutId],b.defer.cancel(a.$$timeoutId)):!1},f}]}function zc(a){var b=a;return yd&&(af.setAttribute("href",b),b=af.href),af.setAttribute("href",b),{href:af.href,protocol:af.protocol?af.protocol.replace(/:$/,""):"",host:af.host,search:af.search?af.search.replace(/^\?/,""):"",hash:af.hash?af.hash.replace(/^#/,""):"",hostname:af.hostname,port:af.port,pathname:"/"===af.pathname.charAt(0)?af.pathname:"/"+af.pathname}}function Ac(a){var b=x(a)?zc(a):a;return b.protocol===bf.protocol&&b.host===bf.host}function Bc(){this.$get=r(a)}function Cc(a){function b(a){try{return decodeURIComponent(a)}catch(b){return a}}var d=a[0]||{},e={},f="";return function(){var a,g,h,i,j,k=d.cookie||"";if(k!==f)for(f=k,a=f.split("; "),e={},h=0;h<a.length;h++)g=a[h],i=g.indexOf("="),i>0&&(j=b(g.substring(0,i)),e[j]===c&&(e[j]=b(g.substring(i+1))));return e}}function Dc(){this.$get=Cc}function Ec(a){function b(d,e){if(v(d)){var g={};return f(d,function(a,c){g[c]=b(c,a)}),g}return a.factory(d+c,e)}var c="Filter";this.register=b,this.$get=["$injector",function(a){return function(b){return a.get(b+c)}}],b("currency",Jc),b("date",Wc),b("filter",Fc),b("json",Xc),b("limitTo",Yc),b("lowercase",gf),b("number",Kc),b("orderBy",Zc),b("uppercase",hf)}function Fc(){return function(a,b,c){if(!e(a)){if(null==a)return a;throw d("filter")("notarray","Expected array but received: {0}",a)}var f,g,h=Ic(b);switch(h){case"function":f=b;break;case"boolean":case"null":case"number":case"string":g=!0;case"object":f=Gc(b,c,g);break;default:return a}return Array.prototype.filter.call(a,f)}}function Gc(a,b,c){var d,e=v(a)&&"$"in a;return b===!0?b=Q:A(b)||(b=function(a,b){return t(a)?!1:null===a||null===b?a===b:v(b)||v(a)&&!s(a)?!1:(a=td(""+a),b=td(""+b),-1!==a.indexOf(b))}),d=function(d){return e&&!v(d)?Hc(d,a.$,b,!1):Hc(d,a,b,c)}}function Hc(a,b,c,d,e){var f=Ic(a),g=Ic(b);if("string"===g&&"!"===b.charAt(0))return!Hc(a,b.substring(1),c,d);if(Ld(a))return a.some(function(a){return Hc(a,b,c,d)});switch(f){case"object":var h;if(d){for(h in a)if("$"!==h.charAt(0)&&Hc(a[h],b,c,!0))return!0;return e?!1:Hc(a,b,c,!1)}if("object"===g){for(h in b){var i=b[h];if(!A(i)&&!t(i)){var j="$"===h,k=j?a:a[h];if(!Hc(k,i,c,j,j))return!1}}return!0}return c(a,b);case"function":return!1;default:return c(a,b)}}function Ic(a){return null===a?"null":typeof a}function Jc(a){var b=a.NUMBER_FORMATS;return function(a,c,d){return t(c)&&(c=b.CURRENCY_SYM),t(d)&&(d=b.PATTERNS[1].maxFrac),null==a?a:Lc(a,b.PATTERNS[1],b.GROUP_SEP,b.DECIMAL_SEP,d).replace(/\u00A4/g,c)}}function Kc(a){var b=a.NUMBER_FORMATS;return function(a,c){return null==a?a:Lc(a,b.PATTERNS[0],b.GROUP_SEP,b.DECIMAL_SEP,c)}}function Lc(a,b,c,d,e){if(v(a))return"";var f=0>a;a=Math.abs(a);var g=a===1/0;if(!g&&!isFinite(a))return"";var h=a+"",i="",j=!1,k=[];if(g&&(i="∞"),!g&&-1!==h.indexOf("e")){var l=h.match(/([\d\.]+)e(-?)(\d+)/);l&&"-"==l[2]&&l[3]>e+1?a=0:(i=h,j=!0)}if(g||j)e>0&&1>a&&(i=a.toFixed(e),a=parseFloat(i));else{var m=(h.split(cf)[1]||"").length;t(e)&&(e=Math.min(Math.max(b.minFrac,m),b.maxFrac)),a=+(Math.round(+(a.toString()+"e"+e)).toString()+"e"+-e);var n=(""+a).split(cf),o=n[0];n=n[1]||"";var p,q=0,r=b.lgSize,s=b.gSize;if(o.length>=r+s)for(q=o.length-r,p=0;q>p;p++)(q-p)%s===0&&0!==p&&(i+=c),i+=o.charAt(p);for(p=q;p<o.length;p++)(o.length-p)%r===0&&0!==p&&(i+=c),i+=o.charAt(p);for(;n.length<e;)n+="0";e&&"0"!==e&&(i+=d+n.substr(0,e))}return 0===a&&(f=!1),k.push(f?b.negPre:b.posPre,i,f?b.negSuf:b.posSuf),k.join("")}function Mc(a,b,c){var d="";for(0>a&&(d="-",a=-a),a=""+a;a.length<b;)a="0"+a;return c&&(a=a.substr(a.length-b)),d+a}function Nc(a,b,c,d){return c=c||0,function(e){var f=e["get"+a]();return(c>0||f>-c)&&(f+=c),0===f&&-12==c&&(f=12),Mc(f,b,d)}}function Oc(a,b){return function(c,d){var e=c["get"+a](),f=vd(b?"SHORT"+a:a);return d[f][e]}}function Pc(a,b,c){var d=-1*c,e=d>=0?"+":"";return e+=Mc(Math[d>0?"floor":"ceil"](d/60),2)+Mc(Math.abs(d%60),2)}function Qc(a){var b=new Date(a,0,1).getDay();return new Date(a,0,(4>=b?5:12)-b)}function Rc(a){return new Date(a.getFullYear(),a.getMonth(),a.getDate()+(4-a.getDay()))}function Sc(a){return function(b){var c=Qc(b.getFullYear()),d=Rc(b),e=+d-+c,f=1+Math.round(e/6048e5);return Mc(f,a)}}function Tc(a,b){return a.getHours()<12?b.AMPMS[0]:b.AMPMS[1]}function Uc(a,b){return a.getFullYear()<=0?b.ERAS[0]:b.ERAS[1]}function Vc(a,b){return a.getFullYear()<=0?b.ERANAMES[0]:b.ERANAMES[1]}function Wc(a){function b(a){var b;if(b=a.match(c)){var d=new Date(0),e=0,f=0,g=b[8]?d.setUTCFullYear:d.setFullYear,h=b[8]?d.setUTCHours:d.setHours;b[9]&&(e=n(b[9]+b[10]),f=n(b[9]+b[11])),g.call(d,n(b[1]),n(b[2])-1,n(b[3]));var i=n(b[4]||0)-e,j=n(b[5]||0)-f,k=n(b[6]||0),l=Math.round(1e3*parseFloat("0."+(b[7]||0)));return h.call(d,i,j,k,l),d}return a}var c=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(c,d,e){var g,h,i="",j=[];if(d=d||"mediumDate",d=a.DATETIME_FORMATS[d]||d,x(c)&&(c=ff.test(c)?n(c):b(c)),y(c)&&(c=new Date(c)),!z(c)||!isFinite(c.getTime()))return c;for(;d;)h=ef.exec(d),h?(j=R(j,h,1),d=j.pop()):(j.push(d),d=null);var k=c.getTimezoneOffset();return e&&(k=X(e,c.getTimezoneOffset()),c=Z(c,e,!0)),f(j,function(b){g=df[b],i+=g?g(c,a.DATETIME_FORMATS,k):b.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),i}}function Xc(){return function(a,b){return t(b)&&(b=2),V(a,b)}}function Yc(){return function(a,b,c){return b=Math.abs(Number(b))===1/0?Number(b):n(b),isNaN(b)?a:(y(a)&&(a=a.toString()),Ld(a)||x(a)?(c=!c||isNaN(c)?0:n(c),c=0>c&&c>=-a.length?a.length+c:c,b>=0?a.slice(c,c+b):0===c?a.slice(b,a.length):a.slice(Math.max(0,c+b),c)):a)}}function Zc(a){function b(b,c){return c=c?-1:1,b.map(function(b){var d=1,e=q;if(A(b))e=b;else if(x(b)&&(("+"==b.charAt(0)||"-"==b.charAt(0))&&(d="-"==b.charAt(0)?-1:1,b=b.substring(1)),""!==b&&(e=a(b),e.constant))){var f=e();e=function(a){return a[f]}}return{get:e,descending:d*c}})}function c(a){switch(typeof a){case"number":case"boolean":case"string":return!0;default:return!1}}function d(a,b){return"function"==typeof a.valueOf&&(a=a.valueOf(),c(a))?a:s(a)&&(a=a.toString(),c(a))?a:b}function f(a,b){var c=typeof a;return null===a?(c="string",a="null"):"string"===c?a=a.toLowerCase():"object"===c&&(a=d(a,b)),{value:a,type:c}}function g(a,b){var c=0;return a.type===b.type?a.value!==b.value&&(c=a.value<b.value?-1:1):c=a.type<b.type?-1:1,c}return function(a,c,d){function h(a,b){return{value:a,predicateValues:j.map(function(c){return f(c.get(a),b)})}}function i(a,b){for(var c=0,d=0,e=j.length;e>d&&!(c=g(a.predicateValues[d],b.predicateValues[d])*j[d].descending);++d);return c}if(!e(a))return a;Ld(c)||(c=[c]),0===c.length&&(c=["+"]);var j=b(c,d),k=Array.prototype.map.call(a,h);return k.sort(i),a=k.map(function(a){return a.value})}}function $c(a){return A(a)&&(a={link:a}),a.restrict=a.restrict||"AC",r(a)}function _c(a,b){a.$name=b}function ad(a,b,d,e,g){var h=this,i=[],j=h.$$parentForm=a.parent().controller("form")||lf;h.$error={},h.$$success={},h.$pending=c,h.$name=g(b.name||b.ngForm||"")(d),h.$dirty=!1,h.$pristine=!0,h.$valid=!0,h.$invalid=!1,h.$submitted=!1,j.$addControl(h),h.$rollbackViewValue=function(){f(i,function(a){a.$rollbackViewValue()})},h.$commitViewValue=function(){f(i,function(a){a.$commitViewValue()})},h.$addControl=function(a){na(a.$name,"input"),i.push(a),a.$name&&(h[a.$name]=a)},h.$$renameControl=function(a,b){var c=a.$name;h[c]===a&&delete h[c],h[b]=a,a.$name=b},h.$removeControl=function(a){a.$name&&h[a.$name]===a&&delete h[a.$name],f(h.$pending,function(b,c){h.$setValidity(c,null,a)}),f(h.$error,function(b,c){h.$setValidity(c,null,a)}),f(h.$$success,function(b,c){h.$setValidity(c,null,a)}),N(i,a)},pd({ctrl:this,$element:a,set:function(a,b,c){var d=a[b];if(d){var e=d.indexOf(c);-1===e&&d.push(c)}else a[b]=[c]},unset:function(a,b,c){var d=a[b];d&&(N(d,c),0===d.length&&delete a[b])},parentForm:j,$animate:e}),h.$setDirty=function(){e.removeClass(a,Vf),e.addClass(a,Wf),h.$dirty=!0,h.$pristine=!1,j.$setDirty()},h.$setPristine=function(){e.setClass(a,Vf,Wf+" "+mf),h.$dirty=!1,h.$pristine=!0,h.$submitted=!1,f(i,function(a){a.$setPristine()})},h.$setUntouched=function(){f(i,function(a){a.$setUntouched()})},h.$setSubmitted=function(){e.addClass(a,mf),h.$submitted=!0,j.$setSubmitted()}}function bd(a){a.$formatters.push(function(b){return a.$isEmpty(b)?b:b.toString()})}function cd(a,b,c,d,e,f){dd(a,b,c,d,e,f),bd(d)}function dd(a,b,c,d,e,f){var g=td(b[0].type);if(!e.android){var h=!1;b.on("compositionstart",function(a){h=!0}),b.on("compositionend",function(){h=!1,i()})}var i=function(a){if(j&&(f.defer.cancel(j),j=null),!h){var e=b.val(),i=a&&a.type;"password"===g||c.ngTrim&&"false"===c.ngTrim||(e=Nd(e)),(d.$viewValue!==e||""===e&&d.$$hasNativeValidators)&&d.$setViewValue(e,i)}};if(e.hasEvent("input"))b.on("input",i);else{var j,k=function(a,b,c){j||(j=f.defer(function(){j=null,b&&b.value===c||i(a)}))};b.on("keydown",function(a){var b=a.keyCode;91===b||b>15&&19>b||b>=37&&40>=b||k(a,this,this.value)}),e.hasEvent("paste")&&b.on("paste cut",k)}b.on("change",i),d.$render=function(){b.val(d.$isEmpty(d.$viewValue)?"":d.$viewValue)}}function ed(a,b){if(z(a))return a;if(x(a)){wf.lastIndex=0;var c=wf.exec(a);if(c){var d=+c[1],e=+c[2],f=0,g=0,h=0,i=0,j=Qc(d),k=7*(e-1);return b&&(f=b.getHours(),g=b.getMinutes(),h=b.getSeconds(),i=b.getMilliseconds()),new Date(d,0,j.getDate()+k,f,g,h,i)}}return NaN}function fd(a,b){return function(c,d){var e,g;if(z(c))return c;if(x(c)){if('"'==c.charAt(0)&&'"'==c.charAt(c.length-1)&&(c=c.substring(1,c.length-1)),qf.test(c))return new Date(c);if(a.lastIndex=0,e=a.exec(c))return e.shift(),g=d?{yyyy:d.getFullYear(),MM:d.getMonth()+1,dd:d.getDate(),HH:d.getHours(),mm:d.getMinutes(),ss:d.getSeconds(),sss:d.getMilliseconds()/1e3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},f(e,function(a,c){c<b.length&&(g[b[c]]=+a)}),new Date(g.yyyy,g.MM-1,g.dd,g.HH,g.mm,g.ss||0,1e3*g.sss||0)}return NaN}}function gd(a,b,d,e){return function(f,g,h,i,j,k,l){function m(a){return a&&!(a.getTime&&a.getTime()!==a.getTime())}function n(a){return u(a)?z(a)?a:d(a):c}hd(f,g,h,i),dd(f,g,h,i,j,k);var o,p=i&&i.$options&&i.$options.timezone;if(i.$$parserName=a,i.$parsers.push(function(a){if(i.$isEmpty(a))return null;if(b.test(a)){var e=d(a,o);return p&&(e=Z(e,p)),e}return c}),i.$formatters.push(function(a){if(a&&!z(a))throw $f("datefmt","Expected `{0}` to be a date",a);return m(a)?(o=a,o&&p&&(o=Z(o,p,!0)),l("date")(a,e,p)):(o=null,"")}),u(h.min)||h.ngMin){var q;i.$validators.min=function(a){return!m(a)||t(q)||d(a)>=q},h.$observe("min",function(a){q=n(a),i.$validate()})}if(u(h.max)||h.ngMax){var r;i.$validators.max=function(a){return!m(a)||t(r)||d(a)<=r},h.$observe("max",function(a){r=n(a),i.$validate()})}}}function hd(a,b,d,e){var f=b[0],g=e.$$hasNativeValidators=v(f.validity);g&&e.$parsers.push(function(a){var d=b.prop(sd)||{};return d.badInput&&!d.typeMismatch?c:a})}function id(a,b,d,e,f,g){if(hd(a,b,d,e),dd(a,b,d,e,f,g),e.$$parserName="number",e.$parsers.push(function(a){return e.$isEmpty(a)?null:tf.test(a)?parseFloat(a):c}),e.$formatters.push(function(a){if(!e.$isEmpty(a)){if(!y(a))throw $f("numfmt","Expected `{0}` to be a number",a);a=a.toString()}return a}),u(d.min)||d.ngMin){var h;e.$validators.min=function(a){return e.$isEmpty(a)||t(h)||a>=h},d.$observe("min",function(a){u(a)&&!y(a)&&(a=parseFloat(a,10)),h=y(a)&&!isNaN(a)?a:c,e.$validate()})}if(u(d.max)||d.ngMax){var i;e.$validators.max=function(a){return e.$isEmpty(a)||t(i)||i>=a},d.$observe("max",function(a){u(a)&&!y(a)&&(a=parseFloat(a,10)),i=y(a)&&!isNaN(a)?a:c,e.$validate()})}}function jd(a,b,c,d,e,f){dd(a,b,c,d,e,f),bd(d),d.$$parserName="url",d.$validators.url=function(a,b){var c=a||b;return d.$isEmpty(c)||rf.test(c)}}function kd(a,b,c,d,e,f){dd(a,b,c,d,e,f),bd(d),d.$$parserName="email",d.$validators.email=function(a,b){var c=a||b;return d.$isEmpty(c)||sf.test(c)}}function ld(a,b,c,d){t(c.name)&&b.attr("name",i());var e=function(a){b[0].checked&&d.$setViewValue(c.value,a&&a.type)};b.on("click",e),d.$render=function(){var a=c.value;b[0].checked=a==d.$viewValue},c.$observe("value",d.$render)}function md(a,b,c,e,f){var g;if(u(e)){if(g=a(e),!g.constant)throw d("ngModel")("constexpr","Expected constant expression for `{0}`, but saw `{1}`.",c,e);return g(b)}return f}function nd(a,b,c,d,e,f,g,h){var i=md(h,a,"ngTrueValue",c.ngTrueValue,!0),j=md(h,a,"ngFalseValue",c.ngFalseValue,!1),k=function(a){d.$setViewValue(b[0].checked,a&&a.type)};b.on("click",k),d.$render=function(){b[0].checked=d.$viewValue},d.$isEmpty=function(a){return a===!1},d.$formatters.push(function(a){return Q(a,i)}),d.$parsers.push(function(a){return a?i:j})}function od(a,b){return a="ngClass"+a,["$animate",function(c){function d(a,b){var c=[];a:for(var d=0;d<a.length;d++){for(var e=a[d],f=0;f<b.length;f++)if(e==b[f])continue a;c.push(e)}return c}function e(a){var b=[];return Ld(a)?(f(a,function(a){b=b.concat(e(a))}),b):x(a)?a.split(" "):v(a)?(f(a,function(a,c){a&&(b=b.concat(c.split(" ")))}),b):a}return{restrict:"AC",link:function(g,h,i){function j(a){var b=l(a,1);i.$addClass(b)}function k(a){var b=l(a,-1);i.$removeClass(b)}function l(a,b){var c=h.data("$classCounts")||qa(),d=[];return f(a,function(a){(b>0||c[a])&&(c[a]=(c[a]||0)+b,c[a]===+(b>0)&&d.push(a))}),h.data("$classCounts",c),d.join(" ")}function m(a,b){var e=d(b,a),f=d(a,b);e=l(e,1),f=l(f,-1),e&&e.length&&c.addClass(h,e),f&&f.length&&c.removeClass(h,f)}function n(a){if(b===!0||g.$index%2===b){var c=e(a||[]);if(o){if(!Q(a,o)){var d=e(o);m(d,c)}}else j(c)}o=P(a)}var o;g.$watch(i[a],n,!0),i.$observe("class",function(b){n(g.$eval(i[a]))}),"ngClass"!==a&&g.$watch("$index",function(c,d){var f=1&c;if(f!==(1&d)){var h=e(g.$eval(i[a]));f===b?j(h):k(h)}})}}}]}function pd(a){function b(a,b,i){b===c?d("$pending",a,i):e("$pending",a,i),H(b)?b?(l(h.$error,a,i),k(h.$$success,a,i)):(k(h.$error,a,i),l(h.$$success,a,i)):(l(h.$error,a,i),l(h.$$success,a,i)),h.$pending?(f(Zf,!0),h.$valid=h.$invalid=c,g("",null)):(f(Zf,!1),h.$valid=qd(h.$error),h.$invalid=!h.$valid,g("",h.$valid));var j;j=h.$pending&&h.$pending[a]?c:h.$error[a]?!1:h.$$success[a]?!0:null,g(a,j),m.$setValidity(a,j,h)}function d(a,b,c){h[a]||(h[a]={}),k(h[a],b,c)}function e(a,b,d){h[a]&&l(h[a],b,d),qd(h[a])&&(h[a]=c)}function f(a,b){b&&!j[a]?(n.addClass(i,a),j[a]=!0):!b&&j[a]&&(n.removeClass(i,a),j[a]=!1)}function g(a,b){a=a?"-"+ja(a,"-"):"",f(Tf+a,b===!0),f(Uf+a,b===!1)}var h=a.ctrl,i=a.$element,j={},k=a.set,l=a.unset,m=a.parentForm,n=a.$animate;j[Uf]=!(j[Tf]=i.hasClass(Tf)),h.$setValidity=b}function qd(a){if(a)for(var b in a)if(a.hasOwnProperty(b))return!1;return!0}var rd=/^\/(.+)\/([a-z]*)$/,sd="validity",td=function(a){return x(a)?a.toLowerCase():a},ud=Object.prototype.hasOwnProperty,vd=function(a){return x(a)?a.toUpperCase():a},wd=function(a){return x(a)?a.replace(/[A-Z]/g,function(a){return String.fromCharCode(32|a.charCodeAt(0))}):a},xd=function(a){return x(a)?a.replace(/[a-z]/g,function(a){return String.fromCharCode(-33&a.charCodeAt(0))}):a};"i"!=="I".toLowerCase()&&(td=wd,vd=xd);var yd,zd,Ad,Bd,Cd=[].slice,Dd=[].splice,Ed=[].push,Fd=Object.prototype.toString,Gd=Object.getPrototypeOf,Hd=d("ng"),Id=a.angular||(a.angular={}),Jd=0;yd=b.documentMode,p.$inject=[],q.$inject=[];var Kd,Ld=Array.isArray,Md=/^\[object (Uint8(Clamped)?)|(Uint16)|(Uint32)|(Int8)|(Int16)|(Int32)|(Float(32)|(64))Array\]$/,Nd=function(a){return x(a)?a.trim():a},Od=function(a){return a.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},Pd=function(){if(u(Pd.isActive_))return Pd.isActive_;var a=!(!b.querySelector("[ng-csp]")&&!b.querySelector("[data-ng-csp]"));if(!a)try{new Function("")}catch(c){a=!0}return Pd.isActive_=a},Qd=function(){if(u(Qd.name_))return Qd.name_;var a,c,d,e,f=Rd.length;for(c=0;f>c;++c)if(d=Rd[c],a=b.querySelector("["+d.replace(":","\\:")+"jq]")){e=a.getAttribute(d+"jq");break}return Qd.name_=e},Rd=["ng-","data-ng-","ng:","x-ng-"],Sd=/[A-Z]/g,Td=!1,Ud=1,Vd=2,Wd=3,Xd=8,Yd=9,Zd=11,$d={full:"1.4.3",major:1,minor:4,dot:3,codeName:"foam-acceleration"};Ca.expando="ng339";var _d=Ca.cache={},ae=1,be=function(a,b,c){a.addEventListener(b,c,!1)},ce=function(a,b,c){a.removeEventListener(b,c,!1)};Ca._data=function(a){return this.cache[a[this.expando]]||{}};var de=/([\:\-\_]+(.))/g,ee=/^moz([A-Z])/,fe={mouseleave:"mouseout",mouseenter:"mouseover"},ge=d("jqLite"),he=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,ie=/<|&#?\w+;/,je=/<([\w:]+)/,ke=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,le={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};le.optgroup=le.option,le.tbody=le.tfoot=le.colgroup=le.caption=le.thead,le.th=le.td;var me=Ca.prototype={ready:function(c){function d(){e||(e=!0,c())}var e=!1;"complete"===b.readyState?setTimeout(d):(this.on("DOMContentLoaded",d),Ca(a).on("load",d))},toString:function(){var a=[];return f(this,function(b){a.push(""+b)}),"["+a.join(", ")+"]"},eq:function(a){return zd(a>=0?this[a]:this[this.length+a])},length:0,push:Ed,sort:[].sort,splice:[].splice},ne={};f("multiple,selected,checked,disabled,readOnly,required,open".split(","),function(a){ne[td(a)]=a});var oe={};f("input,select,option,textarea,button,form,details".split(","),function(a){oe[a]=!0});var pe={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern"};f({data:Ia,removeData:Ga,hasData:za},function(a,b){Ca[b]=a}),f({data:Ia,inheritedData:Oa,scope:function(a){return zd.data(a,"$scope")||Oa(a.parentNode||a,["$isolateScope","$scope"])},isolateScope:function(a){return zd.data(a,"$isolateScope")||zd.data(a,"$isolateScopeNoTemplate")},controller:Na,injector:function(a){return Oa(a,"$injector")},removeAttr:function(a,b){a.removeAttribute(b)},hasClass:Ja,css:function(a,b,c){return b=wa(b),u(c)?void(a.style[b]=c):a.style[b]},attr:function(a,b,d){var e=a.nodeType;if(e!==Wd&&e!==Vd&&e!==Xd){var f=td(b);if(ne[f]){if(!u(d))return a[b]||(a.attributes.getNamedItem(b)||p).specified?f:c;d?(a[b]=!0,
a.setAttribute(b,f)):(a[b]=!1,a.removeAttribute(f))}else if(u(d))a.setAttribute(b,d);else if(a.getAttribute){var g=a.getAttribute(b,2);return null===g?c:g}}},prop:function(a,b,c){return u(c)?void(a[b]=c):a[b]},text:function(){function a(a,b){if(t(b)){var c=a.nodeType;return c===Ud||c===Wd?a.textContent:""}a.textContent=b}return a.$dv="",a}(),val:function(a,b){if(t(b)){if(a.multiple&&"select"===M(a)){var c=[];return f(a.options,function(a){a.selected&&c.push(a.value||a.text)}),0===c.length?null:c}return a.value}a.value=b},html:function(a,b){return t(b)?a.innerHTML:(Ea(a,!0),void(a.innerHTML=b))},empty:Pa},function(a,b){Ca.prototype[b]=function(b,d){var e,f,g=this.length;if(a!==Pa&&(2==a.length&&a!==Ja&&a!==Na?b:d)===c){if(v(b)){for(e=0;g>e;e++)if(a===Ia)a(this[e],b);else for(f in b)a(this[e],f,b[f]);return this}for(var h=a.$dv,i=h===c?Math.min(g,1):g,j=0;i>j;j++){var k=a(this[j],b,d);h=h?h+k:k}return h}for(e=0;g>e;e++)a(this[e],b,d);return this}}),f({removeData:Ga,on:function Cg(a,b,c,d){if(u(d))throw ge("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");if(ya(a)){var e=Ha(a,!0),f=e.events,g=e.handle;g||(g=e.handle=Ua(a,f));for(var h=b.indexOf(" ")>=0?b.split(" "):[b],i=h.length;i--;){b=h[i];var j=f[b];j||(f[b]=[],"mouseenter"===b||"mouseleave"===b?Cg(a,fe[b],function(a){var c=this,d=a.relatedTarget;(!d||d!==c&&!c.contains(d))&&g(a,b)}):"$destroy"!==b&&be(a,b,g),j=f[b]),j.push(c)}}},off:Fa,one:function(a,b,c){a=zd(a),a.on(b,function d(){a.off(b,c),a.off(b,d)}),a.on(b,c)},replaceWith:function(a,b){var c,d=a.parentNode;Ea(a),f(new Ca(b),function(b){c?d.insertBefore(b,c.nextSibling):d.replaceChild(b,a),c=b})},children:function(a){var b=[];return f(a.childNodes,function(a){a.nodeType===Ud&&b.push(a)}),b},contents:function(a){return a.contentDocument||a.childNodes||[]},append:function(a,b){var c=a.nodeType;if(c===Ud||c===Zd){b=new Ca(b);for(var d=0,e=b.length;e>d;d++){var f=b[d];a.appendChild(f)}}},prepend:function(a,b){if(a.nodeType===Ud){var c=a.firstChild;f(new Ca(b),function(b){a.insertBefore(b,c)})}},wrap:function(a,b){b=zd(b).eq(0).clone()[0];var c=a.parentNode;c&&c.replaceChild(b,a),b.appendChild(a)},remove:Qa,detach:function(a){Qa(a,!0)},after:function(a,b){var c=a,d=a.parentNode;b=new Ca(b);for(var e=0,f=b.length;f>e;e++){var g=b[e];d.insertBefore(g,c.nextSibling),c=g}},addClass:La,removeClass:Ka,toggleClass:function(a,b,c){b&&f(b.split(" "),function(b){var d=c;t(d)&&(d=!Ja(a,b)),(d?La:Ka)(a,b)})},parent:function(a){var b=a.parentNode;return b&&b.nodeType!==Zd?b:null},next:function(a){return a.nextElementSibling},find:function(a,b){return a.getElementsByTagName?a.getElementsByTagName(b):[]},clone:Da,triggerHandler:function(a,b,c){var d,e,g,h=b.type||b,i=Ha(a),j=i&&i.events,k=j&&j[h];k&&(d={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return this.defaultPrevented===!0},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return this.immediatePropagationStopped===!0},stopPropagation:p,type:h,target:a},b.type&&(d=l(d,b)),e=P(k),g=c?[d].concat(c):[d],f(e,function(b){d.isImmediatePropagationStopped()||b.apply(a,g)}))}},function(a,b){Ca.prototype[b]=function(b,c,d){for(var e,f=0,g=this.length;g>f;f++)t(e)?(e=a(this[f],b,c,d),u(e)&&(e=zd(e))):Ma(e,a(this[f],b,c,d));return u(e)?e:this},Ca.prototype.bind=Ca.prototype.on,Ca.prototype.unbind=Ca.prototype.off}),Xa.prototype={put:function(a,b){this[Wa(a,this.nextUid)]=b},get:function(a){return this[Wa(a,this.nextUid)]},remove:function(a){var b=this[a=Wa(a,this.nextUid)];return delete this[a],b}};var qe=[function(){this.$get=[function(){return Xa}]}],re=/^function\s*[^\(]*\(\s*([^\)]*)\)/m,se=/,/,te=/^\s*(_?)(\S+?)\1\s*$/,ue=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,ve=d("$injector");$a.$$annotate=Za;var we=d("$animate"),xe=1,ye="ng-animate",ze=function(){this.$get=["$q","$$rAF",function(a,b){function c(){}return c.all=p,c.chain=p,c.prototype={end:p,cancel:p,resume:p,pause:p,complete:p,then:function(c,d){return a(function(a){b(function(){a()})}).then(c,d)}},c}]},Ae=function(){var a=new Xa,b=[];this.$get=["$$AnimateRunner","$rootScope",function(c,d){function e(c,e,g){var h=a.get(c);h||(a.put(c,h={}),b.push(c)),e&&f(e.split(" "),function(a){a&&(h[a]=!0)}),g&&f(g.split(" "),function(a){a&&(h[a]=!1)}),b.length>1||d.$$postDigest(function(){f(b,function(b){var c=a.get(b);if(c){var d=cb(b.attr("class")),e="",g="";f(c,function(a,b){var c=!!d[b];a!==c&&(a?e+=(e.length?" ":"")+b:g+=(g.length?" ":"")+b)}),f(b,function(a){e&&La(a,e),g&&Ka(a,g)}),a.remove(b)}}),b.length=0})}return{enabled:p,on:p,off:p,pin:p,push:function(a,b,d,f){return f&&f(),d=d||{},d.from&&a.css(d.from),d.to&&a.css(d.to),(d.addClass||d.removeClass)&&e(a,d.addClass,d.removeClass),new c}}}]},Be=["$provide",function(a){var b=this;this.$$registeredAnimations=Object.create(null),this.register=function(c,d){if(c&&"."!==c.charAt(0))throw we("notcsel","Expecting class selector starting with '.' got '{0}'.",c);var e=c+"-animation";b.$$registeredAnimations[c.substr(1)]=e,a.factory(e,d)},this.classNameFilter=function(a){if(1===arguments.length&&(this.$$classNameFilter=a instanceof RegExp?a:null,this.$$classNameFilter)){var b=new RegExp("(\\s+|\\/)"+ye+"(\\s+|\\/)");if(b.test(this.$$classNameFilter.toString()))throw we("nongcls",'$animateProvider.classNameFilter(regex) prohibits accepting a regex value which matches/contains the "{0}" CSS class.',ye)}return this.$$classNameFilter},this.$get=["$$animateQueue",function(a){function b(a,b,c){if(c){var d=bb(c);!d||d.parentNode||d.previousElementSibling||(c=null)}c?c.after(a):b.prepend(a)}return{on:a.on,off:a.off,pin:a.pin,enabled:a.enabled,cancel:function(a){a.end&&a.end()},enter:function(c,d,e,f){return d=d&&zd(d),e=e&&zd(e),d=d||e.parent(),b(c,d,e),a.push(c,"enter",db(f))},move:function(c,d,e,f){return d=d&&zd(d),e=e&&zd(e),d=d||e.parent(),b(c,d,e),a.push(c,"move",db(f))},leave:function(b,c){return a.push(b,"leave",db(c),function(){b.remove()})},addClass:function(b,c,d){return d=db(d),d.addClass=ab(d.addclass,c),a.push(b,"addClass",d)},removeClass:function(b,c,d){return d=db(d),d.removeClass=ab(d.removeClass,c),a.push(b,"removeClass",d)},setClass:function(b,c,d,e){return e=db(e),e.addClass=ab(e.addClass,c),e.removeClass=ab(e.removeClass,d),a.push(b,"setClass",e)},animate:function(b,c,d,e,f){return f=db(f),f.from=f.from?l(f.from,c):c,f.to=f.to?l(f.to,d):d,e=e||"ng-inline-animate",f.tempClasses=ab(f.tempClasses,e),a.push(b,"animate",f)}}}]}],Ce=d("$compile");ib.$inject=["$provide","$$sanitizeUriProvider"];var De=/^((?:x|data)[\:\-_])/i,Ee=d("$controller"),Fe=/^(\S+)(\s+as\s+(\w+))?$/,Ge="application/json",He={"Content-Type":Ge+";charset=utf-8"},Ie=/^\[|^\{(?!\{)/,Je={"[":/]$/,"{":/}$/},Ke=/^\)\]\}',?\n/,Le=Id.$interpolateMinErr=d("$interpolate");Le.throwNoconcat=function(a){throw Le("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",a)},Le.interr=function(a,b){return Le("interr","Can't interpolate: {0}\n{1}",a,b.toString())};var Me=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,Ne={http:80,https:443,ftp:21},Oe=d("$location"),Pe={$$html5:!1,$$replace:!1,absUrl:Rb("$$absUrl"),url:function(a){if(t(a))return this.$$url;var b=Me.exec(a);return(b[1]||""===a)&&this.path(decodeURIComponent(b[1])),(b[2]||b[1]||""===a)&&this.search(b[3]||""),this.hash(b[5]||""),this},protocol:Rb("$$protocol"),host:Rb("$$host"),port:Rb("$$port"),path:Sb("$$path",function(a){return a=null!==a?a.toString():"","/"==a.charAt(0)?a:"/"+a}),search:function(a,b){switch(arguments.length){case 0:return this.$$search;case 1:if(x(a)||y(a))a=a.toString(),this.$$search=aa(a);else{if(!v(a))throw Oe("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");a=O(a,{}),f(a,function(b,c){null==b&&delete a[c]}),this.$$search=a}break;default:t(b)||null===b?delete this.$$search[a]:this.$$search[a]=b}return this.$$compose(),this},hash:Sb("$$hash",function(a){return null!==a?a.toString():""}),replace:function(){return this.$$replace=!0,this}};f([Qb,Pb,Ob],function(a){a.prototype=Object.create(Pe),a.prototype.state=function(b){if(!arguments.length)return this.$$state;if(a!==Ob||!this.$$html5)throw Oe("nostate","History API state support is available only in HTML5 mode and only in browsers supporting HTML5 History API");return this.$$state=t(b)?null:b,this}});var Qe=d("$parse"),Re=Function.prototype.call,Se=Function.prototype.apply,Te=Function.prototype.bind,Ue=qa();f("+ - * / % === !== == != < > <= >= && || ! = |".split(" "),function(a){Ue[a]=!0});var Ve={n:"\n",f:"\f",r:"\r",t:"	",v:"","'":"'",'"':'"'},We=function(a){this.options=a};We.prototype={constructor:We,lex:function(a){for(this.text=a,this.index=0,this.tokens=[];this.index<this.text.length;){var b=this.text.charAt(this.index);if('"'===b||"'"===b)this.readString(b);else if(this.isNumber(b)||"."===b&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdent(b))this.readIdent();else if(this.is(b,"(){}[].,;:?"))this.tokens.push({index:this.index,text:b}),this.index++;else if(this.isWhitespace(b))this.index++;else{var c=b+this.peek(),d=c+this.peek(2),e=Ue[b],f=Ue[c],g=Ue[d];if(e||f||g){var h=g?d:f?c:b;this.tokens.push({index:this.index,text:h,operator:!0}),this.index+=h.length}else this.throwError("Unexpected next character ",this.index,this.index+1)}}return this.tokens},is:function(a,b){return-1!==b.indexOf(a)},peek:function(a){var b=a||1;return this.index+b<this.text.length?this.text.charAt(this.index+b):!1},isNumber:function(a){return a>="0"&&"9">=a&&"string"==typeof a},isWhitespace:function(a){return" "===a||"\r"===a||"	"===a||"\n"===a||""===a||" "===a},isIdent:function(a){return a>="a"&&"z">=a||a>="A"&&"Z">=a||"_"===a||"$"===a},isExpOperator:function(a){return"-"===a||"+"===a||this.isNumber(a)},throwError:function(a,b,c){c=c||this.index;var d=u(b)?"s "+b+"-"+this.index+" ["+this.text.substring(b,c)+"]":" "+c;throw Qe("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",a,d,this.text)},readNumber:function(){for(var a="",b=this.index;this.index<this.text.length;){var c=td(this.text.charAt(this.index));if("."==c||this.isNumber(c))a+=c;else{var d=this.peek();if("e"==c&&this.isExpOperator(d))a+=c;else if(this.isExpOperator(c)&&d&&this.isNumber(d)&&"e"==a.charAt(a.length-1))a+=c;else{if(!this.isExpOperator(c)||d&&this.isNumber(d)||"e"!=a.charAt(a.length-1))break;this.throwError("Invalid exponent")}}this.index++}this.tokens.push({index:b,text:a,constant:!0,value:Number(a)})},readIdent:function(){for(var a=this.index;this.index<this.text.length;){var b=this.text.charAt(this.index);if(!this.isIdent(b)&&!this.isNumber(b))break;this.index++}this.tokens.push({index:a,text:this.text.slice(a,this.index),identifier:!0})},readString:function(a){var b=this.index;this.index++;for(var c="",d=a,e=!1;this.index<this.text.length;){var f=this.text.charAt(this.index);if(d+=f,e){if("u"===f){var g=this.text.substring(this.index+1,this.index+5);g.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+g+"]"),this.index+=4,c+=String.fromCharCode(parseInt(g,16))}else{var h=Ve[f];c+=h||f}e=!1}else if("\\"===f)e=!0;else{if(f===a)return this.index++,void this.tokens.push({index:b,text:d,constant:!0,value:c});c+=f}this.index++}this.throwError("Unterminated quote",b)}};var Xe=function(a,b){this.lexer=a,this.options=b};Xe.Program="Program",Xe.ExpressionStatement="ExpressionStatement",Xe.AssignmentExpression="AssignmentExpression",Xe.ConditionalExpression="ConditionalExpression",Xe.LogicalExpression="LogicalExpression",Xe.BinaryExpression="BinaryExpression",Xe.UnaryExpression="UnaryExpression",Xe.CallExpression="CallExpression",Xe.MemberExpression="MemberExpression",Xe.Identifier="Identifier",Xe.Literal="Literal",Xe.ArrayExpression="ArrayExpression",Xe.Property="Property",Xe.ObjectExpression="ObjectExpression",Xe.ThisExpression="ThisExpression",Xe.NGValueParameter="NGValueParameter",Xe.prototype={ast:function(a){this.text=a,this.tokens=this.lexer.lex(a);var b=this.program();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),b},program:function(){for(var a=[];;)if(this.tokens.length>0&&!this.peek("}",")",";","]")&&a.push(this.expressionStatement()),!this.expect(";"))return{type:Xe.Program,body:a}},expressionStatement:function(){return{type:Xe.ExpressionStatement,expression:this.filterChain()}},filterChain:function(){for(var a,b=this.expression();a=this.expect("|");)b=this.filter(b);return b},expression:function(){return this.assignment()},assignment:function(){var a=this.ternary();return this.expect("=")&&(a={type:Xe.AssignmentExpression,left:a,right:this.assignment(),operator:"="}),a},ternary:function(){var a,b,c=this.logicalOR();return this.expect("?")&&(a=this.expression(),this.consume(":"))?(b=this.expression(),{type:Xe.ConditionalExpression,test:c,alternate:a,consequent:b}):c},logicalOR:function(){for(var a=this.logicalAND();this.expect("||");)a={type:Xe.LogicalExpression,operator:"||",left:a,right:this.logicalAND()};return a},logicalAND:function(){for(var a=this.equality();this.expect("&&");)a={type:Xe.LogicalExpression,operator:"&&",left:a,right:this.equality()};return a},equality:function(){for(var a,b=this.relational();a=this.expect("==","!=","===","!==");)b={type:Xe.BinaryExpression,operator:a.text,left:b,right:this.relational()};return b},relational:function(){for(var a,b=this.additive();a=this.expect("<",">","<=",">=");)b={type:Xe.BinaryExpression,operator:a.text,left:b,right:this.additive()};return b},additive:function(){for(var a,b=this.multiplicative();a=this.expect("+","-");)b={type:Xe.BinaryExpression,operator:a.text,left:b,right:this.multiplicative()};return b},multiplicative:function(){for(var a,b=this.unary();a=this.expect("*","/","%");)b={type:Xe.BinaryExpression,operator:a.text,left:b,right:this.unary()};return b},unary:function(){var a;return(a=this.expect("+","-","!"))?{type:Xe.UnaryExpression,operator:a.text,prefix:!0,argument:this.unary()}:this.primary()},primary:function(){var a;this.expect("(")?(a=this.filterChain(),this.consume(")")):this.expect("[")?a=this.arrayDeclaration():this.expect("{")?a=this.object():this.constants.hasOwnProperty(this.peek().text)?a=O(this.constants[this.consume().text]):this.peek().identifier?a=this.identifier():this.peek().constant?a=this.constant():this.throwError("not a primary expression",this.peek());for(var b;b=this.expect("(","[",".");)"("===b.text?(a={type:Xe.CallExpression,callee:a,arguments:this.parseArguments()},this.consume(")")):"["===b.text?(a={type:Xe.MemberExpression,object:a,property:this.expression(),computed:!0},this.consume("]")):"."===b.text?a={type:Xe.MemberExpression,object:a,property:this.identifier(),computed:!1}:this.throwError("IMPOSSIBLE");return a},filter:function(a){for(var b=[a],c={type:Xe.CallExpression,callee:this.identifier(),arguments:b,filter:!0};this.expect(":");)b.push(this.expression());return c},parseArguments:function(){var a=[];if(")"!==this.peekToken().text)do a.push(this.expression());while(this.expect(","));return a},identifier:function(){var a=this.consume();return a.identifier||this.throwError("is not a valid identifier",a),{type:Xe.Identifier,name:a.text}},constant:function(){return{type:Xe.Literal,value:this.consume().value}},arrayDeclaration:function(){var a=[];if("]"!==this.peekToken().text)do{if(this.peek("]"))break;a.push(this.expression())}while(this.expect(","));return this.consume("]"),{type:Xe.ArrayExpression,elements:a}},object:function(){var a,b=[];if("}"!==this.peekToken().text)do{if(this.peek("}"))break;a={type:Xe.Property,kind:"init"},this.peek().constant?a.key=this.constant():this.peek().identifier?a.key=this.identifier():this.throwError("invalid key",this.peek()),this.consume(":"),a.value=this.expression(),b.push(a)}while(this.expect(","));return this.consume("}"),{type:Xe.ObjectExpression,properties:b}},throwError:function(a,b){throw Qe("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",b.text,a,b.index+1,this.text,this.text.substring(b.index))},consume:function(a){if(0===this.tokens.length)throw Qe("ueoe","Unexpected end of expression: {0}",this.text);var b=this.expect(a);return b||this.throwError("is unexpected, expecting ["+a+"]",this.peek()),b},peekToken:function(){if(0===this.tokens.length)throw Qe("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(a,b,c,d){return this.peekAhead(0,a,b,c,d)},peekAhead:function(a,b,c,d,e){if(this.tokens.length>a){var f=this.tokens[a],g=f.text;if(g===b||g===c||g===d||g===e||!b&&!c&&!d&&!e)return f}return!1},expect:function(a,b,c,d){var e=this.peek(a,b,c,d);return e?(this.tokens.shift(),e):!1},constants:{"true":{type:Xe.Literal,value:!0},"false":{type:Xe.Literal,value:!1},"null":{type:Xe.Literal,value:null},undefined:{type:Xe.Literal,value:c},"this":{type:Xe.ThisExpression}}},fc.prototype={compile:function(a,b){var d=this,e=this.astBuilder.ast(a);this.state={nextId:0,filters:{},expensiveChecks:b,fn:{vars:[],body:[],own:{}},assign:{vars:[],body:[],own:{}},inputs:[]},_b(e,d.$filter);var g,h="";if(this.stage="assign",g=cc(e)){this.state.computing="assign";var i=this.nextId();this.recurse(g,i),h="fn.assign="+this.generateFunction("assign","s,v,l")}var j=ac(e.body);d.stage="inputs",f(j,function(a,b){var c="fn"+b;d.state[c]={vars:[],body:[],own:{}},d.state.computing=c;var e=d.nextId();d.recurse(a,e),d.return_(e),d.state.inputs.push(c),a.watchId=b}),this.state.computing="fn",this.stage="main",this.recurse(e);var k='"'+this.USE+" "+this.STRICT+'";\n'+this.filterPrefix()+"var fn="+this.generateFunction("fn","s,l,a,i")+h+this.watchFns()+"return fn;",l=new Function("$filter","ensureSafeMemberName","ensureSafeObject","ensureSafeFunction","ifDefined","plus","text",k)(this.$filter,Vb,Wb,Xb,Yb,Zb,a);return this.state=this.stage=c,l.literal=dc(e),l.constant=ec(e),l},USE:"use",STRICT:"strict",watchFns:function(){var a=[],b=this.state.inputs,c=this;return f(b,function(b){a.push("var "+b+"="+c.generateFunction(b,"s"))}),b.length&&a.push("fn.inputs=["+b.join(",")+"];"),a.join("")},generateFunction:function(a,b){return"function("+b+"){"+this.varsPrefix(a)+this.body(a)+"};"},filterPrefix:function(){var a=[],b=this;return f(this.state.filters,function(c,d){a.push(c+"=$filter("+b.escape(d)+")")}),a.length?"var "+a.join(",")+";":""},varsPrefix:function(a){return this.state[a].vars.length?"var "+this.state[a].vars.join(",")+";":""},body:function(a){return this.state[a].body.join("")},recurse:function(a,b,d,e,g,h){var i,j,k,l,m=this;if(e=e||p,!h&&u(a.watchId))return b=b||this.nextId(),void this.if_("i",this.lazyAssign(b,this.computedMember("i",a.watchId)),this.lazyRecurse(a,b,d,e,g,!0));switch(a.type){case Xe.Program:f(a.body,function(b,d){m.recurse(b.expression,c,c,function(a){j=a}),d!==a.body.length-1?m.current().body.push(j,";"):m.return_(j)});break;case Xe.Literal:l=this.escape(a.value),this.assign(b,l),e(l);break;case Xe.UnaryExpression:this.recurse(a.argument,c,c,function(a){j=a}),l=a.operator+"("+this.ifDefined(j,0)+")",this.assign(b,l),e(l);break;case Xe.BinaryExpression:this.recurse(a.left,c,c,function(a){i=a}),this.recurse(a.right,c,c,function(a){j=a}),l="+"===a.operator?this.plus(i,j):"-"===a.operator?this.ifDefined(i,0)+a.operator+this.ifDefined(j,0):"("+i+")"+a.operator+"("+j+")",this.assign(b,l),e(l);break;case Xe.LogicalExpression:b=b||this.nextId(),m.recurse(a.left,b),m.if_("&&"===a.operator?b:m.not(b),m.lazyRecurse(a.right,b)),e(b);break;case Xe.ConditionalExpression:b=b||this.nextId(),m.recurse(a.test,b),m.if_(b,m.lazyRecurse(a.alternate,b),m.lazyRecurse(a.consequent,b)),e(b);break;case Xe.Identifier:b=b||this.nextId(),d&&(d.context="inputs"===m.stage?"s":this.assign(this.nextId(),this.getHasOwnProperty("l",a.name)+"?l:s"),d.computed=!1,d.name=a.name),Vb(a.name),m.if_("inputs"===m.stage||m.not(m.getHasOwnProperty("l",a.name)),function(){m.if_("inputs"===m.stage||"s",function(){g&&1!==g&&m.if_(m.not(m.nonComputedMember("s",a.name)),m.lazyAssign(m.nonComputedMember("s",a.name),"{}")),m.assign(b,m.nonComputedMember("s",a.name))})},b&&m.lazyAssign(b,m.nonComputedMember("l",a.name))),(m.state.expensiveChecks||ic(a.name))&&m.addEnsureSafeObject(b),e(b);break;case Xe.MemberExpression:i=d&&(d.context=this.nextId())||this.nextId(),b=b||this.nextId(),m.recurse(a.object,i,c,function(){m.if_(m.notNull(i),function(){a.computed?(j=m.nextId(),m.recurse(a.property,j),m.addEnsureSafeMemberName(j),g&&1!==g&&m.if_(m.not(m.computedMember(i,j)),m.lazyAssign(m.computedMember(i,j),"{}")),l=m.ensureSafeObject(m.computedMember(i,j)),m.assign(b,l),d&&(d.computed=!0,d.name=j)):(Vb(a.property.name),g&&1!==g&&m.if_(m.not(m.nonComputedMember(i,a.property.name)),m.lazyAssign(m.nonComputedMember(i,a.property.name),"{}")),l=m.nonComputedMember(i,a.property.name),(m.state.expensiveChecks||ic(a.property.name))&&(l=m.ensureSafeObject(l)),m.assign(b,l),d&&(d.computed=!1,d.name=a.property.name))},function(){m.assign(b,"undefined")}),e(b)},!!g);break;case Xe.CallExpression:b=b||this.nextId(),a.filter?(j=m.filter(a.callee.name),k=[],f(a.arguments,function(a){var b=m.nextId();m.recurse(a,b),k.push(b)}),l=j+"("+k.join(",")+")",m.assign(b,l),e(b)):(j=m.nextId(),i={},k=[],m.recurse(a.callee,j,i,function(){m.if_(m.notNull(j),function(){m.addEnsureSafeFunction(j),f(a.arguments,function(a){m.recurse(a,m.nextId(),c,function(a){k.push(m.ensureSafeObject(a))})}),i.name?(m.state.expensiveChecks||m.addEnsureSafeObject(i.context),l=m.member(i.context,i.name,i.computed)+"("+k.join(",")+")"):l=j+"("+k.join(",")+")",l=m.ensureSafeObject(l),m.assign(b,l)},function(){m.assign(b,"undefined")}),e(b)}));break;case Xe.AssignmentExpression:if(j=this.nextId(),i={},!bc(a.left))throw Qe("lval","Trying to assing a value to a non l-value");this.recurse(a.left,c,i,function(){m.if_(m.notNull(i.context),function(){m.recurse(a.right,j),m.addEnsureSafeObject(m.member(i.context,i.name,i.computed)),l=m.member(i.context,i.name,i.computed)+a.operator+j,m.assign(b,l),e(b||l)})},1);break;case Xe.ArrayExpression:k=[],f(a.elements,function(a){m.recurse(a,m.nextId(),c,function(a){k.push(a)})}),l="["+k.join(",")+"]",this.assign(b,l),e(l);break;case Xe.ObjectExpression:k=[],f(a.properties,function(a){m.recurse(a.value,m.nextId(),c,function(b){k.push(m.escape(a.key.type===Xe.Identifier?a.key.name:""+a.key.value)+":"+b)})}),l="{"+k.join(",")+"}",this.assign(b,l),e(l);break;case Xe.ThisExpression:this.assign(b,"s"),e("s");break;case Xe.NGValueParameter:this.assign(b,"v"),e("v")}},getHasOwnProperty:function(a,b){var c=a+"."+b,d=this.current().own;return d.hasOwnProperty(c)||(d[c]=this.nextId(!1,a+"&&("+this.escape(b)+" in "+a+")")),d[c]},assign:function(a,b){return a?(this.current().body.push(a,"=",b,";"),a):void 0},filter:function(a){return this.state.filters.hasOwnProperty(a)||(this.state.filters[a]=this.nextId(!0)),this.state.filters[a]},ifDefined:function(a,b){return"ifDefined("+a+","+this.escape(b)+")"},plus:function(a,b){return"plus("+a+","+b+")"},return_:function(a){this.current().body.push("return ",a,";")},if_:function(a,b,c){if(a===!0)b();else{var d=this.current().body;d.push("if(",a,"){"),b(),d.push("}"),c&&(d.push("else{"),c(),d.push("}"))}},not:function(a){return"!("+a+")"},notNull:function(a){return a+"!=null"},nonComputedMember:function(a,b){return a+"."+b},computedMember:function(a,b){return a+"["+b+"]"},member:function(a,b,c){return c?this.computedMember(a,b):this.nonComputedMember(a,b)},addEnsureSafeObject:function(a){this.current().body.push(this.ensureSafeObject(a),";")},addEnsureSafeMemberName:function(a){this.current().body.push(this.ensureSafeMemberName(a),";")},addEnsureSafeFunction:function(a){this.current().body.push(this.ensureSafeFunction(a),";")},ensureSafeObject:function(a){return"ensureSafeObject("+a+",text)"},ensureSafeMemberName:function(a){return"ensureSafeMemberName("+a+",text)"},ensureSafeFunction:function(a){return"ensureSafeFunction("+a+",text)"},lazyRecurse:function(a,b,c,d,e,f){var g=this;return function(){g.recurse(a,b,c,d,e,f)}},lazyAssign:function(a,b){var c=this;return function(){c.assign(a,b)}},stringEscapeRegex:/[^ a-zA-Z0-9]/g,stringEscapeFn:function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)},escape:function(a){if(x(a))return"'"+a.replace(this.stringEscapeRegex,this.stringEscapeFn)+"'";if(y(a))return a.toString();if(a===!0)return"true";if(a===!1)return"false";if(null===a)return"null";if("undefined"==typeof a)return"undefined";throw Qe("esc","IMPOSSIBLE")},nextId:function(a,b){var c="v"+this.state.nextId++;return a||this.current().vars.push(c+(b?"="+b:"")),c},current:function(){return this.state[this.state.computing]}},gc.prototype={compile:function(a,b){var c=this,d=this.astBuilder.ast(a);this.expression=a,this.expensiveChecks=b,_b(d,c.$filter);var e,g;(e=cc(d))&&(g=this.recurse(e));var h,i=ac(d.body);i&&(h=[],f(i,function(a,b){var d=c.recurse(a);a.input=d,h.push(d),a.watchId=b}));var j=[];f(d.body,function(a){j.push(c.recurse(a.expression))});var k=0===d.body.length?function(){}:1===d.body.length?j[0]:function(a,b){var c;return f(j,function(d){c=d(a,b)}),c};return g&&(k.assign=function(a,b,c){return g(a,c,b)}),h&&(k.inputs=h),k.literal=dc(d),k.constant=ec(d),k},recurse:function(a,b,d){var e,g,h,i=this;if(a.input)return this.inputs(a.input,a.watchId);switch(a.type){case Xe.Literal:return this.value(a.value,b);case Xe.UnaryExpression:return g=this.recurse(a.argument),this["unary"+a.operator](g,b);case Xe.BinaryExpression:return e=this.recurse(a.left),g=this.recurse(a.right),this["binary"+a.operator](e,g,b);case Xe.LogicalExpression:return e=this.recurse(a.left),g=this.recurse(a.right),this["binary"+a.operator](e,g,b);case Xe.ConditionalExpression:return this["ternary?:"](this.recurse(a.test),this.recurse(a.alternate),this.recurse(a.consequent),b);case Xe.Identifier:return Vb(a.name,i.expression),i.identifier(a.name,i.expensiveChecks||ic(a.name),b,d,i.expression);case Xe.MemberExpression:return e=this.recurse(a.object,!1,!!d),a.computed||(Vb(a.property.name,i.expression),g=a.property.name),a.computed&&(g=this.recurse(a.property)),a.computed?this.computedMember(e,g,b,d,i.expression):this.nonComputedMember(e,g,i.expensiveChecks,b,d,i.expression);case Xe.CallExpression:return h=[],f(a.arguments,function(a){h.push(i.recurse(a))}),a.filter&&(g=this.$filter(a.callee.name)),a.filter||(g=this.recurse(a.callee,!0)),a.filter?function(a,d,e,f){for(var i=[],j=0;j<h.length;++j)i.push(h[j](a,d,e,f));var k=g.apply(c,i,f);return b?{context:c,name:c,value:k}:k}:function(a,c,d,e){var f,j=g(a,c,d,e);if(null!=j.value){Wb(j.context,i.expression),Xb(j.value,i.expression);for(var k=[],l=0;l<h.length;++l)k.push(Wb(h[l](a,c,d,e),i.expression));f=Wb(j.value.apply(j.context,k),i.expression)}return b?{value:f}:f};case Xe.AssignmentExpression:return e=this.recurse(a.left,!0,1),g=this.recurse(a.right),function(a,c,d,f){var h=e(a,c,d,f),j=g(a,c,d,f);return Wb(h.value,i.expression),h.context[h.name]=j,b?{value:j}:j};case Xe.ArrayExpression:return h=[],f(a.elements,function(a){h.push(i.recurse(a))}),function(a,c,d,e){for(var f=[],g=0;g<h.length;++g)f.push(h[g](a,c,d,e));return b?{value:f}:f};case Xe.ObjectExpression:return h=[],f(a.properties,function(a){h.push({key:a.key.type===Xe.Identifier?a.key.name:""+a.key.value,value:i.recurse(a.value)})}),function(a,c,d,e){for(var f={},g=0;g<h.length;++g)f[h[g].key]=h[g].value(a,c,d,e);return b?{value:f}:f};case Xe.ThisExpression:return function(a){return b?{value:a}:a};case Xe.NGValueParameter:return function(a,c,d,e){return b?{value:d}:d}}},"unary+":function(a,b){return function(c,d,e,f){var g=a(c,d,e,f);return g=u(g)?+g:0,b?{value:g}:g}},"unary-":function(a,b){return function(c,d,e,f){var g=a(c,d,e,f);return g=u(g)?-g:0,b?{value:g}:g}},"unary!":function(a,b){return function(c,d,e,f){var g=!a(c,d,e,f);return b?{value:g}:g}},"binary+":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g),i=b(d,e,f,g),j=Zb(h,i);return c?{value:j}:j}},"binary-":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g),i=b(d,e,f,g),j=(u(h)?h:0)-(u(i)?i:0);return c?{value:j}:j}},"binary*":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g)*b(d,e,f,g);return c?{value:h}:h}},"binary/":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g)/b(d,e,f,g);return c?{value:h}:h}},"binary%":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g)%b(d,e,f,g);return c?{value:h}:h}},"binary===":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g)===b(d,e,f,g);return c?{value:h}:h}},"binary!==":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g)!==b(d,e,f,g);return c?{value:h}:h}},"binary==":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g)==b(d,e,f,g);return c?{value:h}:h}},"binary!=":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g)!=b(d,e,f,g);return c?{value:h}:h}},"binary<":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g)<b(d,e,f,g);return c?{value:h}:h}},"binary>":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g)>b(d,e,f,g);return c?{value:h}:h}},"binary<=":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g)<=b(d,e,f,g);return c?{value:h}:h}},"binary>=":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g)>=b(d,e,f,g);return c?{value:h}:h}},"binary&&":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g)&&b(d,e,f,g);return c?{value:h}:h}},"binary||":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g)||b(d,e,f,g);return c?{value:h}:h}},"ternary?:":function(a,b,c,d){return function(e,f,g,h){var i=a(e,f,g,h)?b(e,f,g,h):c(e,f,g,h);return d?{value:i}:i}},value:function(a,b){return function(){return b?{context:c,name:c,value:a}:a}},identifier:function(a,b,d,e,f){return function(g,h,i,j){var k=h&&a in h?h:g;e&&1!==e&&k&&!k[a]&&(k[a]={});var l=k?k[a]:c;return b&&Wb(l,f),d?{context:k,name:a,value:l}:l}},computedMember:function(a,b,c,d,e){return function(f,g,h,i){var j,k,l=a(f,g,h,i);return null!=l&&(j=b(f,g,h,i),Vb(j,e),d&&1!==d&&l&&!l[j]&&(l[j]={}),k=l[j],Wb(k,e)),c?{context:l,name:j,value:k}:k}},nonComputedMember:function(a,b,d,e,f,g){return function(h,i,j,k){var l=a(h,i,j,k);f&&1!==f&&l&&!l[b]&&(l[b]={});var m=null!=l?l[b]:c;return(d||ic(b))&&Wb(m,g),e?{context:l,name:b,value:m}:m}},inputs:function(a,b){return function(c,d,e,f){return f?f[b]:a(c,d,e)}}};var Ye=function(a,b,c){this.lexer=a,this.$filter=b,this.options=c,this.ast=new Xe(this.lexer),this.astCompiler=c.csp?new gc(this.ast,b):new fc(this.ast,b)};Ye.prototype={constructor:Ye,parse:function(a){return this.astCompiler.compile(a,this.options.expensiveChecks)}};var Ze=(qa(),qa(),Object.prototype.valueOf),$e=d("$sce"),_e={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},Ce=d("$compile"),af=b.createElement("a"),bf=zc(a.location.href);Cc.$inject=["$document"],Ec.$inject=["$provide"],Jc.$inject=["$locale"],Kc.$inject=["$locale"];var cf=".",df={yyyy:Nc("FullYear",4),yy:Nc("FullYear",2,0,!0),y:Nc("FullYear",1),MMMM:Oc("Month"),MMM:Oc("Month",!0),MM:Nc("Month",2,1),M:Nc("Month",1,1),dd:Nc("Date",2),d:Nc("Date",1),HH:Nc("Hours",2),H:Nc("Hours",1),hh:Nc("Hours",2,-12),h:Nc("Hours",1,-12),mm:Nc("Minutes",2),m:Nc("Minutes",1),ss:Nc("Seconds",2),s:Nc("Seconds",1),sss:Nc("Milliseconds",3),EEEE:Oc("Day"),EEE:Oc("Day",!0),a:Tc,Z:Pc,ww:Sc(2),w:Sc(1),G:Uc,GG:Uc,GGG:Uc,GGGG:Vc},ef=/((?:[^yMdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z|G+|w+))(.*)/,ff=/^\-?\d+$/;Wc.$inject=["$locale"];var gf=r(td),hf=r(vd);Zc.$inject=["$parse"];var jf=r({restrict:"E",compile:function(a,b){return b.href||b.xlinkHref?void 0:function(a,b){if("a"===b[0].nodeName.toLowerCase()){var c="[object SVGAnimatedString]"===Fd.call(b.prop("href"))?"xlink:href":"href";b.on("click",function(a){b.attr(c)||a.preventDefault()})}}}}),kf={};f(ne,function(a,b){function c(a,c,e){a.$watch(e[d],function(a){e.$set(b,!!a)})}if("multiple"!=a){var d=jb("ng-"+b),e=c;"checked"===a&&(e=function(a,b,e){e.ngModel!==e[d]&&c(a,b,e);
}),kf[d]=function(){return{restrict:"A",priority:100,link:e}}}}),f(pe,function(a,b){kf[b]=function(){return{priority:100,link:function(a,c,d){if("ngPattern"===b&&"/"==d.ngPattern.charAt(0)){var e=d.ngPattern.match(rd);if(e)return void d.$set("ngPattern",new RegExp(e[1],e[2]))}a.$watch(d[b],function(a){d.$set(b,a)})}}}}),f(["src","srcset","href"],function(a){var b=jb("ng-"+a);kf[b]=function(){return{priority:99,link:function(c,d,e){var f=a,g=a;"href"===a&&"[object SVGAnimatedString]"===Fd.call(d.prop("href"))&&(g="xlinkHref",e.$attr[g]="xlink:href",f=null),e.$observe(b,function(b){return b?(e.$set(g,b),void(yd&&f&&d.prop(f,e[g]))):void("href"===a&&e.$set(g,null))})}}}});var lf={$addControl:p,$$renameControl:_c,$removeControl:p,$setValidity:p,$setDirty:p,$setPristine:p,$setSubmitted:p},mf="ng-submitted";ad.$inject=["$element","$attrs","$scope","$animate","$interpolate"];var nf=function(a){return["$timeout",function(b){var d={name:"form",restrict:a?"EAC":"E",controller:ad,compile:function(d,e){d.addClass(Vf).addClass(Tf);var f=e.name?"name":a&&e.ngForm?"ngForm":!1;return{pre:function(a,d,e,g){if(!("action"in e)){var h=function(b){a.$apply(function(){g.$commitViewValue(),g.$setSubmitted()}),b.preventDefault()};be(d[0],"submit",h),d.on("$destroy",function(){b(function(){ce(d[0],"submit",h)},0,!1)})}var i=g.$$parentForm;f&&(hc(a,g.$name,g,g.$name),e.$observe(f,function(b){g.$name!==b&&(hc(a,g.$name,c,g.$name),i.$$renameControl(g,b),hc(a,g.$name,g,g.$name))})),d.on("$destroy",function(){i.$removeControl(g),f&&hc(a,e[f],c,g.$name),l(g,lf)})}}}};return d}]},of=nf(),pf=nf(!0),qf=/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z)/,rf=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/,sf=/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,tf=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/,uf=/^(\d{4})-(\d{2})-(\d{2})$/,vf=/^(\d{4})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,wf=/^(\d{4})-W(\d\d)$/,xf=/^(\d{4})-(\d\d)$/,yf=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,zf={text:cd,date:gd("date",uf,fd(uf,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":gd("datetimelocal",vf,fd(vf,["yyyy","MM","dd","HH","mm","ss","sss"]),"yyyy-MM-ddTHH:mm:ss.sss"),time:gd("time",yf,fd(yf,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:gd("week",wf,ed,"yyyy-Www"),month:gd("month",xf,fd(xf,["yyyy","MM"]),"yyyy-MM"),number:id,url:jd,email:kd,radio:ld,checkbox:nd,hidden:p,button:p,submit:p,reset:p,file:p},Af=["$browser","$sniffer","$filter","$parse",function(a,b,c,d){return{restrict:"E",require:["?ngModel"],link:{pre:function(e,f,g,h){h[0]&&(zf[td(g.type)]||zf.text)(e,f,g,h[0],b,a,c,d)}}}}],Bf=/^(true|false|\d+)$/,Cf=function(){return{restrict:"A",priority:100,compile:function(a,b){return Bf.test(b.ngValue)?function(a,b,c){c.$set("value",a.$eval(c.ngValue))}:function(a,b,c){a.$watch(c.ngValue,function(a){c.$set("value",a)})}}}},Df=["$compile",function(a){return{restrict:"AC",compile:function(b){return a.$$addBindingClass(b),function(b,d,e){a.$$addBindingInfo(d,e.ngBind),d=d[0],b.$watch(e.ngBind,function(a){d.textContent=a===c?"":a})}}}}],Ef=["$interpolate","$compile",function(a,b){return{compile:function(d){return b.$$addBindingClass(d),function(d,e,f){var g=a(e.attr(f.$attr.ngBindTemplate));b.$$addBindingInfo(e,g.expressions),e=e[0],f.$observe("ngBindTemplate",function(a){e.textContent=a===c?"":a})}}}}],Ff=["$sce","$parse","$compile",function(a,b,c){return{restrict:"A",compile:function(d,e){var f=b(e.ngBindHtml),g=b(e.ngBindHtml,function(a){return(a||"").toString()});return c.$$addBindingClass(d),function(b,d,e){c.$$addBindingInfo(d,e.ngBindHtml),b.$watch(g,function(){d.html(a.getTrustedHtml(f(b))||"")})}}}}],Gf=r({restrict:"A",require:"ngModel",link:function(a,b,c,d){d.$viewChangeListeners.push(function(){a.$eval(c.ngChange)})}}),Hf=od("",!0),If=od("Odd",0),Jf=od("Even",1),Kf=$c({compile:function(a,b){b.$set("ngCloak",c),a.removeClass("ng-cloak")}}),Lf=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],Mf={},Nf={blur:!0,focus:!0};f("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(a){var b=jb("ng-"+a);Mf[b]=["$parse","$rootScope",function(c,d){return{restrict:"A",compile:function(e,f){var g=c(f[b],null,!0);return function(b,c){c.on(a,function(c){var e=function(){g(b,{$event:c})};Nf[a]&&d.$$phase?b.$evalAsync(e):b.$apply(e)})}}}}]});var Of=["$animate",function(a){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(c,d,e,f,g){var h,i,j;c.$watch(e.ngIf,function(c){c?i||g(function(c,f){i=f,c[c.length++]=b.createComment(" end ngIf: "+e.ngIf+" "),h={clone:c},a.enter(c,d.parent(),d)}):(j&&(j.remove(),j=null),i&&(i.$destroy(),i=null),h&&(j=pa(h.clone),a.leave(j).then(function(){j=null}),h=null))})}}}],Pf=["$templateRequest","$anchorScroll","$animate",function(a,b,c){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:Id.noop,compile:function(d,e){var f=e.ngInclude||e.src,g=e.onload||"",h=e.autoscroll;return function(d,e,i,j,k){var l,m,n,o=0,p=function(){m&&(m.remove(),m=null),l&&(l.$destroy(),l=null),n&&(c.leave(n).then(function(){m=null}),m=n,n=null)};d.$watch(f,function(f){var i=function(){!u(h)||h&&!d.$eval(h)||b()},m=++o;f?(a(f,!0).then(function(a){if(m===o){var b=d.$new();j.template=a;var h=k(b,function(a){p(),c.enter(a,null,e).then(i)});l=b,n=h,l.$emit("$includeContentLoaded",f),d.$eval(g)}},function(){m===o&&(p(),d.$emit("$includeContentError",f))}),d.$emit("$includeContentRequested",f)):(p(),j.template=null)})}}}}],Qf=["$compile",function(a){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(c,d,e,f){return/SVG/.test(d[0].toString())?(d.empty(),void a(Aa(f.template,b).childNodes)(c,function(a){d.append(a)},{futureParentElement:d})):(d.html(f.template),void a(d.contents())(c))}}}],Rf=$c({priority:450,compile:function(){return{pre:function(a,b,c){a.$eval(c.ngInit)}}}}),Sf=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(a,b,d,e){var g=b.attr(d.$attr.ngList)||", ",h="false"!==d.ngTrim,i=h?Nd(g):g,j=function(a){if(!t(a)){var b=[];return a&&f(a.split(i),function(a){a&&b.push(h?Nd(a):a)}),b}};e.$parsers.push(j),e.$formatters.push(function(a){return Ld(a)?a.join(g):c}),e.$isEmpty=function(a){return!a||!a.length}}}},Tf="ng-valid",Uf="ng-invalid",Vf="ng-pristine",Wf="ng-dirty",Xf="ng-untouched",Yf="ng-touched",Zf="ng-pending",$f=new d("ngModel"),_f=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$rootScope","$q","$interpolate",function(a,b,d,e,g,h,i,j,k,l){this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$$rawModelValue=c,this.$validators={},this.$asyncValidators={},this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$untouched=!0,this.$touched=!1,this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$error={},this.$$success={},this.$pending=c,this.$name=l(d.name||"",!1)(a);var m,n=g(d.ngModel),o=n.assign,q=n,r=o,s=null,v=this;this.$$setOptions=function(a){if(v.$options=a,a&&a.getterSetter){var b=g(d.ngModel+"()"),c=g(d.ngModel+"($$$p)");q=function(a){var c=n(a);return A(c)&&(c=b(a)),c},r=function(a,b){A(n(a))?c(a,{$$$p:v.$modelValue}):o(a,v.$modelValue)}}else if(!n.assign)throw $f("nonassign","Expression '{0}' is non-assignable. Element: {1}",d.ngModel,$(e))},this.$render=p,this.$isEmpty=function(a){return t(a)||""===a||null===a||a!==a};var w=e.inheritedData("$formController")||lf,x=0;pd({ctrl:this,$element:e,set:function(a,b){a[b]=!0},unset:function(a,b){delete a[b]},parentForm:w,$animate:h}),this.$setPristine=function(){v.$dirty=!1,v.$pristine=!0,h.removeClass(e,Wf),h.addClass(e,Vf)},this.$setDirty=function(){v.$dirty=!0,v.$pristine=!1,h.removeClass(e,Vf),h.addClass(e,Wf),w.$setDirty()},this.$setUntouched=function(){v.$touched=!1,v.$untouched=!0,h.setClass(e,Xf,Yf)},this.$setTouched=function(){v.$touched=!0,v.$untouched=!1,h.setClass(e,Yf,Xf)},this.$rollbackViewValue=function(){i.cancel(s),v.$viewValue=v.$$lastCommittedViewValue,v.$render()},this.$validate=function(){if(!y(v.$modelValue)||!isNaN(v.$modelValue)){var a=v.$$lastCommittedViewValue,b=v.$$rawModelValue,d=v.$valid,e=v.$modelValue,f=v.$options&&v.$options.allowInvalid;v.$$runValidators(b,a,function(a){f||d===a||(v.$modelValue=a?b:c,v.$modelValue!==e&&v.$$writeModelToScope())})}},this.$$runValidators=function(a,b,d){function e(){var a=v.$$parserName||"parse";return m!==c?(m||(f(v.$validators,function(a,b){i(b,null)}),f(v.$asyncValidators,function(a,b){i(b,null)})),i(a,m),m):(i(a,null),!0)}function g(){var c=!0;return f(v.$validators,function(d,e){var f=d(a,b);c=c&&f,i(e,f)}),c?!0:(f(v.$asyncValidators,function(a,b){i(b,null)}),!1)}function h(){var d=[],e=!0;f(v.$asyncValidators,function(f,g){var h=f(a,b);if(!I(h))throw $f("$asyncValidators","Expected asynchronous validator to return a promise but got '{0}' instead.",h);i(g,c),d.push(h.then(function(){i(g,!0)},function(a){e=!1,i(g,!1)}))}),d.length?k.all(d).then(function(){j(e)},p):j(!0)}function i(a,b){l===x&&v.$setValidity(a,b)}function j(a){l===x&&d(a)}x++;var l=x;return e()&&g()?void h():void j(!1)},this.$commitViewValue=function(){var a=v.$viewValue;i.cancel(s),(v.$$lastCommittedViewValue!==a||""===a&&v.$$hasNativeValidators)&&(v.$$lastCommittedViewValue=a,v.$pristine&&this.$setDirty(),this.$$parseAndValidate())},this.$$parseAndValidate=function(){function b(){v.$modelValue!==g&&v.$$writeModelToScope()}var d=v.$$lastCommittedViewValue,e=d;if(m=t(e)?c:!0)for(var f=0;f<v.$parsers.length;f++)if(e=v.$parsers[f](e),t(e)){m=!1;break}y(v.$modelValue)&&isNaN(v.$modelValue)&&(v.$modelValue=q(a));var g=v.$modelValue,h=v.$options&&v.$options.allowInvalid;v.$$rawModelValue=e,h&&(v.$modelValue=e,b()),v.$$runValidators(e,v.$$lastCommittedViewValue,function(a){h||(v.$modelValue=a?e:c,b())})},this.$$writeModelToScope=function(){r(a,v.$modelValue),f(v.$viewChangeListeners,function(a){try{a()}catch(c){b(c)}})},this.$setViewValue=function(a,b){v.$viewValue=a,(!v.$options||v.$options.updateOnDefault)&&v.$$debounceViewValueCommit(b)},this.$$debounceViewValueCommit=function(b){var c,d=0,e=v.$options;e&&u(e.debounce)&&(c=e.debounce,y(c)?d=c:y(c[b])?d=c[b]:y(c["default"])&&(d=c["default"])),i.cancel(s),d?s=i(function(){v.$commitViewValue()},d):j.$$phase?v.$commitViewValue():a.$apply(function(){v.$commitViewValue()})},a.$watch(function(){var b=q(a);if(b!==v.$modelValue&&(v.$modelValue===v.$modelValue||b===b)){v.$modelValue=v.$$rawModelValue=b,m=c;for(var d=v.$formatters,e=d.length,f=b;e--;)f=d[e](f);v.$viewValue!==f&&(v.$viewValue=v.$$lastCommittedViewValue=f,v.$render(),v.$$runValidators(b,f,p))}return b})}],ag=["$rootScope",function(a){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:_f,priority:1,compile:function(b){return b.addClass(Vf).addClass(Xf).addClass(Tf),{pre:function(a,b,c,d){var e=d[0],f=d[1]||lf;e.$$setOptions(d[2]&&d[2].$options),f.$addControl(e),c.$observe("name",function(a){e.$name!==a&&f.$$renameControl(e,a)}),a.$on("$destroy",function(){f.$removeControl(e)})},post:function(b,c,d,e){var f=e[0];f.$options&&f.$options.updateOn&&c.on(f.$options.updateOn,function(a){f.$$debounceViewValueCommit(a&&a.type)}),c.on("blur",function(c){f.$touched||(a.$$phase?b.$evalAsync(f.$setTouched):b.$apply(f.$setTouched))})}}}}}],bg=/(\s+|^)default(\s+|$)/,cg=function(){return{restrict:"A",controller:["$scope","$attrs",function(a,b){var d=this;this.$options=O(a.$eval(b.ngModelOptions)),this.$options.updateOn!==c?(this.$options.updateOnDefault=!1,this.$options.updateOn=Nd(this.$options.updateOn.replace(bg,function(){return d.$options.updateOnDefault=!0," "}))):this.$options.updateOnDefault=!0}]}},dg=$c({terminal:!0,priority:1e3}),eg=d("ngOptions"),fg=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+disable\s+when\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,gg=["$compile","$parse",function(a,c){function d(a,b,d){function f(a,b,c,d,e){this.selectValue=a,this.viewValue=b,this.label=c,this.group=d,this.disabled=e}function g(a){var b;if(!j&&e(a))b=a;else{b=[];for(var c in a)a.hasOwnProperty(c)&&"$"!==c.charAt(0)&&b.push(c)}return b}var h=a.match(fg);if(!h)throw eg("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",a,$(b));var i=h[5]||h[7],j=h[6],k=/ as /.test(h[0])&&h[1],l=h[9],m=c(h[2]?h[1]:i),n=k&&c(k),o=n||m,p=l&&c(l),q=l?function(a,b){return p(d,b)}:function(a){return Wa(a)},r=function(a,b){return q(a,x(a,b))},s=c(h[2]||h[1]),t=c(h[3]||""),u=c(h[4]||""),v=c(h[8]),w={},x=j?function(a,b){return w[j]=b,w[i]=a,w}:function(a){return w[i]=a,w};return{trackBy:l,getTrackByValue:r,getWatchables:c(v,function(a){var b=[];a=a||[];for(var c=g(a),e=c.length,f=0;e>f;f++){var i=a===c?f:c[f],j=(a[i],x(a[i],i)),k=q(a[i],j);if(b.push(k),h[2]||h[1]){var l=s(d,j);b.push(l)}if(h[4]){var m=u(d,j);b.push(m)}}return b}),getOptions:function(){for(var a=[],b={},c=v(d)||[],e=g(c),h=e.length,i=0;h>i;i++){var j=c===e?i:e[i],k=c[j],m=x(k,j),n=o(d,m),p=q(n,m),w=s(d,m),y=t(d,m),z=u(d,m),A=new f(p,n,w,y,z);a.push(A),b[p]=A}return{items:a,selectValueMap:b,getOptionFromViewValue:function(a){return b[r(a)]},getViewValueFromOption:function(a){return l?Id.copy(a.viewValue):a.viewValue}}}}}var g=b.createElement("option"),h=b.createElement("optgroup");return{restrict:"A",terminal:!0,require:["select","?ngModel"],link:function(b,c,e,i){function j(a,b){a.element=b,b.disabled=a.disabled,a.value!==b.value&&(b.value=a.selectValue),a.label!==b.label&&(b.label=a.label,b.textContent=a.label)}function k(a,b,c,d){var e;return b&&td(b.nodeName)===c?e=b:(e=d.cloneNode(!1),b?a.insertBefore(e,b):a.appendChild(e)),e}function l(a){for(var b;a;)b=a.nextSibling,Qa(a),a=b}function m(a){var b=p&&p[0],c=w&&w[0];if(b||c)for(;a&&(a===b||a===c);)a=a.nextSibling;return a}function n(){var a=x&&q.readValue();x=y.getOptions();var b={},d=c[0].firstChild;if(v&&c.prepend(p),d=m(d),x.items.forEach(function(a){var e,f,i;a.group?(e=b[a.group],e||(f=k(c[0],d,"optgroup",h),d=f.nextSibling,f.label=a.group,e=b[a.group]={groupElement:f,currentOptionElement:f.firstChild}),i=k(e.groupElement,e.currentOptionElement,"option",g),j(a,i),e.currentOptionElement=i.nextSibling):(i=k(c[0],d,"option",g),j(a,i),d=i.nextSibling)}),Object.keys(b).forEach(function(a){l(b[a].currentOptionElement)}),l(d),o.$render(),!o.$isEmpty(a)){var e=q.readValue();(y.trackBy?Q(a,e):a===e)||(o.$setViewValue(e),o.$render())}}var o=i[1];if(o){for(var p,q=i[0],r=e.multiple,s=0,t=c.children(),u=t.length;u>s;s++)if(""===t[s].value){p=t.eq(s);break}var v=!!p,w=zd(g.cloneNode(!1));w.val("?");var x,y=d(e.ngOptions,c,b),z=function(){v||c.prepend(p),c.val(""),p.prop("selected",!0),p.attr("selected",!0)},A=function(){v||p.remove()},B=function(){c.prepend(w),c.val("?"),w.prop("selected",!0),w.attr("selected",!0)},C=function(){w.remove()};r?(o.$isEmpty=function(a){return!a||0===a.length},q.writeValue=function(a){x.items.forEach(function(a){a.element.selected=!1}),a&&a.forEach(function(a){var b=x.getOptionFromViewValue(a);b&&!b.disabled&&(b.element.selected=!0)})},q.readValue=function(){var a=c.val()||[],b=[];return f(a,function(a){var c=x.selectValueMap[a];c.disabled||b.push(x.getViewValueFromOption(c))}),b},y.trackBy&&b.$watchCollection(function(){return Ld(o.$viewValue)?o.$viewValue.map(function(a){return y.getTrackByValue(a)}):void 0},function(){o.$render()})):(q.writeValue=function(a){var b=x.getOptionFromViewValue(a);b&&!b.disabled?c[0].value!==b.selectValue&&(C(),A(),c[0].value=b.selectValue,b.element.selected=!0,b.element.setAttribute("selected","selected")):null===a||v?(C(),z()):(A(),B())},q.readValue=function(){var a=x.selectValueMap[c.val()];return a&&!a.disabled?(A(),C(),x.getViewValueFromOption(a)):null},y.trackBy&&b.$watch(function(){return y.getTrackByValue(o.$viewValue)},function(){o.$render()})),v?(p.remove(),a(p)(b),p.removeClass("ng-scope")):p=zd(g.cloneNode(!1)),n(),b.$watchCollection(y.getWatchables,n)}}}}],hg=["$locale","$interpolate","$log",function(a,b,c){var d=/{}/g,e=/^when(Minus)?(.+)$/;return{link:function(g,h,i){function j(a){h.text(a||"")}var k,l=i.count,m=i.$attr.when&&h.attr(i.$attr.when),n=i.offset||0,o=g.$eval(m)||{},q={},r=b.startSymbol(),s=b.endSymbol(),u=r+l+"-"+n+s,v=Id.noop;f(i,function(a,b){var c=e.exec(b);if(c){var d=(c[1]?"-":"")+td(c[2]);o[d]=h.attr(i.$attr[b])}}),f(o,function(a,c){q[c]=b(a.replace(d,u))}),g.$watch(l,function(b){var d=parseFloat(b),e=isNaN(d);if(e||d in o||(d=a.pluralCat(d-n)),d!==k&&!(e&&y(k)&&isNaN(k))){v();var f=q[d];t(f)?(null!=b&&c.debug("ngPluralize: no rule defined for '"+d+"' in "+m),v=p,j()):v=g.$watch(f,j),k=d}})}}}],ig=["$parse","$animate",function(a,g){var h="$$NG_REMOVED",i=d("ngRepeat"),j=function(a,b,c,d,e,f,g){a[c]=d,e&&(a[e]=f),a.$index=b,a.$first=0===b,a.$last=b===g-1,a.$middle=!(a.$first||a.$last),a.$odd=!(a.$even=0===(1&b))},k=function(a){return a.clone[0]},l=function(a){return a.clone[a.clone.length-1]};return{restrict:"A",multiElement:!0,transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,compile:function(d,m){var n=m.ngRepeat,o=b.createComment(" end ngRepeat: "+n+" "),p=n.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!p)throw i("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",n);var q=p[1],r=p[2],s=p[3],t=p[4];if(p=q.match(/^(?:(\s*[\$\w]+)|\(\s*([\$\w]+)\s*,\s*([\$\w]+)\s*\))$/),!p)throw i("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",q);var u=p[3]||p[1],v=p[2];if(s&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(s)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(s)))throw i("badident","alias '{0}' is invalid --- must be a valid JS identifier which is not a reserved name.",s);var w,x,y,z,A={$id:Wa};return t?w=a(t):(y=function(a,b){return Wa(b)},z=function(a){return a}),function(a,b,d,m,p){w&&(x=function(b,c,d){return v&&(A[v]=b),A[u]=c,A.$index=d,w(a,A)});var q=qa();a.$watchCollection(r,function(d){var m,r,t,w,A,B,C,D,E,F,G,H,I=b[0],J=qa();if(s&&(a[s]=d),e(d))E=d,D=x||y;else{D=x||z,E=[];for(var K in d)d.hasOwnProperty(K)&&"$"!==K.charAt(0)&&E.push(K)}for(w=E.length,G=new Array(w),m=0;w>m;m++)if(A=d===E?m:E[m],B=d[A],C=D(A,B,m),q[C])F=q[C],delete q[C],J[C]=F,G[m]=F;else{if(J[C])throw f(G,function(a){a&&a.scope&&(q[a.id]=a)}),i("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",n,C,B);G[m]={id:C,scope:c,clone:c},J[C]=!0}for(var L in q){if(F=q[L],H=pa(F.clone),g.leave(H),H[0].parentNode)for(m=0,r=H.length;r>m;m++)H[m][h]=!0;F.scope.$destroy()}for(m=0;w>m;m++)if(A=d===E?m:E[m],B=d[A],F=G[m],F.scope){t=I;do t=t.nextSibling;while(t&&t[h]);k(F)!=t&&g.move(pa(F.clone),null,zd(I)),I=l(F),j(F.scope,m,u,B,v,A,w)}else p(function(a,b){F.scope=b;var c=o.cloneNode(!1);a[a.length++]=c,g.enter(a,null,zd(I)),I=c,F.clone=a,J[F.id]=F,j(F.scope,m,u,B,v,A,w)});q=J})}}}}],jg="ng-hide",kg="ng-hide-animate",lg=["$animate",function(a){return{restrict:"A",multiElement:!0,link:function(b,c,d){b.$watch(d.ngShow,function(b){a[b?"removeClass":"addClass"](c,jg,{tempClasses:kg})})}}}],mg=["$animate",function(a){return{restrict:"A",multiElement:!0,link:function(b,c,d){b.$watch(d.ngHide,function(b){a[b?"addClass":"removeClass"](c,jg,{tempClasses:kg})})}}}],ng=$c(function(a,b,c){a.$watch(c.ngStyle,function(a,c){c&&a!==c&&f(c,function(a,c){b.css(c,"")}),a&&b.css(a)},!0)}),og=["$animate",function(a){return{require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(c,d,e,g){var h=e.ngSwitch||e.on,i=[],j=[],k=[],l=[],m=function(a,b){return function(){a.splice(b,1)}};c.$watch(h,function(c){var d,e;for(d=0,e=k.length;e>d;++d)a.cancel(k[d]);for(k.length=0,d=0,e=l.length;e>d;++d){var h=pa(j[d].clone);l[d].$destroy();var n=k[d]=a.leave(h);n.then(m(k,d))}j.length=0,l.length=0,(i=g.cases["!"+c]||g.cases["?"])&&f(i,function(c){c.transclude(function(d,e){l.push(e);var f=c.element;d[d.length++]=b.createComment(" end ngSwitchWhen: ");var g={clone:d};j.push(g),a.enter(d,f.parent(),f)})})})}}}],pg=$c({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(a,b,c,d,e){d.cases["!"+c.ngSwitchWhen]=d.cases["!"+c.ngSwitchWhen]||[],d.cases["!"+c.ngSwitchWhen].push({transclude:e,element:b})}}),qg=$c({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(a,b,c,d,e){d.cases["?"]=d.cases["?"]||[],d.cases["?"].push({transclude:e,element:b})}}),rg=$c({restrict:"EAC",link:function(a,b,c,e,f){if(!f)throw d("ngTransclude")("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",$(b));f(function(a){b.empty(),b.append(a)})}}),sg=["$templateCache",function(a){return{restrict:"E",terminal:!0,compile:function(b,c){if("text/ng-template"==c.type){var d=c.id,e=b[0].text;a.put(d,e)}}}}],tg={$setViewValue:p,$render:p},ug=["$element","$scope","$attrs",function(a,d,e){var f=this,g=new Xa;f.ngModelCtrl=tg,f.unknownOption=zd(b.createElement("option")),f.renderUnknownOption=function(b){var c="? "+Wa(b)+" ?";f.unknownOption.val(c),a.prepend(f.unknownOption),a.val(c)},d.$on("$destroy",function(){f.renderUnknownOption=p}),f.removeUnknownOption=function(){f.unknownOption.parent()&&f.unknownOption.remove()},f.readValue=function(){return f.removeUnknownOption(),a.val()},f.writeValue=function(b){f.hasOption(b)?(f.removeUnknownOption(),a.val(b),""===b&&f.emptyOption.prop("selected",!0)):null==b&&f.emptyOption?(f.removeUnknownOption(),a.val("")):f.renderUnknownOption(b)},f.addOption=function(a,b){na(a,'"option value"'),""===a&&(f.emptyOption=b);var c=g.get(a)||0;g.put(a,c+1)},f.removeOption=function(a){var b=g.get(a);b&&(1===b?(g.remove(a),""===a&&(f.emptyOption=c)):g.put(a,b-1))},f.hasOption=function(a){return!!g.get(a)}}],vg=function(){return{restrict:"E",require:["select","?ngModel"],controller:ug,link:function(a,b,c,d){var e=d[1];if(e){var g=d[0];if(g.ngModelCtrl=e,e.$render=function(){g.writeValue(e.$viewValue)},b.on("change",function(){a.$apply(function(){e.$setViewValue(g.readValue())})}),c.multiple){g.readValue=function(){var a=[];return f(b.find("option"),function(b){b.selected&&a.push(b.value)}),a},g.writeValue=function(a){var c=new Xa(a);f(b.find("option"),function(a){a.selected=u(c.get(a.value))})};var h,i=NaN;a.$watch(function(){i!==e.$viewValue||Q(h,e.$viewValue)||(h=P(e.$viewValue),e.$render()),i=e.$viewValue}),e.$isEmpty=function(a){return!a||0===a.length}}}}}},wg=["$interpolate",function(a){function b(a){a[0].hasAttribute("selected")&&(a[0].selected=!0)}return{restrict:"E",priority:100,compile:function(c,d){if(t(d.value)){var e=a(c.text(),!0);e||d.$set("value",c.text())}return function(a,c,d){var f="$selectController",g=c.parent(),h=g.data(f)||g.parent().data(f);h&&h.ngModelCtrl&&(e?a.$watch(e,function(a,e){d.$set("value",a),e!==a&&h.removeOption(e),h.addOption(a,c),h.ngModelCtrl.$render(),b(c)}):(h.addOption(d.value,c),h.ngModelCtrl.$render(),b(c)),c.on("$destroy",function(){h.removeOption(d.value),h.ngModelCtrl.$render()}))}}}}],xg=r({restrict:"E",terminal:!1}),yg=function(){return{restrict:"A",require:"?ngModel",link:function(a,b,c,d){d&&(c.required=!0,d.$validators.required=function(a,b){return!c.required||!d.$isEmpty(b)},c.$observe("required",function(){d.$validate()}))}}},zg=function(){return{restrict:"A",require:"?ngModel",link:function(a,b,e,f){if(f){var g,h=e.ngPattern||e.pattern;e.$observe("pattern",function(a){if(x(a)&&a.length>0&&(a=new RegExp("^"+a+"$")),a&&!a.test)throw d("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",h,a,$(b));g=a||c,f.$validate()}),f.$validators.pattern=function(a){return f.$isEmpty(a)||t(g)||g.test(a)}}}}},Ag=function(){return{restrict:"A",require:"?ngModel",link:function(a,b,c,d){if(d){var e=-1;c.$observe("maxlength",function(a){var b=n(a);e=isNaN(b)?-1:b,d.$validate()}),d.$validators.maxlength=function(a,b){return 0>e||d.$isEmpty(b)||b.length<=e}}}}},Bg=function(){return{restrict:"A",require:"?ngModel",link:function(a,b,c,d){if(d){var e=0;c.$observe("minlength",function(a){e=n(a)||0,d.$validate()}),d.$validators.minlength=function(a,b){return d.$isEmpty(b)||b.length>=e}}}}};return a.angular.bootstrap?void console.log("WARNING: Tried to load angular more than once."):(ka(),ua(Id),void zd(b).ready(function(){fa(b,ga)}))}(window,document),!window.angular.$$csp()&&window.angular.element(document.head).prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}</style>'),function(a,b,c){"use strict";function d(a,c,d){return{restrict:"ECA",terminal:!0,priority:400,transclude:"element",link:function(e,f,g,h,i){function j(){n&&(d.cancel(n),n=null),l&&(l.$destroy(),l=null),m&&(n=d.leave(m),n.then(function(){n=null}),m=null)}function k(){var g=a.current&&a.current.locals;if(b.isDefined(g&&g.$template)){var g=e.$new(),h=a.current;m=i(g,function(a){d.enter(a,null,m||f).then(function(){!b.isDefined(o)||o&&!e.$eval(o)||c()}),j()}),l=h.scope=g,l.$emit("$viewContentLoaded"),l.$eval(p)}else j()}var l,m,n,o=g.autoscroll,p=g.onload||"";e.$on("$routeChangeSuccess",k),k()}}}function e(a,b,c){return{restrict:"ECA",priority:-400,link:function(d,e){var f=c.current,g=f.locals;e.html(g.$template);var h=a(e.contents());f.controller&&(g.$scope=d,g=b(f.controller,g),f.controllerAs&&(d[f.controllerAs]=g),e.data("$ngControllerController",g),e.children().data("$ngControllerController",g)),h(d)}}}a=b.module("ngRoute",["ng"]).provider("$route",function(){function a(a,c){return b.extend(Object.create(a),c)}function c(a,b){var c=b.caseInsensitiveMatch,d={originalPath:a,regexp:a},e=d.keys=[];return a=a.replace(/([().])/g,"\\$1").replace(/(\/)?:(\w+)([\?\*])?/g,function(a,b,c,d){return a="?"===d?d:null,d="*"===d?d:null,e.push({name:c,optional:!!a}),b=b||"",""+(a?"":b)+"(?:"+(a?b:"")+(d&&"(.+?)"||"([^/]+)")+(a||"")+")"+(a||"")}).replace(/([\/$\*])/g,"\\$1"),d.regexp=new RegExp("^"+a+"$",c?"i":""),d}var d={};this.when=function(a,e){var f=b.copy(e);if(b.isUndefined(f.reloadOnSearch)&&(f.reloadOnSearch=!0),b.isUndefined(f.caseInsensitiveMatch)&&(f.caseInsensitiveMatch=this.caseInsensitiveMatch),d[a]=b.extend(f,a&&c(a,f)),a){var g="/"==a[a.length-1]?a.substr(0,a.length-1):a+"/";d[g]=b.extend({redirectTo:a},c(g,f))}return this},this.caseInsensitiveMatch=!1,this.otherwise=function(a){return"string"==typeof a&&(a={redirectTo:a}),this.when(null,a),this},this.$get=["$rootScope","$location","$routeParams","$q","$injector","$templateRequest","$sce",function(c,e,g,h,i,j,k){function l(a){var d=s.current;(q=(p=n())&&d&&p.$$route===d.$$route&&b.equals(p.pathParams,d.pathParams)&&!p.reloadOnSearch&&!r)||!d&&!p||c.$broadcast("$routeChangeStart",p,d).defaultPrevented&&a&&a.preventDefault()}function m(){var a=s.current,d=p;q?(a.params=d.params,b.copy(a.params,g),c.$broadcast("$routeUpdate",a)):(d||a)&&(r=!1,(s.current=d)&&d.redirectTo&&(b.isString(d.redirectTo)?e.path(o(d.redirectTo,d.params)).search(d.params).replace():e.url(d.redirectTo(d.pathParams,e.path(),e.search())).replace()),h.when(d).then(function(){if(d){var a,c,e=b.extend({},d.resolve);return b.forEach(e,function(a,c){e[c]=b.isString(a)?i.get(a):i.invoke(a,null,null,c)}),b.isDefined(a=d.template)?b.isFunction(a)&&(a=a(d.params)):b.isDefined(c=d.templateUrl)&&(b.isFunction(c)&&(c=c(d.params)),b.isDefined(c)&&(d.loadedTemplateUrl=k.valueOf(c),a=j(c))),b.isDefined(a)&&(e.$template=a),h.all(e)}}).then(function(e){d==s.current&&(d&&(d.locals=e,b.copy(d.params,g)),c.$broadcast("$routeChangeSuccess",d,a))},function(b){d==s.current&&c.$broadcast("$routeChangeError",d,a,b)}))}function n(){var c,f;return b.forEach(d,function(d,g){var h;if(h=!f){var i=e.path();h=d.keys;var j={};if(d.regexp)if(i=d.regexp.exec(i)){for(var k=1,l=i.length;l>k;++k){var m=h[k-1],n=i[k];m&&n&&(j[m.name]=n)}h=j}else h=null;else h=null;h=c=h}h&&(f=a(d,{params:b.extend({},e.search(),c),pathParams:c}),f.$$route=d)}),f||d[null]&&a(d[null],{params:{},pathParams:{}})}function o(a,c){var d=[];return b.forEach((a||"").split(":"),function(a,b){if(0===b)d.push(a);else{var e=a.match(/(\w+)(?:[?*])?(.*)/),f=e[1];d.push(c[f]),d.push(e[2]||""),delete c[f]}}),d.join("")}var p,q,r=!1,s={routes:d,reload:function(){r=!0,c.$evalAsync(function(){l(),m()})},updateParams:function(a){if(!this.current||!this.current.$$route)throw f("norout");a=b.extend({},this.current.params,a),e.path(o(this.current.$$route.originalPath,a)),e.search(a)}};return c.$on("$locationChangeStart",l),c.$on("$locationChangeSuccess",m),s}]});var f=b.$$minErr("ngRoute");a.provider("$routeParams",function(){this.$get=function(){return{}}}),a.directive("ngView",d),a.directive("ngView",e),d.$inject=["$route","$anchorScroll","$animate"],e.$inject=["$compile","$controller","$route"]}(window,window.angular),function(a,b,c){"use strict";function d(a){var c=[];return i(c,b.noop).chars(a),c.join("")}function e(a,c){var d,e={},f=a.split(",");for(d=0;d<f.length;d++)e[c?b.lowercase(f[d]):f[d]]=!0;return e}function f(a,c){function d(a,d,f,h){if(d=b.lowercase(d),w[d])for(;s.last()&&x[s.last()];)e("",s.last());v[d]&&s.last()==d&&e("",d),(h=u[d]||!!h)||s.push(d);var i={};f.replace(m,function(a,b,c,d,e){i[b]=g(c||d||e||"")}),c.start&&c.start(d,i,h)}function e(a,d){var e,f=0;if(d=b.lowercase(d))for(f=s.length-1;f>=0&&s[f]!=d;f--);if(f>=0){for(e=s.length-1;e>=f;e--)c.end&&c.end(s[e]);s.length=f}}"string"!=typeof a&&(a=null===a||"undefined"==typeof a?"":""+a);var f,h,i,s=[],t=a;for(s.last=function(){return s[s.length-1]};a;){if(i="",h=!0,s.last()&&y[s.last()]?(a=a.replace(new RegExp("([\\W\\w]*)<\\s*\\/\\s*"+s.last()+"[^>]*>","i"),function(a,b){return b=b.replace(p,"$1").replace(r,"$1"),c.chars&&c.chars(g(b)),""}),e("",s.last())):(0===a.indexOf("<!--")?(f=a.indexOf("--",4),f>=0&&a.lastIndexOf("-->",f)===f&&(c.comment&&c.comment(a.substring(4,f)),a=a.substring(f+3),h=!1)):q.test(a)?(f=a.match(q))&&(a=a.replace(f[0],""),h=!1):o.test(a)?(f=a.match(l))&&(a=a.substring(f[0].length),f[0].replace(l,e),h=!1):n.test(a)&&((f=a.match(k))?(f[4]&&(a=a.substring(f[0].length),f[0].replace(k,d)),h=!1):(i+="<",a=a.substring(1))),h&&(f=a.indexOf("<"),i+=0>f?a:a.substring(0,f),a=0>f?"":a.substring(f),c.chars&&c.chars(g(i)))),a==t)throw j("badparse",a);t=a}e()}function g(a){return a?(C.innerHTML=a.replace(/</g,"&lt;"),C.textContent):""}function h(a){return a.replace(/&/g,"&amp;").replace(s,function(a){var b=a.charCodeAt(0);return a=a.charCodeAt(1),"&#"+(1024*(b-55296)+(a-56320)+65536)+";"}).replace(t,function(a){return"&#"+a.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function i(a,c){var d=!1,e=b.bind(a,a.push);return{start:function(a,f,g){a=b.lowercase(a),!d&&y[a]&&(d=a),d||!0!==z[a]||(e("<"),e(a),b.forEach(f,function(d,f){var g=b.lowercase(f),i="img"===a&&"src"===g||"background"===g;!0!==B[g]||!0===A[g]&&!c(d,i)||(e(" "),e(f),e('="'),e(h(d)),e('"'))}),e(g?"/>":">"))},end:function(a){a=b.lowercase(a),d||!0!==z[a]||(e("</"),e(a),e(">")),a==d&&(d=!1)},chars:function(a){d||e(h(a))}}}var j=b.$$minErr("$sanitize"),k=/^<((?:[a-zA-Z])[\w:-]*)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*(>?)/,l=/^<\/\s*([\w:-]+)[^>]*>/,m=/([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,n=/^</,o=/^<\//,p=/\x3c!--(.*?)--\x3e/g,q=/<!DOCTYPE([^>]*?)>/i,r=/<!\[CDATA\[(.*?)]]\x3e/g,s=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,t=/([^\#-~| |!])/g,u=e("area,br,col,hr,img,wbr");a=e("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),
c=e("rp,rt");var v=b.extend({},c,a),w=b.extend({},a,e("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,script,section,table,ul")),x=b.extend({},c,e("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var"));a=e("circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,stop,svg,switch,text,title,tspan,use");var y=e("script,style"),z=b.extend({},u,w,x,v,a),A=e("background,cite,href,longdesc,src,usemap,xlink:href");a=e("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,tabindex,target,title,type,valign,value,vspace,width"),c=e("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan",!0);var B=b.extend({},A,c,a),C=document.createElement("pre");b.module("ngSanitize",[]).provider("$sanitize",function(){this.$get=["$$sanitizeUri",function(a){return function(b){var c=[];return f(b,i(c,function(b,c){return!/^unsafe/.test(a(b,c))})),c.join("")}}]}),b.module("ngSanitize").filter("linky",["$sanitize",function(a){var c=/((ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"\u201d\u2019]/i,e=/^mailto:/i;return function(f,g){function h(a){a&&n.push(d(a))}function i(a,c){n.push("<a "),b.isDefined(g)&&n.push('target="',g,'" '),n.push('href="',a.replace(/"/g,"&quot;"),'">'),h(c),n.push("</a>")}if(!f)return f;for(var j,k,l,m=f,n=[];j=m.match(c);)k=j[0],j[2]||j[4]||(k=(j[3]?"http://":"mailto:")+k),l=j.index,h(m.substr(0,l)),i(k,j[0].replace(e,"")),m=m.substring(l+j[0].length);return h(m),a(n.join(""))}}])}(window,window.angular),function(){var a,b=this,c=b.Backbone,d=Array.prototype.slice,e=Array.prototype.splice;a="undefined"!=typeof exports?exports:b.Backbone={},a.VERSION="0.9.2";var f=b._;f||"undefined"==typeof require||(f=require("underscore"));var g=b.jQuery||b.Zepto||b.ender;a.setDomLibrary=function(a){g=a},a.noConflict=function(){return b.Backbone=c,this},a.emulateHTTP=!1,a.emulateJSON=!1;var h=/\s+/,i=a.Events={on:function(a,b,c){var d,e,f,g,i;if(!b)return this;for(a=a.split(h),d=this._callbacks||(this._callbacks={});e=a.shift();)i=d[e],f=i?i.tail:{},f.next=g={},f.context=c,f.callback=b,d[e]={tail:g,next:i?i.next:f};return this},off:function(a,b,c){var d,e,g,i,j,k;if(e=this._callbacks){if(!(a||b||c))return delete this._callbacks,this;for(a=a?a.split(h):f.keys(e);d=a.shift();)if(g=e[d],delete e[d],g&&(b||c))for(i=g.tail;(g=g.next)!==i;)j=g.callback,k=g.context,(b&&j!==b||c&&k!==c)&&this.on(d,j,k);return this}},trigger:function(a){var b,c,e,f,g,i,j;if(!(e=this._callbacks))return this;for(i=e.all,a=a.split(h),j=d.call(arguments,1);b=a.shift();){if(c=e[b])for(f=c.tail;(c=c.next)!==f;)c.callback.apply(c.context||this,j);if(c=i)for(f=c.tail,g=[b].concat(j);(c=c.next)!==f;)c.callback.apply(c.context||this,g)}return this}};i.bind=i.on,i.unbind=i.off;var j=a.Model=function(a,b){var c;a||(a={}),b&&b.parse&&(a=this.parse(a)),(c=A(this,"defaults"))&&(a=f.extend({},c,a)),b&&b.collection&&(this.collection=b.collection),this.attributes={},this._escapedAttributes={},this.cid=f.uniqueId("c"),this.changed={},this._silent={},this._pending={},this.set(a,{silent:!0}),this.changed={},this._silent={},this._pending={},this._previousAttributes=f.clone(this.attributes),this.initialize.apply(this,arguments)};f.extend(j.prototype,i,{changed:null,_silent:null,_pending:null,idAttribute:"id",initialize:function(){},toJSON:function(a){return f.clone(this.attributes)},get:function(a){return this.attributes[a]},escape:function(a){var b;if(b=this._escapedAttributes[a])return b;var c=this.get(a);return this._escapedAttributes[a]=f.escape(null==c?"":""+c)},has:function(a){return null!=this.get(a)},set:function(a,b,c){var d,e,g;if(f.isObject(a)||null==a?(d=a,c=b):(d={},d[a]=b),c||(c={}),!d)return this;if(d instanceof j&&(d=d.attributes),c.unset)for(e in d)d[e]=void 0;if(!this._validate(d,c))return!1;this.idAttribute in d&&(this.id=d[this.idAttribute]);var h=c.changes={},i=this.attributes,k=this._escapedAttributes,l=this._previousAttributes||{};for(e in d)g=d[e],(!f.isEqual(i[e],g)||c.unset&&f.has(i,e))&&(delete k[e],(c.silent?this._silent:h)[e]=!0),c.unset?delete i[e]:i[e]=g,f.isEqual(l[e],g)&&f.has(i,e)==f.has(l,e)?(delete this.changed[e],delete this._pending[e]):(this.changed[e]=g,c.silent||(this._pending[e]=!0));return c.silent||this.change(c),this},unset:function(a,b){return(b||(b={})).unset=!0,this.set(a,null,b)},clear:function(a){return(a||(a={})).unset=!0,this.set(f.clone(this.attributes),a)},fetch:function(b){b=b?f.clone(b):{};var c=this,d=b.success;return b.success=function(a,e,f){return c.set(c.parse(a,f),b)?void(d&&d(c,a)):!1},b.error=a.wrapError(b.error,c,b),(this.sync||a.sync).call(this,"read",this,b)},save:function(b,c,d){var e,g;if(f.isObject(b)||null==b?(e=b,d=c):(e={},e[b]=c),d=d?f.clone(d):{},d.wait){if(!this._validate(e,d))return!1;g=f.clone(this.attributes)}var h=f.extend({},d,{silent:!0});if(e&&!this.set(e,d.wait?h:d))return!1;var i=this,j=d.success;d.success=function(a,b,c){var g=i.parse(a,c);return d.wait&&(delete d.wait,g=f.extend(e||{},g)),i.set(g,d)?void(j?j(i,a):i.trigger("sync",i,a,d)):!1},d.error=a.wrapError(d.error,i,d);var k=this.isNew()?"create":"update",l=(this.sync||a.sync).call(this,k,this,d);return d.wait&&this.set(g,h),l},destroy:function(b){b=b?f.clone(b):{};var c=this,d=b.success,e=function(){c.trigger("destroy",c,c.collection,b)};if(this.isNew())return e(),!1;b.success=function(a){b.wait&&e(),d?d(c,a):c.trigger("sync",c,a,b)},b.error=a.wrapError(b.error,c,b);var g=(this.sync||a.sync).call(this,"delete",this,b);return b.wait||e(),g},url:function(){var a=A(this,"urlRoot")||A(this.collection,"url")||B();return this.isNew()?a:a+("/"==a.charAt(a.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(a,b){return a},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},change:function(a){a||(a={});var b=this._changing;this._changing=!0;for(var c in this._silent)this._pending[c]=!0;var d=f.extend({},a.changes,this._silent);this._silent={};for(var c in d)this.trigger("change:"+c,this,this.get(c),a);if(b)return this;for(;!f.isEmpty(this._pending);){this._pending={},this.trigger("change",this,a);for(var c in this.changed)this._pending[c]||this._silent[c]||delete this.changed[c];this._previousAttributes=f.clone(this.attributes)}return this._changing=!1,this},hasChanged:function(a){return arguments.length?f.has(this.changed,a):!f.isEmpty(this.changed)},changedAttributes:function(a){if(!a)return this.hasChanged()?f.clone(this.changed):!1;var b,c=!1,d=this._previousAttributes;for(var e in a)f.isEqual(d[e],b=a[e])||((c||(c={}))[e]=b);return c},previous:function(a){return arguments.length&&this._previousAttributes?this._previousAttributes[a]:null},previousAttributes:function(){return f.clone(this._previousAttributes)},isValid:function(){return!this.validate(this.attributes)},_validate:function(a,b){if(b.silent||!this.validate)return!0;a=f.extend({},this.attributes,a);var c=this.validate(a,b);return c?(b&&b.error?b.error(this,c,b):this.trigger("error",this,c,b),!1):!0}});var k=a.Collection=function(a,b){b||(b={}),b.model&&(this.model=b.model),b.comparator&&(this.comparator=b.comparator),this._reset(),this.initialize.apply(this,arguments),a&&this.reset(a,{silent:!0,parse:b.parse})};f.extend(k.prototype,i,{model:j,initialize:function(){},toJSON:function(a){return this.map(function(b){return b.toJSON(a)})},add:function(a,b){var c,d,g,h,i,j,k={},l={},m=[];for(b||(b={}),a=f.isArray(a)?a.slice():[a],c=0,g=a.length;g>c;c++){if(!(h=a[c]=this._prepareModel(a[c],b)))throw new Error("Can't add an invalid model to a collection");i=h.cid,j=h.id,k[i]||this._byCid[i]||null!=j&&(l[j]||this._byId[j])?m.push(c):k[i]=l[j]=h}for(c=m.length;c--;)a.splice(m[c],1);for(c=0,g=a.length;g>c;c++)(h=a[c]).on("all",this._onModelEvent,this),this._byCid[h.cid]=h,null!=h.id&&(this._byId[h.id]=h);if(this.length+=g,d=null!=b.at?b.at:this.models.length,e.apply(this.models,[d,0].concat(a)),this.comparator&&this.sort({silent:!0}),b.silent)return this;for(c=0,g=this.models.length;g>c;c++)k[(h=this.models[c]).cid]&&(b.index=c,h.trigger("add",h,this,b));return this},remove:function(a,b){var c,d,e,g;for(b||(b={}),a=f.isArray(a)?a.slice():[a],c=0,d=a.length;d>c;c++)g=this.getByCid(a[c])||this.get(a[c]),g&&(delete this._byId[g.id],delete this._byCid[g.cid],e=this.indexOf(g),this.models.splice(e,1),this.length--,b.silent||(b.index=e,g.trigger("remove",g,this,b)),this._removeReference(g));return this},push:function(a,b){return a=this._prepareModel(a,b),this.add(a,b),a},pop:function(a){var b=this.at(this.length-1);return this.remove(b,a),b},unshift:function(a,b){return a=this._prepareModel(a,b),this.add(a,f.extend({at:0},b)),a},shift:function(a){var b=this.at(0);return this.remove(b,a),b},get:function(a){return null==a?void 0:this._byId[null!=a.id?a.id:a]},getByCid:function(a){return a&&this._byCid[a.cid||a]},at:function(a){return this.models[a]},where:function(a){return f.isEmpty(a)?[]:this.filter(function(b){for(var c in a)if(a[c]!==b.get(c))return!1;return!0})},sort:function(a){if(a||(a={}),!this.comparator)throw new Error("Cannot sort a set without a comparator");var b=f.bind(this.comparator,this);return 1==this.comparator.length?this.models=this.sortBy(b):this.models.sort(b),a.silent||this.trigger("reset",this,a),this},pluck:function(a){return f.map(this.models,function(b){return b.get(a)})},reset:function(a,b){a||(a=[]),b||(b={});for(var c=0,d=this.models.length;d>c;c++)this._removeReference(this.models[c]);return this._reset(),this.add(a,f.extend({silent:!0},b)),b.silent||this.trigger("reset",this,b),this},fetch:function(b){b=b?f.clone(b):{},void 0===b.parse&&(b.parse=!0);var c=this,d=b.success;return b.success=function(a,e,f){c[b.add?"add":"reset"](c.parse(a,f),b),d&&d(c,a)},b.error=a.wrapError(b.error,c,b),(this.sync||a.sync).call(this,"read",this,b)},create:function(a,b){var c=this;if(b=b?f.clone(b):{},a=this._prepareModel(a,b),!a)return!1;b.wait||c.add(a,b);var d=b.success;return b.success=function(e,f,g){b.wait&&c.add(e,b),d?d(e,f):e.trigger("sync",a,f,b)},a.save(null,b),a},parse:function(a,b){return a},chain:function(){return f(this.models).chain()},_reset:function(a){this.length=0,this.models=[],this._byId={},this._byCid={}},_prepareModel:function(a,b){if(b||(b={}),a instanceof j)a.collection||(a.collection=this);else{var c=a;b.collection=this,a=new this.model(c,b),a._validate(a.attributes,b)||(a=!1)}return a},_removeReference:function(a){this==a.collection&&delete a.collection,a.off("all",this._onModelEvent,this)},_onModelEvent:function(a,b,c,d){("add"!=a&&"remove"!=a||c==this)&&("destroy"==a&&this.remove(b,d),b&&a==="change:"+b.idAttribute&&(delete this._byId[b.previous(b.idAttribute)],this._byId[b.id]=b),this.trigger.apply(this,arguments))}});var l=["forEach","each","map","reduce","reduceRight","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","sortBy","sortedIndex","toArray","size","first","initial","rest","last","without","indexOf","shuffle","lastIndexOf","isEmpty","groupBy"];f.each(l,function(a){k.prototype[a]=function(){return f[a].apply(f,[this.models].concat(f.toArray(arguments)))}});var m=a.Router=function(a){a||(a={}),a.routes&&(this.routes=a.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},n=/:\w+/g,o=/\*\w+/g,p=/[-[\]{}()+?.,\\^$|#\s]/g;f.extend(m.prototype,i,{initialize:function(){},route:function(b,c,d){return a.history||(a.history=new q),f.isRegExp(b)||(b=this._routeToRegExp(b)),d||(d=this[c]),a.history.route(b,f.bind(function(e){var f=this._extractParameters(b,e);d&&d.apply(this,f),this.trigger.apply(this,["route:"+c].concat(f)),a.history.trigger("route",this,c,f)},this)),this},navigate:function(b,c){a.history.navigate(b,c)},_bindRoutes:function(){if(this.routes){var a=[];for(var b in this.routes)a.unshift([b,this.routes[b]]);for(var c=0,d=a.length;d>c;c++)this.route(a[c][0],a[c][1],this[a[c][1]])}},_routeToRegExp:function(a){return a=a.replace(p,"\\$&").replace(n,"([^/]+)").replace(o,"(.*?)"),new RegExp("^"+a+"$")},_extractParameters:function(a,b){return a.exec(b).slice(1)}});var q=a.History=function(){this.handlers=[],f.bindAll(this,"checkUrl")},r=/^[#\/]/,s=/msie [\w.]+/;q.started=!1,f.extend(q.prototype,i,{interval:50,getHash:function(a){var b=a?a.location:window.location,c=b.href.match(/#(.*)$/);return c?c[1]:""},getFragment:function(a,b){if(null==a)if(this._hasPushState||b){a=window.location.pathname;var c=window.location.search;c&&(a+=c)}else a=this.getHash();return a.indexOf(this.options.root)||(a=a.substr(this.options.root.length)),a.replace(r,"")},start:function(a){if(q.started)throw new Error("Backbone.history has already been started");q.started=!0,this.options=f.extend({},{root:"/"},this.options,a),this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&window.history&&window.history.pushState);var b=this.getFragment(),c=document.documentMode,d=s.exec(navigator.userAgent.toLowerCase())&&(!c||7>=c);d&&(this.iframe=g('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(b)),this._hasPushState?g(window).bind("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!d?g(window).bind("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=b;var e=window.location,h=e.pathname==this.options.root;return this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!h?(this.fragment=this.getFragment(null,!0),window.location.replace(this.options.root+"#"+this.fragment),!0):(this._wantsPushState&&this._hasPushState&&h&&e.hash&&(this.fragment=this.getHash().replace(r,""),window.history.replaceState({},document.title,e.protocol+"//"+e.host+this.options.root+this.fragment)),this.options.silent?void 0:this.loadUrl())},stop:function(){g(window).unbind("popstate",this.checkUrl).unbind("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),q.started=!1},route:function(a,b){this.handlers.unshift({route:a,callback:b})},checkUrl:function(a){var b=this.getFragment();return b==this.fragment&&this.iframe&&(b=this.getFragment(this.getHash(this.iframe))),b==this.fragment?!1:(this.iframe&&this.navigate(b),void(this.loadUrl()||this.loadUrl(this.getHash())))},loadUrl:function(a){var b=this.fragment=this.getFragment(a),c=f.any(this.handlers,function(a){return a.route.test(b)?(a.callback(b),!0):void 0});return c},navigate:function(a,b){if(!q.started)return!1;b&&b!==!0||(b={trigger:b});var c=(a||"").replace(r,"");this.fragment!=c&&(this._hasPushState?(0!=c.indexOf(this.options.root)&&(c=this.options.root+c),this.fragment=c,window.history[b.replace?"replaceState":"pushState"]({},document.title,c)):this._wantsHashChange?(this.fragment=c,this._updateHash(window.location,c,b.replace),this.iframe&&c!=this.getFragment(this.getHash(this.iframe))&&(b.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,c,b.replace))):window.location.assign(this.options.root+a),b.trigger&&this.loadUrl(a))},_updateHash:function(a,b,c){c?a.replace(a.toString().replace(/(javascript:|#).*$/,"")+"#"+b):a.hash=b}});var t=a.View=function(a){this.cid=f.uniqueId("view"),this._configure(a||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},u=/^(\S+)\s*(.*)$/,v=["model","collection","el","id","attributes","className","tagName"];f.extend(t.prototype,i,{tagName:"div",$:function(a){return this.$el.find(a)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this},make:function(a,b,c){var d=document.createElement(a);return b&&g(d).attr(b),c&&g(d).html(c),d},setElement:function(a,b){return this.$el&&this.undelegateEvents(),this.$el=a instanceof g?a:g(a),this.el=this.$el[0],b!==!1&&this.delegateEvents(),this},delegateEvents:function(a){if(a||(a=A(this,"events"))){this.undelegateEvents();for(var b in a){var c=a[b];if(f.isFunction(c)||(c=this[a[b]]),!c)throw new Error('Method "'+a[b]+'" does not exist');var d=b.match(u),e=d[1],g=d[2];c=f.bind(c,this),e+=".delegateEvents"+this.cid,""===g?this.$el.bind(e,c):this.$el.delegate(g,e,c)}}},undelegateEvents:function(){this.$el.unbind(".delegateEvents"+this.cid)},_configure:function(a){this.options&&(a=f.extend({},this.options,a));for(var b=0,c=v.length;c>b;b++){var d=v[b];a[d]&&(this[d]=a[d])}this.options=a},_ensureElement:function(){if(this.el)this.setElement(this.el,!1);else{var a=A(this,"attributes")||{};this.id&&(a.id=this.id),this.className&&(a["class"]=this.className),this.setElement(this.make(this.tagName,a),!1)}}});var w=function(a,b){var c=z(this,a,b);return c.extend=this.extend,c};j.extend=k.extend=m.extend=t.extend=w;var x={create:"POST",update:"PUT","delete":"DELETE",read:"GET"};a.sync=function(b,c,d){var e=x[b];d||(d={});var h={type:e,dataType:"json"};return d.url||(h.url=A(c,"url")||B()),d.data||!c||"create"!=b&&"update"!=b||(h.contentType="application/json",h.data=JSON.stringify(c.toJSON())),a.emulateJSON&&(h.contentType="application/x-www-form-urlencoded",h.data=h.data?{model:h.data}:{}),a.emulateHTTP&&("PUT"===e||"DELETE"===e)&&(a.emulateJSON&&(h.data._method=e),h.type="POST",h.beforeSend=function(a){a.setRequestHeader("X-HTTP-Method-Override",e)}),"GET"===h.type||a.emulateJSON||(h.processData=!1),g.ajax(f.extend(h,d))},a.wrapError=function(a,b,c){return function(d,e){e=d===b?e:d,a?a(b,e,c):b.trigger("error",b,e,c)}};var y=function(){},z=function(a,b,c){var d;return d=b&&b.hasOwnProperty("constructor")?b.constructor:function(){a.apply(this,arguments)},f.extend(d,a),y.prototype=a.prototype,d.prototype=new y,b&&f.extend(d.prototype,b),c&&f.extend(d,c),d.prototype.constructor=d,d.__super__=a.prototype,d},A=function(a,b){return a&&a[b]?f.isFunction(a[b])?a[b]():a[b]:null},B=function(){throw new Error('A "url" property or function must be specified')}}.call(this),"undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(a){"use strict";function b(){var a=document.createElement("bootstrap"),b={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var c in b)if(void 0!==a.style[c])return{end:b[c]};return!1}a.fn.emulateTransitionEnd=function(b){var c=!1,d=this;a(this).one("bsTransitionEnd",function(){c=!0});var e=function(){c||a(d).trigger(a.support.transition.end)};return setTimeout(e,b),this},a(function(){a.support.transition=b(),a.support.transition&&(a.event.special.bsTransitionEnd={bindType:a.support.transition.end,delegateType:a.support.transition.end,handle:function(b){return a(b.target).is(this)?b.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var c=a(this),e=c.data("bs.alert");e||c.data("bs.alert",e=new d(this)),"string"==typeof b&&e[b].call(c)})}var c='[data-dismiss="alert"]',d=function(b){a(b).on("click",c,this.close)};d.VERSION="3.2.0",d.prototype.close=function(b){function c(){f.detach().trigger("closed.bs.alert").remove()}var d=a(this),e=d.attr("data-target");e||(e=d.attr("href"),e=e&&e.replace(/.*(?=#[^\s]*$)/,""));var f=a(e);b&&b.preventDefault(),f.length||(f=d.hasClass("alert")?d:d.parent()),f.trigger(b=a.Event("close.bs.alert")),b.isDefaultPrevented()||(f.removeClass("in"),a.support.transition&&f.hasClass("fade")?f.one("bsTransitionEnd",c).emulateTransitionEnd(150):c())};var e=a.fn.alert;a.fn.alert=b,a.fn.alert.Constructor=d,a.fn.alert.noConflict=function(){return a.fn.alert=e,this},a(document).on("click.bs.alert.data-api",c,d.prototype.close)}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.button"),f="object"==typeof b&&b;e||d.data("bs.button",e=new c(this,f)),"toggle"==b?e.toggle():b&&e.setState(b)})}var c=function(b,d){this.$element=a(b),this.options=a.extend({},c.DEFAULTS,d),this.isLoading=!1};c.VERSION="3.2.0",c.DEFAULTS={loadingText:"loading..."},c.prototype.setState=function(b){var c="disabled",d=this.$element,e=d.is("input")?"val":"html",f=d.data();b+="Text",null==f.resetText&&d.data("resetText",d[e]()),d[e](null==f[b]?this.options[b]:f[b]),setTimeout(a.proxy(function(){"loadingText"==b?(this.isLoading=!0,d.addClass(c).attr(c,c)):this.isLoading&&(this.isLoading=!1,d.removeClass(c).removeAttr(c))},this),0)},c.prototype.toggle=function(){var a=!0,b=this.$element.closest('[data-toggle="buttons"]');if(b.length){var c=this.$element.find("input");"radio"==c.prop("type")&&(c.prop("checked")&&this.$element.hasClass("active")?a=!1:b.find(".active").removeClass("active")),a&&c.prop("checked",!this.$element.hasClass("active")).trigger("change")}a&&this.$element.toggleClass("active")};var d=a.fn.button;a.fn.button=b,a.fn.button.Constructor=c,a.fn.button.noConflict=function(){return a.fn.button=d,this},a(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(c){var d=a(c.target);d.hasClass("btn")||(d=d.closest(".btn")),b.call(d,"toggle"),c.preventDefault()})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.carousel"),f=a.extend({},c.DEFAULTS,d.data(),"object"==typeof b&&b),g="string"==typeof b?b:f.slide;e||d.data("bs.carousel",e=new c(this,f)),"number"==typeof b?e.to(b):g?e[g]():f.interval&&e.pause().cycle()})}var c=function(b,c){this.$element=a(b).on("keydown.bs.carousel",a.proxy(this.keydown,this)),this.$indicators=this.$element.find(".carousel-indicators"),this.options=c,this.paused=this.sliding=this.interval=this.$active=this.$items=null,"hover"==this.options.pause&&this.$element.on("mouseenter.bs.carousel",a.proxy(this.pause,this)).on("mouseleave.bs.carousel",a.proxy(this.cycle,this))};c.VERSION="3.2.0",c.DEFAULTS={interval:5e3,pause:"hover",wrap:!0},c.prototype.keydown=function(a){switch(a.which){case 37:this.prev();break;case 39:this.next();break;default:return}a.preventDefault()},c.prototype.cycle=function(b){return b||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(a.proxy(this.next,this),this.options.interval)),this},c.prototype.getItemIndex=function(a){return this.$items=a.parent().children(".item"),this.$items.index(a||this.$active)},c.prototype.to=function(b){var c=this,d=this.getItemIndex(this.$active=this.$element.find(".item.active"));return b>this.$items.length-1||0>b?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){c.to(b)}):d==b?this.pause().cycle():this.slide(b>d?"next":"prev",a(this.$items[b]))},c.prototype.pause=function(b){return b||(this.paused=!0),this.$element.find(".next, .prev").length&&a.support.transition&&(this.$element.trigger(a.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},c.prototype.next=function(){return this.sliding?void 0:this.slide("next")},c.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},c.prototype.slide=function(b,c){var d=this.$element.find(".item.active"),e=c||d[b](),f=this.interval,g="next"==b?"left":"right",h="next"==b?"first":"last",i=this;if(!e.length){if(!this.options.wrap)return;e=this.$element.find(".item")[h]()}if(e.hasClass("active"))return this.sliding=!1;var j=e[0],k=a.Event("slide.bs.carousel",{relatedTarget:j,direction:g});if(this.$element.trigger(k),!k.isDefaultPrevented()){if(this.sliding=!0,f&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var l=a(this.$indicators.children()[this.getItemIndex(e)]);l&&l.addClass("active")}var m=a.Event("slid.bs.carousel",{relatedTarget:j,direction:g});return a.support.transition&&this.$element.hasClass("slide")?(e.addClass(b),e[0].offsetWidth,d.addClass(g),e.addClass(g),d.one("bsTransitionEnd",function(){e.removeClass([b,g].join(" ")).addClass("active"),d.removeClass(["active",g].join(" ")),i.sliding=!1,setTimeout(function(){i.$element.trigger(m)},0)}).emulateTransitionEnd(1e3*d.css("transition-duration").slice(0,-1))):(d.removeClass("active"),e.addClass("active"),this.sliding=!1,this.$element.trigger(m)),f&&this.cycle(),this}};var d=a.fn.carousel;a.fn.carousel=b,a.fn.carousel.Constructor=c,a.fn.carousel.noConflict=function(){return a.fn.carousel=d,this},a(document).on("click.bs.carousel.data-api","[data-slide], [data-slide-to]",function(c){var d,e=a(this),f=a(e.attr("data-target")||(d=e.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,""));if(f.hasClass("carousel")){var g=a.extend({},f.data(),e.data()),h=e.attr("data-slide-to");h&&(g.interval=!1),b.call(f,g),h&&f.data("bs.carousel").to(h),c.preventDefault()}}),a(window).on("load",function(){a('[data-ride="carousel"]').each(function(){var c=a(this);b.call(c,c.data())})})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.collapse"),f=a.extend({},c.DEFAULTS,d.data(),"object"==typeof b&&b);!e&&f.toggle&&"show"==b&&(b=!b),e||d.data("bs.collapse",e=new c(this,f)),"string"==typeof b&&e[b]()})}var c=function(b,d){this.$element=a(b),this.options=a.extend({},c.DEFAULTS,d),this.transitioning=null,this.options.parent&&(this.$parent=a(this.options.parent)),this.options.toggle&&this.toggle()};c.VERSION="3.2.0",c.DEFAULTS={toggle:!0},c.prototype.dimension=function(){var a=this.$element.hasClass("width");return a?"width":"height"},c.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var c=a.Event("show.bs.collapse");if(this.$element.trigger(c),!c.isDefaultPrevented()){var d=this.$parent&&this.$parent.find("> .panel > .in");if(d&&d.length){var e=d.data("bs.collapse");if(e&&e.transitioning)return;b.call(d,"hide"),e||d.data("bs.collapse",null)}var f=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[f](0),this.transitioning=1;var g=function(){this.$element.removeClass("collapsing").addClass("collapse in")[f](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!a.support.transition)return g.call(this);var h=a.camelCase(["scroll",f].join("-"));this.$element.one("bsTransitionEnd",a.proxy(g,this)).emulateTransitionEnd(350)[f](this.$element[0][h])}}},c.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var b=a.Event("hide.bs.collapse");if(this.$element.trigger(b),!b.isDefaultPrevented()){var c=this.dimension();this.$element[c](this.$element[c]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse").removeClass("in"),this.transitioning=1;var d=function(){this.transitioning=0,this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")};return a.support.transition?void this.$element[c](0).one("bsTransitionEnd",a.proxy(d,this)).emulateTransitionEnd(350):d.call(this)}}},c.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};var d=a.fn.collapse;a.fn.collapse=b,a.fn.collapse.Constructor=c,a.fn.collapse.noConflict=function(){return a.fn.collapse=d,this},a(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(c){var d,e=a(this),f=e.attr("data-target")||c.preventDefault()||(d=e.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,""),g=a(f),h=g.data("bs.collapse"),i=h?"toggle":e.data(),j=e.attr("data-parent"),k=j&&a(j);h&&h.transitioning||(k&&k.find('[data-toggle="collapse"][data-parent="'+j+'"]').not(e).addClass("collapsed"),e[g.hasClass("in")?"addClass":"removeClass"]("collapsed")),b.call(g,i)})}(jQuery),+function(a){"use strict";function b(b){b&&3===b.which||(a(e).remove(),a(f).each(function(){var d=c(a(this)),e={relatedTarget:this};d.hasClass("open")&&(d.trigger(b=a.Event("hide.bs.dropdown",e)),b.isDefaultPrevented()||d.removeClass("open").trigger("hidden.bs.dropdown",e))}))}function c(b){var c=b.attr("data-target");c||(c=b.attr("href"),c=c&&/#[A-Za-z]/.test(c)&&c.replace(/.*(?=#[^\s]*$)/,""));var d=c&&a(c);return d&&d.length?d:b.parent()}function d(b){return this.each(function(){var c=a(this),d=c.data("bs.dropdown");d||c.data("bs.dropdown",d=new g(this)),"string"==typeof b&&d[b].call(c)})}var e=".dropdown-backdrop",f='[data-toggle="dropdown"]',g=function(b){a(b).on("click.bs.dropdown",this.toggle)};g.VERSION="3.2.0",g.prototype.toggle=function(d){var e=a(this);if(!e.is(".disabled, :disabled")){var f=c(e),g=f.hasClass("open");if(b(),!g){"ontouchstart"in document.documentElement&&!f.closest(".navbar-nav").length&&a('<div class="dropdown-backdrop"/>').insertAfter(a(this)).on("click",b);var h={relatedTarget:this};if(f.trigger(d=a.Event("show.bs.dropdown",h)),d.isDefaultPrevented())return;e.trigger("focus"),f.toggleClass("open").trigger("shown.bs.dropdown",h)}return!1}},g.prototype.keydown=function(b){if(/(38|40|27)/.test(b.keyCode)){var d=a(this);if(b.preventDefault(),b.stopPropagation(),!d.is(".disabled, :disabled")){var e=c(d),g=e.hasClass("open");if(!g||g&&27==b.keyCode)return 27==b.which&&e.find(f).trigger("focus"),d.trigger("click");var h=" li:not(.divider):visible a",i=e.find('[role="menu"]'+h+', [role="listbox"]'+h);if(i.length){var j=i.index(i.filter(":focus"));38==b.keyCode&&j>0&&j--,40==b.keyCode&&j<i.length-1&&j++,~j||(j=0),i.eq(j).trigger("focus")}}}};var h=a.fn.dropdown;a.fn.dropdown=d,a.fn.dropdown.Constructor=g,a.fn.dropdown.noConflict=function(){return a.fn.dropdown=h,this},a(document).on("click.bs.dropdown.data-api",b).on("click.bs.dropdown.data-api",".dropdown form",function(a){a.stopPropagation()}).on("click.bs.dropdown.data-api",f,g.prototype.toggle).on("keydown.bs.dropdown.data-api",f+', [role="menu"], [role="listbox"]',g.prototype.keydown)}(jQuery),+function(a){"use strict";function b(b,d){return this.each(function(){var e=a(this),f=e.data("bs.modal"),g=a.extend({},c.DEFAULTS,e.data(),"object"==typeof b&&b);f||e.data("bs.modal",f=new c(this,g)),"string"==typeof b?f[b](d):g.show&&f.show(d)})}var c=function(b,c){this.options=c,this.$body=a(document.body),this.$element=a(b),this.$backdrop=this.isShown=null,this.scrollbarWidth=0,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,a.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};c.VERSION="3.2.0",c.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},c.prototype.toggle=function(a){return this.isShown?this.hide():this.show(a)},c.prototype.show=function(b){var c=this,d=a.Event("show.bs.modal",{relatedTarget:b});this.$element.trigger(d),this.isShown||d.isDefaultPrevented()||(this.isShown=!0,
this.checkScrollbar(),this.$body.addClass("modal-open"),this.setScrollbar(),this.escape(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',a.proxy(this.hide,this)),this.backdrop(function(){var d=a.support.transition&&c.$element.hasClass("fade");c.$element.parent().length||c.$element.appendTo(c.$body),c.$element.show().scrollTop(0),d&&c.$element[0].offsetWidth,c.$element.addClass("in").attr("aria-hidden",!1),c.enforceFocus();var e=a.Event("shown.bs.modal",{relatedTarget:b});d?c.$element.find(".modal-dialog").one("bsTransitionEnd",function(){c.$element.trigger("focus").trigger(e)}).emulateTransitionEnd(300):c.$element.trigger("focus").trigger(e)}))},c.prototype.hide=function(b){b&&b.preventDefault(),b=a.Event("hide.bs.modal"),this.$element.trigger(b),this.isShown&&!b.isDefaultPrevented()&&(this.isShown=!1,this.$body.removeClass("modal-open"),this.resetScrollbar(),this.escape(),a(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),a.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",a.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal())},c.prototype.enforceFocus=function(){a(document).off("focusin.bs.modal").on("focusin.bs.modal",a.proxy(function(a){this.$element[0]===a.target||this.$element.has(a.target).length||this.$element.trigger("focus")},this))},c.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",a.proxy(function(a){27==a.which&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")},c.prototype.hideModal=function(){var a=this;this.$element.hide(),this.backdrop(function(){a.$element.trigger("hidden.bs.modal")})},c.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},c.prototype.backdrop=function(b){var c=this,d=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var e=a.support.transition&&d;if(this.$backdrop=a('<div class="modal-backdrop '+d+'" />').appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",a.proxy(function(a){a.target===a.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),e&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!b)return;e?this.$backdrop.one("bsTransitionEnd",b).emulateTransitionEnd(150):b()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var f=function(){c.removeBackdrop(),b&&b()};a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",f).emulateTransitionEnd(150):f()}else b&&b()},c.prototype.checkScrollbar=function(){document.body.clientWidth>=window.innerWidth||(this.scrollbarWidth=this.scrollbarWidth||this.measureScrollbar())},c.prototype.setScrollbar=function(){var a=parseInt(this.$body.css("padding-right")||0,10);this.scrollbarWidth&&this.$body.css("padding-right",a+this.scrollbarWidth)},c.prototype.resetScrollbar=function(){this.$body.css("padding-right","")},c.prototype.measureScrollbar=function(){var a=document.createElement("div");a.className="modal-scrollbar-measure",this.$body.append(a);var b=a.offsetWidth-a.clientWidth;return this.$body[0].removeChild(a),b};var d=a.fn.modal;a.fn.modal=b,a.fn.modal.Constructor=c,a.fn.modal.noConflict=function(){return a.fn.modal=d,this},a(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(c){var d=a(this),e=d.attr("href"),f=a(d.attr("data-target")||e&&e.replace(/.*(?=#[^\s]+$)/,"")),g=f.data("bs.modal")?"toggle":a.extend({remote:!/#/.test(e)&&e},f.data(),d.data());d.is("a")&&c.preventDefault(),f.one("show.bs.modal",function(a){a.isDefaultPrevented()||f.one("hidden.bs.modal",function(){d.is(":visible")&&d.trigger("focus")})}),b.call(f,g,this)})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.tooltip"),f="object"==typeof b&&b;(e||"destroy"!=b)&&(e||d.data("bs.tooltip",e=new c(this,f)),"string"==typeof b&&e[b]())})}var c=function(a,b){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",a,b)};c.VERSION="3.2.0",c.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},c.prototype.init=function(b,c,d){this.enabled=!0,this.type=b,this.$element=a(c),this.options=this.getOptions(d),this.$viewport=this.options.viewport&&a(this.options.viewport.selector||this.options.viewport);for(var e=this.options.trigger.split(" "),f=e.length;f--;){var g=e[f];if("click"==g)this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this));else if("manual"!=g){var h="hover"==g?"mouseenter":"focusin",i="hover"==g?"mouseleave":"focusout";this.$element.on(h+"."+this.type,this.options.selector,a.proxy(this.enter,this)),this.$element.on(i+"."+this.type,this.options.selector,a.proxy(this.leave,this))}}this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},c.prototype.getDefaults=function(){return c.DEFAULTS},c.prototype.getOptions=function(b){return b=a.extend({},this.getDefaults(),this.$element.data(),b),b.delay&&"number"==typeof b.delay&&(b.delay={show:b.delay,hide:b.delay}),b},c.prototype.getDelegateOptions=function(){var b={},c=this.getDefaults();return this._options&&a.each(this._options,function(a,d){c[a]!=d&&(b[a]=d)}),b},c.prototype.enter=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);return c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c)),clearTimeout(c.timeout),c.hoverState="in",c.options.delay&&c.options.delay.show?void(c.timeout=setTimeout(function(){"in"==c.hoverState&&c.show()},c.options.delay.show)):c.show()},c.prototype.leave=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);return c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c)),clearTimeout(c.timeout),c.hoverState="out",c.options.delay&&c.options.delay.hide?void(c.timeout=setTimeout(function(){"out"==c.hoverState&&c.hide()},c.options.delay.hide)):c.hide()},c.prototype.show=function(){var b=a.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(b);var c=a.contains(document.documentElement,this.$element[0]);if(b.isDefaultPrevented()||!c)return;var d=this,e=this.tip(),f=this.getUID(this.type);this.setContent(),e.attr("id",f),this.$element.attr("aria-describedby",f),this.options.animation&&e.addClass("fade");var g="function"==typeof this.options.placement?this.options.placement.call(this,e[0],this.$element[0]):this.options.placement,h=/\s?auto?\s?/i,i=h.test(g);i&&(g=g.replace(h,"")||"top"),e.detach().css({top:0,left:0,display:"block"}).addClass(g).data("bs."+this.type,this),this.options.container?e.appendTo(this.options.container):e.insertAfter(this.$element);var j=this.getPosition(),k=e[0].offsetWidth,l=e[0].offsetHeight;if(i){var m=g,n=this.$element.parent(),o=this.getPosition(n);g="bottom"==g&&j.top+j.height+l-o.scroll>o.height?"top":"top"==g&&j.top-o.scroll-l<0?"bottom":"right"==g&&j.right+k>o.width?"left":"left"==g&&j.left-k<o.left?"right":g,e.removeClass(m).addClass(g)}var p=this.getCalculatedOffset(g,j,k,l);this.applyPlacement(p,g);var q=function(){d.$element.trigger("shown.bs."+d.type),d.hoverState=null};a.support.transition&&this.$tip.hasClass("fade")?e.one("bsTransitionEnd",q).emulateTransitionEnd(150):q()}},c.prototype.applyPlacement=function(b,c){var d=this.tip(),e=d[0].offsetWidth,f=d[0].offsetHeight,g=parseInt(d.css("margin-top"),10),h=parseInt(d.css("margin-left"),10);isNaN(g)&&(g=0),isNaN(h)&&(h=0),b.top=b.top+g,b.left=b.left+h,a.offset.setOffset(d[0],a.extend({using:function(a){d.css({top:Math.round(a.top),left:Math.round(a.left)})}},b),0),d.addClass("in");var i=d[0].offsetWidth,j=d[0].offsetHeight;"top"==c&&j!=f&&(b.top=b.top+f-j);var k=this.getViewportAdjustedDelta(c,b,i,j);k.left?b.left+=k.left:b.top+=k.top;var l=k.left?2*k.left-e+i:2*k.top-f+j,m=k.left?"left":"top",n=k.left?"offsetWidth":"offsetHeight";d.offset(b),this.replaceArrow(l,d[0][n],m)},c.prototype.replaceArrow=function(a,b,c){this.arrow().css(c,a?50*(1-a/b)+"%":"")},c.prototype.setContent=function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.options.html?"html":"text"](b),a.removeClass("fade in top bottom left right")},c.prototype.hide=function(){function b(){"in"!=c.hoverState&&d.detach(),c.$element.trigger("hidden.bs."+c.type)}var c=this,d=this.tip(),e=a.Event("hide.bs."+this.type);return this.$element.removeAttr("aria-describedby"),this.$element.trigger(e),e.isDefaultPrevented()?void 0:(d.removeClass("in"),a.support.transition&&this.$tip.hasClass("fade")?d.one("bsTransitionEnd",b).emulateTransitionEnd(150):b(),this.hoverState=null,this)},c.prototype.fixTitle=function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("data-original-title"))&&a.attr("data-original-title",a.attr("title")||"").attr("title","")},c.prototype.hasContent=function(){return this.getTitle()},c.prototype.getPosition=function(b){b=b||this.$element;var c=b[0],d="BODY"==c.tagName;return a.extend({},"function"==typeof c.getBoundingClientRect?c.getBoundingClientRect():null,{scroll:d?document.documentElement.scrollTop||document.body.scrollTop:b.scrollTop(),width:d?a(window).width():b.outerWidth(),height:d?a(window).height():b.outerHeight()},d?{top:0,left:0}:b.offset())},c.prototype.getCalculatedOffset=function(a,b,c,d){return"bottom"==a?{top:b.top+b.height,left:b.left+b.width/2-c/2}:"top"==a?{top:b.top-d,left:b.left+b.width/2-c/2}:"left"==a?{top:b.top+b.height/2-d/2,left:b.left-c}:{top:b.top+b.height/2-d/2,left:b.left+b.width}},c.prototype.getViewportAdjustedDelta=function(a,b,c,d){var e={top:0,left:0};if(!this.$viewport)return e;var f=this.options.viewport&&this.options.viewport.padding||0,g=this.getPosition(this.$viewport);if(/right|left/.test(a)){var h=b.top-f-g.scroll,i=b.top+f-g.scroll+d;h<g.top?e.top=g.top-h:i>g.top+g.height&&(e.top=g.top+g.height-i)}else{var j=b.left-f,k=b.left+f+c;j<g.left?e.left=g.left-j:k>g.width&&(e.left=g.left+g.width-k)}return e},c.prototype.getTitle=function(){var a,b=this.$element,c=this.options;return a=b.attr("data-original-title")||("function"==typeof c.title?c.title.call(b[0]):c.title)},c.prototype.getUID=function(a){do a+=~~(1e6*Math.random());while(document.getElementById(a));return a},c.prototype.tip=function(){return this.$tip=this.$tip||a(this.options.template)},c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},c.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},c.prototype.enable=function(){this.enabled=!0},c.prototype.disable=function(){this.enabled=!1},c.prototype.toggleEnabled=function(){this.enabled=!this.enabled},c.prototype.toggle=function(b){var c=this;b&&(c=a(b.currentTarget).data("bs."+this.type),c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c))),c.tip().hasClass("in")?c.leave(c):c.enter(c)},c.prototype.destroy=function(){clearTimeout(this.timeout),this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var d=a.fn.tooltip;a.fn.tooltip=b,a.fn.tooltip.Constructor=c,a.fn.tooltip.noConflict=function(){return a.fn.tooltip=d,this}}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.popover"),f="object"==typeof b&&b;(e||"destroy"!=b)&&(e||d.data("bs.popover",e=new c(this,f)),"string"==typeof b&&e[b]())})}var c=function(a,b){this.init("popover",a,b)};if(!a.fn.tooltip)throw new Error("Popover requires tooltip.js");c.VERSION="3.2.0",c.DEFAULTS=a.extend({},a.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),c.prototype=a.extend({},a.fn.tooltip.Constructor.prototype),c.prototype.constructor=c,c.prototype.getDefaults=function(){return c.DEFAULTS},c.prototype.setContent=function(){var a=this.tip(),b=this.getTitle(),c=this.getContent();a.find(".popover-title")[this.options.html?"html":"text"](b),a.find(".popover-content").empty()[this.options.html?"string"==typeof c?"html":"append":"text"](c),a.removeClass("fade top bottom left right in"),a.find(".popover-title").html()||a.find(".popover-title").hide()},c.prototype.hasContent=function(){return this.getTitle()||this.getContent()},c.prototype.getContent=function(){var a=this.$element,b=this.options;return a.attr("data-content")||("function"==typeof b.content?b.content.call(a[0]):b.content)},c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},c.prototype.tip=function(){return this.$tip||(this.$tip=a(this.options.template)),this.$tip};var d=a.fn.popover;a.fn.popover=b,a.fn.popover.Constructor=c,a.fn.popover.noConflict=function(){return a.fn.popover=d,this}}(jQuery),+function(a){"use strict";function b(c,d){var e=a.proxy(this.process,this);this.$body=a("body"),this.$scrollElement=a(a(c).is("body")?window:c),this.options=a.extend({},b.DEFAULTS,d),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",e),this.refresh(),this.process()}function c(c){return this.each(function(){var d=a(this),e=d.data("bs.scrollspy"),f="object"==typeof c&&c;e||d.data("bs.scrollspy",e=new b(this,f)),"string"==typeof c&&e[c]()})}b.VERSION="3.2.0",b.DEFAULTS={offset:10},b.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},b.prototype.refresh=function(){var b="offset",c=0;a.isWindow(this.$scrollElement[0])||(b="position",c=this.$scrollElement.scrollTop()),this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight();var d=this;this.$body.find(this.selector).map(function(){var d=a(this),e=d.data("target")||d.attr("href"),f=/^#./.test(e)&&a(e);return f&&f.length&&f.is(":visible")&&[[f[b]().top+c,e]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){d.offsets.push(this[0]),d.targets.push(this[1])})},b.prototype.process=function(){var a,b=this.$scrollElement.scrollTop()+this.options.offset,c=this.getScrollHeight(),d=this.options.offset+c-this.$scrollElement.height(),e=this.offsets,f=this.targets,g=this.activeTarget;if(this.scrollHeight!=c&&this.refresh(),b>=d)return g!=(a=f[f.length-1])&&this.activate(a);if(g&&b<=e[0])return g!=(a=f[0])&&this.activate(a);for(a=e.length;a--;)g!=f[a]&&b>=e[a]&&(!e[a+1]||b<=e[a+1])&&this.activate(f[a])},b.prototype.activate=function(b){this.activeTarget=b,a(this.selector).parentsUntil(this.options.target,".active").removeClass("active");var c=this.selector+'[data-target="'+b+'"],'+this.selector+'[href="'+b+'"]',d=a(c).parents("li").addClass("active");d.parent(".dropdown-menu").length&&(d=d.closest("li.dropdown").addClass("active")),d.trigger("activate.bs.scrollspy")};var d=a.fn.scrollspy;a.fn.scrollspy=c,a.fn.scrollspy.Constructor=b,a.fn.scrollspy.noConflict=function(){return a.fn.scrollspy=d,this},a(window).on("load.bs.scrollspy.data-api",function(){a('[data-spy="scroll"]').each(function(){var b=a(this);c.call(b,b.data())})})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.tab");e||d.data("bs.tab",e=new c(this)),"string"==typeof b&&e[b]()})}var c=function(b){this.element=a(b)};c.VERSION="3.2.0",c.prototype.show=function(){var b=this.element,c=b.closest("ul:not(.dropdown-menu)"),d=b.data("target");if(d||(d=b.attr("href"),d=d&&d.replace(/.*(?=#[^\s]*$)/,"")),!b.parent("li").hasClass("active")){var e=c.find(".active:last a")[0],f=a.Event("show.bs.tab",{relatedTarget:e});if(b.trigger(f),!f.isDefaultPrevented()){var g=a(d);this.activate(b.closest("li"),c),this.activate(g,g.parent(),function(){b.trigger({type:"shown.bs.tab",relatedTarget:e})})}}},c.prototype.activate=function(b,c,d){function e(){f.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),b.addClass("active"),g?(b[0].offsetWidth,b.addClass("in")):b.removeClass("fade"),b.parent(".dropdown-menu")&&b.closest("li.dropdown").addClass("active"),d&&d()}var f=c.find("> .active"),g=d&&a.support.transition&&f.hasClass("fade");g?f.one("bsTransitionEnd",e).emulateTransitionEnd(150):e(),f.removeClass("in")};var d=a.fn.tab;a.fn.tab=b,a.fn.tab.Constructor=c,a.fn.tab.noConflict=function(){return a.fn.tab=d,this},a(document).on("click.bs.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(c){c.preventDefault(),b.call(a(this),"show")})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.affix"),f="object"==typeof b&&b;e||d.data("bs.affix",e=new c(this,f)),"string"==typeof b&&e[b]()})}var c=function(b,d){this.options=a.extend({},c.DEFAULTS,d),this.$target=a(this.options.target).on("scroll.bs.affix.data-api",a.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",a.proxy(this.checkPositionWithEventLoop,this)),this.$element=a(b),this.affixed=this.unpin=this.pinnedOffset=null,this.checkPosition()};c.VERSION="3.2.0",c.RESET="affix affix-top affix-bottom",c.DEFAULTS={offset:0,target:window},c.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(c.RESET).addClass("affix");var a=this.$target.scrollTop(),b=this.$element.offset();return this.pinnedOffset=b.top-a},c.prototype.checkPositionWithEventLoop=function(){setTimeout(a.proxy(this.checkPosition,this),1)},c.prototype.checkPosition=function(){if(this.$element.is(":visible")){var b=a(document).height(),d=this.$target.scrollTop(),e=this.$element.offset(),f=this.options.offset,g=f.top,h=f.bottom;"object"!=typeof f&&(h=g=f),"function"==typeof g&&(g=f.top(this.$element)),"function"==typeof h&&(h=f.bottom(this.$element));var i=null!=this.unpin&&d+this.unpin<=e.top?!1:null!=h&&e.top+this.$element.height()>=b-h?"bottom":null!=g&&g>=d?"top":!1;if(this.affixed!==i){null!=this.unpin&&this.$element.css("top","");var j="affix"+(i?"-"+i:""),k=a.Event(j+".bs.affix");this.$element.trigger(k),k.isDefaultPrevented()||(this.affixed=i,this.unpin="bottom"==i?this.getPinnedOffset():null,this.$element.removeClass(c.RESET).addClass(j).trigger(a.Event(j.replace("affix","affixed"))),"bottom"==i&&this.$element.offset({top:b-this.$element.height()-h}))}}};var d=a.fn.affix;a.fn.affix=b,a.fn.affix.Constructor=c,a.fn.affix.noConflict=function(){return a.fn.affix=d,this},a(window).on("load",function(){a('[data-spy="affix"]').each(function(){var c=a(this),d=c.data();d.offset=d.offset||{},d.offsetBottom&&(d.offset.bottom=d.offsetBottom),d.offsetTop&&(d.offset.top=d.offsetTop),b.call(c,d)})})}(jQuery),function(a,b){a.widget("Midgard.midgardCreate",{options:{toolbar:"full",saveButton:null,state:"browse",highlight:!0,highlightColor:"#67cc08",editorWidgets:{"default":"hallo"},editorOptions:{hallo:{widget:"halloWidget"}},collectionWidgets:{"default":"midgardCollectionAdd"},url:function(){},storagePrefix:"node",workflows:{url:null},notifications:{},vie:null,stanbolUrl:null,dbPediaUrl:null,tags:!1},_create:function(){this.options.vie?this.vie=this.options.vie:(this.vie=new VIE,this.vie.use(new this.vie.RdfaService),this.options.stanbolUrl&&this.vie.use(new this.vie.StanbolService({proxyDisabled:!0,url:this.options.stanbolUrl})),this.options.dbPediaUrl&&this.vie.use(new this.vie.DBPediaService({proxyDisabled:!0,url:this.options.dbPediaUrl})));var a=this;window.setTimeout(function(){a._checkSession()},10),this._enableToolbar(),this._saveButton(),this._editButton(),this._prepareStorage(),this.element.midgardWorkflows&&this.element.midgardWorkflows(this.options.workflows),this.element.midgardNotifications&&this.element.midgardNotifications(this.options.notifications)},_prepareStorage:function(){this.element.midgardStorage({vie:this.vie,url:this.options.url}),this.element.bind("midgardstoragesave",function(){a("#midgardcreate-save a").html('Saving <i class="icon-upload"></i>')}),this.element.bind("midgardstoragesaved midgardstorageerror",function(){a("#midgardcreate-save a").html('Save <i class="icon-ok"></i>')})},_init:function(){this.setState(this.options.state)},setState:function(a){this._setOption("state",a),"edit"===a?this._enableEdit():this._disableEdit(),this._setEditButtonState(a)},showNotification:function(b){return this.element.midgardNotifications?a(this.element).data("midgardNotifications").create(b):void 0},configureEditor:function(a,b,c){this.options.editorOptions[a]={widget:b,options:c}},setEditorForContentType:function(a,c){if(this.options.editorOptions[c]===b&&null!==c)throw new Error("No editor "+c+" configured");this.options.editorWidgets[a]=c},setEditorForProperty:function(a,c){if(this.options.editorOptions[c]===b&&null!==c)throw new Error("No editor "+c+" configured");this.options.editorWidgets[a]=c},_checkSession:function(){if(Modernizr.sessionstorage){var a=this.options.storagePrefix+"Midgard.create.toolbar";sessionStorage.getItem(a)&&this._setOption("toolbar",sessionStorage.getItem(a));var b=this.options.storagePrefix+"Midgard.create.state";sessionStorage.getItem(b)&&this.setState(sessionStorage.getItem(b)),this.element.bind("midgardcreatestatechange",function(a,c){sessionStorage.setItem(b,c.state)})}},_saveButton:function(){return this.options.saveButton?this.options.saveButton:(a(".create-ui-toolbar-statustoolarea .create-ui-statustools",this.element).append(a('<li id="midgardcreate-save"><a class="create-ui-btn">Save <i class="icon-ok"></i></a></li>')),this.options.saveButton=a("#midgardcreate-save",this.element),this.options.saveButton.hide(),this.options.saveButton)},_editButton:function(){var b=this;a(".create-ui-toolbar-statustoolarea .create-ui-statustools",this.element).append(a('<li id="midgardcreate-edit"></li>')),a("#midgardcreate-edit",this.element).bind("click",function(){return"edit"===b.options.state?void b.setState("browse"):void b.setState("edit")})},_setEditButtonState:function(b){var c={edit:'<a class="create-ui-btn">Cancel <i class="icon-remove"></i></a>',browse:'<a class="create-ui-btn">Edit <i class="icon-edit"></i></a>'},d=a("#midgardcreate-edit",this.element);d&&("edit"===b&&d.addClass("selected"),d.html(c[b]))},_enableToolbar:function(){var a=this;this.element.bind("midgardtoolbarstatechange",function(b,c){Modernizr.sessionstorage&&sessionStorage.setItem(a.options.storagePrefix+"Midgard.create.toolbar",c.display),a._setOption("toolbar",c.display)}),this.element.midgardToolbar({display:this.options.toolbar,vie:this.vie})},_enableEdit:function(){this._setOption("state","edit");var b=this,c={toolbarState:b.options.display,disabled:!1,vie:b.vie,widgets:b.options.editorWidgets,editors:b.options.editorOptions,collectionWidgets:b.options.collectionWidgets};b.options.enableEditor&&(c[enableEditor]=b.options.enableEditor),b.options.disableEditor&&(c[disableEditor]=b.options.disableEditor),a("[about]",this.element).each(function(){var d=this;if(b.options.highlight){var e=function(c,e){a(e.element).is(":visible")&&e.entityElement.get(0)===d&&e.element.effect("highlight",{color:b.options.highlightColor},3e3)};a(this).bind("midgardeditableenableproperty",e)}a(this).bind("midgardeditabledisable",function(){a(this).unbind("midgardeditableenableproperty",e)}),b.options.tags&&a(this).bind("midgardeditableenable",function(c,e){c.target===d&&a(this).midgardTags({vie:b.vie,entityElement:e.entityElement,entity:e.instance})}),a(this).midgardEditable(c)}),this._trigger("statechange",null,{state:"edit"})},_disableEdit:function(){var b=this,c={disabled:!0,vie:b.vie,editorOptions:b.options.editorOptions};a("[about]",this.element).each(function(){a(this).midgardEditable(c),a(this).removeClass("ui-state-disabled")}),this._setOption("state","browse"),this._trigger("statechange",null,{state:"browse"})}})}(jQuery),function(a,b){a.widget("Midgard.midgardCollectionAdd",{addButton:null,options:{editingWidgets:null,collection:null,model:null,view:null,disabled:!1,vie:null,editableOptions:null},_create:function(){var a=this;a.options.collection.localStorage||(a.options.collection.url=a.options.model.url()),a.options.view.collection.bind("add",function(b){b.primaryCollection=a.options.collection,a.options.vie.entities.add(b),b.collection=a.options.collection}),a._bindCollectionView(a.options.view)},_bindCollectionView:function(a){var b=this;a.bind("add",function(a){b._makeEditable(a)})},_makeEditable:function(b){this.options.editableOptions.disabled=this.options.disabled,this.options.editableOptions.model=b.model,a(b.el).midgardEditable(this.options.editableOptions)},_init:function(){return this.options.disabled?void this.disable():void this.enable()},enable:function(){var b=this;b.addButton=a('<button class="btn"><i class="icon-plus"></i> Add</button>').button(),b.addButton.addClass("midgard-create-add"),b.addButton.click(function(){b.options.collection.add({})}),a(b.options.view.el).after(b.addButton)},disable:function(){this.addButton&&(this.addButton.remove(),delete this.addButton)}})}(jQuery),function(a,b){a.widget("Midgard.midgardCollectionAddBetween",a.Midgard.midgardCollectionAdd,{addButtons:[],_bindCollectionView:function(a){var b=this;a.bind("add",function(a){b._makeEditable(a),b._refreshButtons()}),a.bind("remove",function(){b._refreshButtons()})},_refreshButtons:function(){var a=this;window.setTimeout(function(){a.disable(),a.enable()},1)},prepareButton:function(b){var c=this,d=a('<button class="btn"><i class="icon-plus"></i></button>').button();return d.addClass("midgard-create-add"),d.click(function(){c.options.collection.add({},{at:b})}),d},enable:function(){var b=this,c=b.prepareButton(0);a(b.options.view.el).before(c),b.addButtons.push(c),a.each(b.options.view.entityViews,function(c,d){var e=b.options.collection.indexOf(d.model),f=b.prepareButton(e+1);a(d.el).after(f),b.addButtons.push(f)})},disable:function(){var b=this;a.each(b.addButtons,function(a,b){b.remove()}),b.addButtons=[]}})}(jQuery),function(a,b){a.widget("Midgard.midgardEditable",{options:{editables:[],collections:[],model:null,editors:{hallo:{widget:"halloWidget",options:{}}},widgets:{"default":"hallo"},collectionWidgets:{"default":"midgardCollectionAdd"},toolbarState:"full",vie:null,disabled:!1},_create:function(){if(this.vie=this.options.vie,!this.options.model){var a=this;this.vie.load({element:this.element}).from("rdfa").execute().done(function(b){a.options.model=b[0]})}},_init:function(){return this.options.disabled?void this.disable():void this.enable()},enable:function(){var b=this;this.options.model&&(this.vie.service("rdfa").findPredicateElements(this.options.model.id,a("[property]",this.element),!1).each(function(){return b._enableProperty(a(this))}),this._trigger("enable",null,{instance:this.options.model,entityElement:this.element}),_.forEach(this.vie.service("rdfa").views,function(c){if(c instanceof b.vie.view.Collection&&b.options.model===c.owner){var d=b.enableCollection({model:b.options.model,collection:c.collection,property:a(c.el).attr("rel"),view:c,element:c.el,vie:b.vie,editableOptions:b.options});b.options.collections.push(d)}}))},disable:function(){var b=this;a.each(this.options.editables,function(c,d){b.disableEditor({widget:b,editable:d,entity:b.options.model,element:a(this)})}),this.options.editables=[],a.each(this.options.collections,function(a,c){b.disableCollection({widget:b,model:b.options.model,element:c,vie:b.vie,editableOptions:b.options})}),this.options.collections=[],this._trigger("disable",null,{instance:this.options.model,entityElement:this.element})},_enableProperty:function(a){var b=this,c=this.vie.service("rdfa").getElementPredicate(a);if(!c)return!0;if(this.options.model.get(c)instanceof Array)return!0;var d=this.enableEditor({widget:this,element:a,entity:this.options.model,property:c,vie:this.vie,modified:function(d){var e={};e[c]=d,b.options.model.set(e,{silent:!0}),b._trigger("changed",null,{property:c,instance:b.options.model,element:a,entityElement:b.element})},activated:function(){b._trigger("activated",null,{property:c,instance:b.options.model,element:a,entityElement:b.element})},deactivated:function(){b._trigger("deactivated",null,{property:c,instance:b.options.model,element:a,entityElement:b.element})}});d&&this._trigger("enableproperty",null,{editable:d,property:c,instance:this.options.model,element:a,entityElement:this.element}),this.options.editables.push(d)},_editorName:function(a){if(this.options.widgets[a.property]!==b)return this.options.widgets[a.property];var c="default",d=this.options.model.get("@type");return d&&d.attributes&&d.attributes.get(a.property)&&(c=d.attributes.get(a.property).range[0]),this.options.widgets[c]!==b?this.options.widgets[c]:this.options.widgets["default"]},_editorWidget:function(a){return this.options.editors[a].widget},_editorOptions:function(a){return this.options.editors[a].options},enableEditor:function(b){var c=this._editorName(b);if(null!==c){var d=this._editorWidget(c);if(b.editorOptions=this._editorOptions(c),b.disabled=!1,"function"!=typeof a(b.element)[d])throw new Error(widgetName+" widget is not available");return a(b.element)[d](b),a(b.element).data("createWidgetName",d),a(b.element)}},disableEditor:function(b){var c=a(b.element).data("createWidgetName");b.disabled=!0,c&&(a(b.element)[c](b),a(b.element).removeClass("ui-state-disabled"))},collectionWidgetName:function(a){if(this.options.collectionWidgets[a.property]!==b)return this.options.collectionWidgets[a.property];var c="default",d=this.options.model.get("@type");return d&&d.attributes&&d.attributes.get(a.property)&&(c=d.attributes.get(a.property).range[0]),this.options.collectionWidgets[c]!==b?this.options.collectionWidgets[c]:void 0},enableCollection:function(b){var c=this.collectionWidgetName(b);if(null!==c){if(b.disabled=!1,"function"!=typeof a(b.element)[c])throw new Error(c+" widget is not available");return a(b.element)[c](b),a(b.element).data("createCollectionWidgetName",c),a(b.element)}},disableCollection:function(b){var c=a(b.element).data("createCollectionWidgetName");null!==c&&(b.disabled=!0,c&&(a(b.element)[c](b),a(b.element).removeClass("ui-state-disabled")))}})}(jQuery),function(a,b){a.widget("Create.editWidget",{options:{disabled:!1,vie:null},enable:function(){this.element.attr("contenteditable","true")},disable:function(a){this.element.attr("contenteditable","false")},_create:function(){this._registerWidget(),this._initialize()},_init:function(){return this.options.disabled?void this.disable():void this.enable()},_initialize:function(){var b=this,c=this.element.html();this.element.bind("blur keyup paste",function(d){if(!b.options.disabled){var e=a(this).html();c!==e&&(c=e,b.options.modified(e))}})},_registerWidget:function(){this.element.data("createWidgetName",this.widgetName)}})}(jQuery),function(a,b){a.widget("Create.alohaWidget",a.Create.editWidget,{enable:function(){this._initialize(),this.options.disabled=!1},disable:function(){Aloha.jQuery(this.options.element.get(0)).mahalo(),this.options.disabled=!0},_initialize:function(){var a,b=this.options,c=Aloha.jQuery(b.element.get(0)).aloha();_.each(Aloha.editables,function(b){b.obj.get(0)===c.get(0)&&(a=b)}),a&&(a.vieEntity=b.entity,Aloha.bind("aloha-editable-activated",function(c,d){d.editable===a&&b.activated()}),Aloha.bind("aloha-editable-deactivated",function(c,d){d.editable===a&&b.deactivated()}),Aloha.bind("aloha-smart-content-changed",function(c,d){if(d.editable===a){if(!d.editable.isModified())return!0;b.modified(d.editable.getContents()),d.editable.setUnmodified()}}))}})}(jQuery),
function(a,b){a.widget("Create.halloWidget",a.Create.editWidget,{options:{editorOptions:{},disabled:!0,toolbarState:"full",vie:null,entity:null},enable:function(){a(this.element).hallo({editable:!0}),this.options.disabled=!1},disable:function(){a(this.element).hallo({editable:!1}),this.options.disabled=!0},_initialize:function(){a(this.element).hallo(this.getHalloOptions());var b=this;a(this.element).bind("halloactivated",function(a,c){b.options.activated()}),a(this.element).bind("hallodeactivated",function(a,c){b.options.deactivated()}),a(this.element).bind("hallomodified",function(a,c){b.options.modified(c.content),c.editable.setUnmodified()}),a(document).bind("midgardtoolbarstatechange",function(c,d){d.display!==b.options.toolbarState&&(b.options.toolbarState=d.display,a(b.element).hallo(b.getHalloOptions()))})},getHalloOptions:function(){var b={plugins:{halloformat:{},halloblock:{},hallolists:{},hallolink:{},halloimage:{entity:this.options.entity},halloindicator:{}},buttonCssClass:"create-ui-btn-small",placeholder:"["+this.options.property+"]"};return"function"==typeof this.element.annotate&&this.options.vie.services.stanbol&&(b.plugins.halloannotate={vie:this.options.vie}),"full"===this.options.toolbarState?(b.parentElement=a(".create-ui-toolbar-dynamictoolarea .create-ui-tool-freearea"),b.toolbar="halloToolbarFixed"):(b.showAlways=!1,b.toolbar="halloToolbarContextual"),_.extend(b,this.options.editorOptions)}})}(jQuery),function(a,b){a.widget("Create.redactorWidget",a.Create.editWidget,{editor:null,options:{editorOptions:{},disabled:!0},enable:function(){a(this.element).redactor(this.getRedactorOptions()),this.options.disabled=!1},disable:function(){a(this.element).destroyEditor(),this.options.disabled=!0},_initialize:function(){var b=this;a(this.element).bind("focus",function(a){b.options.activated()})},getRedactorOptions:function(){var b=this,c={keyupCallback:function(c,d){b.options.modified(a(b.element).getCode())},execCommandCallback:function(c,d){b.options.modified(a(b.element).getCode())}};return _.extend(b.options.editorOptions,c)}})}(jQuery),function(a,b){var c=[],d=function(b,d){var e={class_prefix:"midgardNotifications",timeout:3e3,auto_show:!0,body:"",bindTo:null,gravity:"T",effects:{onShow:function(a,b){a.animate({opacity:"show"},600,b)},onHide:function(a,b){a.animate({opacity:"hide"},600,b)}},actions:[],callbacks:{}},f={},g={},h=null,i=null,j=null,k=b,l=null,m={constructor:function(a){f=_.extend(e,a||{}),g={container:f.class_prefix+"-container",item:{wrapper:f.class_prefix+"-item",arrow:f.class_prefix+"-arrow",disregard:f.class_prefix+"-disregard",content:f.class_prefix+"-content",actions:f.class_prefix+"-actions",action:f.class_prefix+"-action"}},this._generate()},getId:function(){return i},getElement:function(){return h},_generate:function(){var b,d,e=this,j=null;if(h=b=a('<div class="'+g.item.wrapper+'-outer"/>'),b.css({display:"none"}),d=a('<div class="'+g.item.wrapper+'-inner"/>'),d.appendTo(b),f.bindTo){b.addClass(g.item.wrapper+"-binded");var m=a('<div class="'+g.item.arrow+'"/>');m.appendTo(b)}else b.addClass(g.item.wrapper+"-normal");if(j=a('<div class="'+g.item.content+'"/>'),j.html(f.body),j.appendTo(d),f.actions.length){var n=a('<div class="'+g.item.actions+'"/>');n.appendTo(d),a.each(f.actions,function(b,c){var d=a('<button name="'+c.name+'" class="button-'+c.name+'">'+c.label+"</button>").button();d.bind("click",function(a){l?c.cb(a,l,e):c.cb(a,e)}),c.className&&d.addClass(c.className),n.append(d)})}h.bind("click",function(a){f.callbacks.onClick?f.callbacks.onClick(a,e):l||e.close()}),f.auto_show&&this.show(),this._setPosition(),i=c.push(this),k.append(h)},_calculatePositionForGravity:function(a,b,c,d){switch(a.find("."+g.item.arrow).addClass(g.item.arrow+"_"+b),b){case"TL":return{left:c.left,top:c.top+c.height+"px"};case"TR":return{left:c.left+c.width-d.width+"px",top:c.top+c.height+"px"};case"BL":return{left:c.left+"px",top:c.top-d.height+"px"};case"BR":return{left:c.left+c.width-d.width+"px",top:c.top-d.height+"px"};case"LT":return{left:c.left+c.width+"px",top:c.top+"px"};case"LB":return{left:c.left+c.width+"px",top:c.top+c.height-d.height+"px"};case"RT":return{left:c.left-d.width+"px",top:c.top+"px"};case"RB":return{left:c.left-d.width+"px",top:c.top+c.height-d.height+"px"};case"T":return{left:c.left+c.width/2-d.width/2+"px",top:c.top+c.height+"px"};case"R":return{left:c.left-d.width+"px",top:c.top+c.height/2-d.height/2+"px"};case"B":return{left:c.left+c.width/2-d.width/2+"px",top:c.top-d.height+"px"};case"L":return{left:c.left+c.width+"px",top:c.top+c.height/2-d.height/2+"px"}}},_isFixed:function(a){return a===document?!1:"fixed"===a.css("position")?!0:this._isFixed(a.offsetParent())},_setPosition:function(){if(f.bindTo){itemDimensions={width:h.width()?h.width():280,height:h.height()?h.height():109},j=a(f.bindTo);var b={},d={width:j.outerWidth(),height:j.outerHeight()};this._isFixed(j)?(b.position="fixed",d.left=j.offset().left,d.top=j.position().top):(b.position="absolute",d.left=j.offset().left,d.top=j.offset().top);var e=this._calculatePositionForGravity(h,f.gravity,d,itemDimensions);return b.top=e.top,b.left=e.left,void h.css(b)}f.position||(f.position="top right");var g=a(".create-ui-toolbar-wrapper").outerHeight(!0)+6;e={position:"fixed"};var i=function(b){var c=0;return a.each(b,function(a,b){b&&(c+=b.getElement().height())}),c};f.position.match(/top/)&&(e.top=g+i(c)+"px"),f.position.match(/bottom/)&&(e.bottom=c.length-1*item.height()+item.height()+10+"px"),f.position.match(/right/)&&(e.right="20px"),f.position.match(/left/)&&(e.left="20px"),h.css(e)},show:function(){var b,c,d,e,g,i,j=this;if(f.callbacks.beforeShow&&f.callbacks.beforeShow(j),f.bindTo){var k=a(f.bindTo);b=a(window).scrollTop(),c=a(window).scrollTop()+a(window).height(),e=parseFloat(h.offset().top,10),g=k.offset().top,i=k.outerHeight(),e>g&&(e=g),d=parseFloat(h.offset().top,10)+h.height(),g+i>d&&(d=g+i)}f.timeout>0&&!f.actions.length&&setTimeout(function(){j.close()},f.timeout),f.bindTo&&(b>e||e>c)||b>d||d>c?a("html, body").stop().animate({scrollTop:e},500,"easeInOutExpo",function(){f.effects.onShow(h,function(){f.callbacks.afterShow&&f.callbacks.afterShow(j)})}):f.effects.onShow(h,function(){f.callbacks.afterShow&&f.callbacks.afterShow(j)})},close:function(){var a=this;f.callbacks.beforeClose&&f.callbacks.beforeClose(a),f.effects.onHide(h,function(){f.callbacks.afterClose&&f.callbacks.afterClose(a),a.destroy()})},destroy:function(){var b=this;a.each(c,function(a,d){d&&d.getId()==b.getId()&&delete c[a]}),a(h).remove()},setStory:function(a){l=a},setName:function(a){h.addClass(g.item.wrapper+"-custom-"+a),this.name=a}};return m.constructor(d),delete m.constructor,m},e=function(b,c){var e={},f={},g={},h=null,i=null,j=null,k={constructor:function(a){f=_.extend(e,a||{})},setStoryline:function(b){var c={content:"",actions:[],show_actions:!0,notification:{},back:null,back_label:null,forward:null,forward_label:null,beforeShow:null,afterShow:null,beforeClose:null,afterClose:null};g={},_current_item=null,h=null,i=null,j=null;var d=this;return a.each(b,function(b,e){var f=a.extend({},c,e);f.name=b;var k=a.extend({},c.notification,e.notification||{});k.body=f.content,k.auto_show=!1,f.actions.length&&(k.delay=0),k.callbacks={beforeShow:function(a){f.beforeShow&&f.beforeShow(a,d)},afterShow:function(a){f.afterShow&&f.afterShow(a,d)},beforeClose:function(a){f.beforeClose&&f.beforeClose(a,d)},afterClose:function(a){f.afterClose&&f.afterClose(a,d),h=a.name}},k.actions=[],f.show_actions&&(f.back&&(back_label=f.back_label,back_label||(back_label="Back"),k.actions.push({name:"back",label:back_label,cb:function(a,b,c){b.previous()}})),f.forward&&(forward_label=f.forward_label,forward_label||(forward_label="Back"),k.actions.push({name:"forward",label:forward_label,cb:function(a,b,c){b.next()}})),f.actions.length&&a.each(f.actions,function(a,b){k.actions.push(f.actions[a])})),i||(i=b),j=b,f.notification=k,g[b]=f}),g},start:function(){this._showNotification(g[i])},stop:function(){_current_item.close(),_current_item=null,h=null},next:function(){_current_item.close(),g[_current_item.name].forward?(next_item=g[_current_item.name].forward,this._showNotification(g[next_item])):this._showNotification(g[j])},previous:function(){h?(_current_item.close(),g[_current_item.name].back?(prev_item=g[_current_item.name].back,this._showNotification(g[prev_item])):this._showNotification(g[h])):this.stop()},_showNotification:function(b){return _current_item=new d(a("body"),b.notification),_current_item.setStory(this),_current_item.setName(b.name),_current_item.show(),_current_item}};return k.constructor(b),delete k.constructor,c&&k.setStoryline(c),k},f={start:{content:"Welcome to CreateJS tutorial!",forward:"toolbar_toggle",forward_label:"Start tutorial",actions:[{name:"quit",label:"Quit",cb:function(a,b,c){b.stop()}}]},toolbar_toggle:{content:"This is the CreateJS toolbars toggle button.<br />You can hide and show the full toolbar by clicking here.<br />Try it now.",forward:"edit_button",show_actions:!1,afterShow:function(b,c){a("body").bind("midgardtoolbarstatechange",function(b,d){"full"==d.display&&(c.next(),a("body").unbind("midgardtoolbarstatechange"))})},notification:{bindTo:"#midgard-bar-hidebutton",timeout:0,gravity:"TL"}},edit_button:{content:"This is the edit button.<br />Try it now.",show_actions:!1,afterShow:function(b,c){a("body").bind("midgardcreatestatechange",function(b,d){"edit"==d.state&&(c.next(),a("body").unbind("midgardcreatestatechange"))})},notification:{bindTo:".ui-button[for=midgardcreate-edit]",timeout:0,gravity:"TL"}},end:{content:"Thank you for watching!<br />Happy content editing times await you!"}};a.widget("Midgard.midgardNotifications",{options:{notification_defaults:{class_prefix:"midgardNotifications",position:"top right"}},_create:function(){this.classes={container:this.options.notification_defaults.class_prefix+"-container"},a("."+this.classes.container,this.element).length?(this.container=a("."+this.classes.container,this.element),this._parseFromDOM()):(this.container=a('<div class="'+this.classes.container+'" />'),this.element.append(this.container))},destroy:function(){this.container.remove(),a.Widget.prototype.destroy.call(this)},_init:function(){},_parseFromDOM:function(a){},showStory:function(a,b){var c=new e(a,b);return c.start(),c},create:function(b){return b=a.extend({},this.options.notification_defaults,b||{}),item=new d(this.container,b),item.show(),item},showTutorial:function(){this.showStory({},f)}})}(jQuery),function(a,b){a.widget("Midgard.midgardStorage",{changedModels:[],saveEnabled:!0,options:{localStorage:!1,removeLocalstorageOnIgnore:!0,vie:null,url:"",autoSave:!1,autoSaveInterval:5e3,saveReferencedNew:!1,saveReferencedChanged:!1},_create:function(){var b=this;Modernizr.localstorage&&(this.options.localStorage=!0),this.vie=this.options.vie,this.vie.entities.bind("add",function(a){a.url=b.options.url,a.toJSON=a.toJSONLD}),a("#midgardcreate-save").click(function(){b._saveRemote({success:function(){a("#midgardcreate-save").button({disabled:!0})},error:function(){}})}),b._bindEditables(),b.options.autoSave&&b._autoSave()},_autoSave:function(){var b=this;b.saveEnabled=!0;var c=function(){b.saveEnabled&&0!==b.changedModels.length&&b._saveRemote({success:function(){a("#midgardcreate-save").button({disabled:!0})},error:function(){}})},d=window.setInterval(c,b.options.autoSaveInterval);this.element.bind("startPreventSave",function(){d&&(window.clearInterval(d),d=null),b.disableSave()}),this.element.bind("stopPreventSave",function(){d||(d=window.setInterval(c,b.options.autoSaveInterval)),b.enableSave()})},enableSave:function(){this.saveEnabled=!0},disableSave:function(){this.saveEnabled=!1},_bindEditables:function(){var b,c=this,d=[];c.element.bind("midgardeditablechanged",function(b,d){-1===_.indexOf(c.changedModels,d.instance)&&c.changedModels.push(d.instance),c._saveLocal(d.instance),a("#midgardcreate-save").button({disabled:!1})}),c.element.bind("midgardeditabledisable",function(b,d){c._restoreLocal(d.instance),a("#midgardcreate-save").hide()}),c.element.bind("midgardeditableenable",function(b,e){a("#midgardcreate-save").button({disabled:!0}),a("#midgardcreate-save").show(),e.instance._originalAttributes||(e.instance._originalAttributes=_.clone(e.instance.attributes)),!e.instance.isNew()&&c._checkLocal(e.instance)&&d.push(e.instance)}),c.element.bind("midgardcreatestatechange",function(e,f){return"browse"===f.state||0===d.length?(d=[],void(b&&b.close())):void(b=a("body").data("midgardCreate").showNotification({bindTo:"#midgardcreate-edit a",gravity:"TR",body:d.length+" items on this page have local modifications",timeout:0,actions:[{name:"restore",label:"Restore",cb:function(){_.each(d,function(a){c._readLocal(a)}),d=[],b=null},className:"create-ui-btn"},{name:"ignore",label:"Ignore",cb:function(a,e){c.options.removeLocalstorageOnIgnore&&_.each(d,function(a){c._removeLocal(a)}),e.close(),d=[],b=null},className:"create-ui-btn"}]}))}),c.element.bind("midgardstorageloaded",function(b,d){-1===_.indexOf(c.changedModels,d.instance)&&c.changedModels.push(d.instance),a("#midgardcreate-save").button({disabled:!1})})},_saveRemote:function(b){var c=this;if(0!==c.changedModels.length){c._trigger("save",null,{models:c.changedModels});var d=c.changedModels.length;d>1?notification_msg=d+" objects saved successfully":(subject=c.changedModels[0].getSubjectUri(),notification_msg="Object with subject "+subject+" saved successfully"),c.disableSave(),_.forEach(c.changedModels,function(e,f){_.each(e.attributes,function(a,b){a&&a.isCollection&&a.each(function(a){return-1===c.changedModels.indexOf(a)?a.isNew()&&c.options.saveReferencedNew?a.save():a.hasChanged()&&c.options.saveReferencedChanged?a.save():void 0:void 0})}),e.save(null,{success:function(){e._originalAttributes=_.clone(e.attributes),c._removeLocal(e),c.changedModels.splice(f,1),d--,0>=d&&(c._trigger("saved",null,{}),b.success(),a("body").data("midgardCreate").showNotification({body:notification_msg}),c.enableSave())},error:function(d,f){notification_msg="Error occurred while saving",f.responseText&&(notification_msg=notification_msg+":<br />"+f.responseText),b.error(),a("body").data("midgardCreate").showNotification({body:notification_msg}),c._trigger("error",null,{instance:e})}})})}},_saveLocal:function(a){if(this.options.localStorage){if(a.isNew()){if(!a.primaryCollection)return;return this._saveLocalReferences(a.primaryCollection.subject,a.primaryCollection.predicate,a)}localStorage.setItem(a.getSubjectUri(),JSON.stringify(a.toJSONLD()))}},_getReferenceId:function(a,b){return a.id+":"+b},_saveLocalReferences:function(a,b,c){if(this.options.localStorage&&a&&b){var d=a+":"+b,e=c.toJSONLD();if(localStorage.getItem(d)){var f=JSON.parse(localStorage.getItem(d)),g=_.pluck(f,"@").indexOf(e["@"]);return-1!==g?f[g]=e:f.push(e),void localStorage.setItem(d,JSON.stringify(f))}localStorage.setItem(d,JSON.stringify([e]))}},_checkLocal:function(a){if(!this.options.localStorage)return!1;var b=localStorage.getItem(a.getSubjectUri());return b?!0:!1},_readLocal:function(a){if(this.options.localStorage){var b=localStorage.getItem(a.getSubjectUri());if(b){a._originalAttributes||(a._originalAttributes=_.clone(a.attributes));var c=JSON.parse(b),d=this.vie.entities.addOrUpdate(c,{overrideAttributes:!0});this._trigger("loaded",null,{instance:d})}}},_readLocalReferences:function(a,b,c){if(this.options.localStorage){var d=this._getReferenceId(a,b),e=localStorage.getItem(d);e&&c.add(JSON.parse(e))}},_restoreLocal:function(b){var c=this;if(b)return _.each(b.attributes,function(a,b){a instanceof c.vie.Collection&&a.forEach(function(b){b.isNew()&&a.remove(b)})}),a.isEmptyObject(b.changedAttributes())?void(b._originalAttributes&&b.set(b._originalAttributes)):void b.set(b.previousAttributes())},_removeLocal:function(a){this.options.localStorage&&localStorage.removeItem(a.getSubjectUri())}})}(jQuery),function(a,b){a.widget("Midgard.midgardTags",{enhanced:!1,options:{vie:null,entity:null,element:null,entityElement:null,parentElement:".create-ui-tool-metadataarea",predicate:"skos:related"},_init:function(){var b=this;this.vie=this.options.vie,this.entity=this.options.entity,this.element=this.options.element,a(this.options.entityElement).bind("midgardeditableactivated",function(a,c){c.instance===b.options.entity&&(b._renderWidget(),b.loadTags())}),a(this.options.entityElement).bind("midgardeditablechanged",function(a,c){c.instance===b.options.entity&&(b.enhanced=!1)}),this._listenAnnotate(this.options.entityElement)},_normalizeSubject:function(a){return this.entity.isReference(a)?a:("http://"!==a.substr(0,7)&&(a="urn:tag:"+a),a=this.entity.toReference(a))},_tagLabel:function(a){return a=this.entity.fromReference(a),"urn:tag:"===a.substr(0,8)&&(a=a.substr(8,a.length-1)),"http://"==a.substring(0,7)&&(a=a.substr(a.lastIndexOf("/")+1,a.length-1),a=a.replace(/_/g," ")),a},addTag:function(a,c,d){c===b&&(c=this._tagLabel(a)),a=this._normalizeSubject(a),d&&!this.entity.isReference(d)&&(d=this.entity.toReference(d));var e=this.vie.entities.addOrUpdate({"@subject":a,"rdfs:label":c,"@type":d}),f=this.options.entity.get(this.options.predicate);f?f.isCollection||(f=new this.vie.Collection(_.map(f,function(a){return a.isEntity?a:{"@subject":a}})),f.vie=this.options.vie,this.options.entity.set(this.options.predicate,f)):(f=new this.vie.Collection,f.vie=this.options.vie,this.options.entity.set(this.options.predicate,f)),f.addOrUpdate(e),this.options.entityElement.trigger("midgardeditablechanged",{instance:this.options.entity})},removeTag:function(a){var b=this.options.entity.get(this.options.predicate);if(b){a=this._normalizeSubject(a);var c=b.get(a);c&&(b.remove(a),this.options.entityElement.trigger("midgardeditablechanged",{instance:this.options.entity}))}},_listenAnnotate:function(a){var b=this;a.bind("annotateselect",function(a,c){b.addTag(c.linkedEntity.uri,c.linkedEntity.label,c.linkedEntity.type[0])}),a.bind("annotateremove",function(a,c){b.removeTag(c.linkedEntity.uri)})},_prepareEditor:function(b){var c=a('<div class="dropdown-menu"></div>'),d=a('<div class="create-ui-tags articleTags"><h3>Article tags</h3><input type="text" class="tags" value="" /></div>'),e=a('<div class="create-ui-tags suggestedTags"><h3>Suggested tags</h3><input type="text" class="tags" value="" /></div>');a("input",d).attr("id","articleTags-"+this.entity.cid),a("input",e).attr("id","suggestedTags-"+this.entity.cid),c.append(d),c.append(e),c.hide();var f=b.position();return c.css("position","absolute"),c.css("left",f.left),c},_renderWidget:function(){var b=this,c=(this.entity.getSubject(),a('<button class="create-ui-btn"><i class="icon-tags"></i> Tags</a>').button()),d=a(this.options.parentElement);d.empty(),d.append(c),d.show();var e=this._prepareEditor(c);c.after(e),this.articleTags=a(".articleTags input",e).tagsInput({width:"auto",height:"auto",onAddTag:function(a){b.addTag(a)},onRemoveTag:function(a){b.removeTag(a)}});var f=function(){var c=a.trim(a(this).text());b.articleTags.addTag(c),b.suggestedTags.removeTag(c)};this.suggestedTags=a(".suggestedTags input",e).tagsInput({width:"auto",height:"auto",interactive:!1,onAddTag:function(b){a(".suggestedTags .tag span",e).unbind("click",f),a(".suggestedTags .tag span",e).bind("click",f)},onRemoveTag:function(b){a(".suggestedTags .tag span",e).unbind("click",f),a(".suggestedTags .tag span",e).bind("click",f)},remove:!1}),c.bind("click",function(){e.toggle()})},loadTags:function(){var b=this,c=this.entity.get(this.options.predicate);c&&(_.isString(c)?b.articleTags.addTag(b._tagLabel(c)):c.isCollection?c.each(function(a){b.articleTags.addTag(a.get("rdfs:label"))}):_.each(c,function(a){b.articleTags.addTag(b._tagLabel(a))})),this.vie.services.stanbol?b.enhance():a(".suggestedTags",b.element).hide()},_getLabelLang:function(a){if(!_.isArray(a))return null;var b;return _.each(a,function(a){"en"===a["@language"]&&(b=a["@value"])}),b},_addEnhancement:function(a){if(a.isEntity){var b=this._getLabelLang(a.get("rdfs:label"));if(b){var c=this.options.entity.get(this.options.predicate);c&&c.isCollection&&-1!==c.indexOf(a)||this.suggestedTags.addTag(b)}}},enhance:function(){if(!this.enhanced){this.enhanced=!0;var b=this;this.vie.analyze({element:a("[property]",this.options.entityElement)}).using(["stanbol"]).execute().success(function(a){_.each(a,function(a){b._addEnhancement(a)})}).fail(function(a){})}}})}(jQuery),function(a,b){a.widget("Midgard.midgardToolbar",{options:{display:"full"},_create:function(){this.element.append(this._getMinimized()),this.element.append(this._getFull());var b=this;a(".create-ui-toggle").click(function(){"full"===b.options.display?(b.hide(),b.options.display="minimized"):(b.show(),b.options.display="full"),b._trigger("statechange",null,b.options)}),this._setDisplay(this.options.display),b=this,a(this.element).bind("midgardcreatestatechange",function(a,c){"browse"==c.state&&(b._clearWorkflows(),b._clearMetadata())}),a(this.element).bind("midgardworkflowschanged",function(c,d){b._clearWorkflows(),d.workflows.length&&d.workflows.each(function(c){html=a("body").data().midgardWorkflows.prepareItem(d.instance,c,function(a,c){b._clearWorkflows(),a}),a(".create-ui-tool-workflowarea",this.element).append(html)})})},_setOption:function(a,b){"display"===a&&this._setDisplay(b),this.options[a]=b},_setDisplay:function(b){"minimized"===b&&a("div.create-ui-toolbar-wrapper").hide()},hide:function(){a("div.create-ui-toolbar-wrapper").fadeToggle("fast","linear")},show:function(){a("div.create-ui-toolbar-wrapper").fadeToggle("fast","linear")},_getMinimized:function(){return a('<div class="create-ui-logo"><a class="create-ui-toggle" id="create-ui-toggle-toolbar"></a></div>')},_getFull:function(){return a('<div class="create-ui-toolbar-wrapper"><div class="create-ui-toolbar-toolarea"><div class="create-ui-toolbar-dynamictoolarea"><ul class="create-ui-dynamictools create-ui-toolset-1"><li class="create-ui-tool-metadataarea"></li><li class="create-ui-tool-workflowarea"></li><li class="create-ui-tool-freearea"></li></ul></div><div class="create-ui-toolbar-statustoolarea"><ul class="create-ui-statustools"></ul></div></div></div>')},_clearWorkflows:function(){a(".create-ui-tool-workflowarea",this.element).empty()},_clearMetadata:function(){a(".create-ui-tool-metadataarea",this.element).empty()}})}(jQuery),function(a,b){a.widget("Midgard.midgardWorkflows",{options:{url:function(a){},renderers:{button:function(b,c,d,e){return button_id="midgardcreate-workflow_"+c.get("name"),html=a('<button class="create-ui-btn" id="'+button_id+'">'+c.get("label")+"</button>").button(),html.bind("click",function(a){d(b,c,e)}),html}},action_types:{backbone_save:function(a,b,c){copy_of_url=a.url,original_model=a.clone(),original_model.url=copy_of_url,action=b.get("action"),action.url&&(a.url=action.url),original_model.save(null,{success:function(b){a.url=copy_of_url,a.change(),c(null,a)},error:function(b,d){a.url=copy_of_url,a.change(),c(d,a)}})},backbone_destroy:function(a,b,c){copy_of_url=a.url,original_model=a.clone(),original_model.url=copy_of_url,action=b.get("action"),action.url&&(a.url=action.url),a.destroy({success:function(b){a.url=copy_of_url,a.change(),c(null,b)},error:function(b,d){a.url=copy_of_url,a.change(),c(d,a)}})},http:function(b,c,d){return action=c.get("action"),action.url?(wf_opts={},action.http&&(wf_opts=action.http),ajax_options=a.extend({url:action.url,type:"POST",data:b.toJSON(),success:function(){b.fetch({success:function(a){d(null,a)},error:function(a,b){d(b,a)}})}},wf_opts),void a.ajax(ajax_options)):d("No action url defined!")}}},_init:function(){this._renderers={},this._action_types={},this._parseRenderersAndTypes(),this._last_instance=null,this.ModelWorkflowModel=Backbone.Model.extend({defaults:{name:"",label:"",type:"button",action:{type:"backbone_save"}}}),this.workflows={};var b=this;a(this.element).bind("midgardeditableactivated",function(a,c){b._fetchWorkflows(c.instance)})},_fetchWorkflows:function(a){var b=this;return a.isNew()?void b._trigger("changed",null,{instance:a,workflows:[]}):b._last_instance==a?void(b.workflows[a.cid]&&b._trigger("changed",null,{instance:a,workflows:b.workflows[a.cid]})):(b._last_instance=a,b.workflows[a.cid]?void b._trigger("changed",null,{instance:a,workflows:b.workflows[a.cid]}):void(b.options.url?b._fetchModelWorkflows(a):(flows=new(b._generateCollectionFor(a))([],{}),b._trigger("changed",null,{instance:a,workflows:flows}))))},_parseRenderersAndTypes:function(){var b=this;a.each(this.options.renderers,function(a,c){b.setRenderer(a,c)}),a.each(this.options.action_types,function(a,c){b.setActionType(a,c)})},setRenderer:function(a,b){this._renderers[a]=b},getRenderer:function(a){return this._renderers[a]?this._renderers[a]:!1},setActionType:function(a,b){this._action_types[a]=b},getActionType:function(a){return this._action_types[a]},prepareItem:function(a,b,c){var d=this;return renderer=this.getRenderer(b.get("type")),action_type_cb=this.getActionType(b.get("action").type),renderer(a,b,action_type_cb,function(e,f){delete d.workflows[a.cid],d._last_instance=null,"backbone_destroy"!==b.get("action").type&&d._fetchModelWorkflows(a),c(e,f)})},_generateCollectionFor:function(a){var b={model:this.ModelWorkflowModel};return this.options.url&&(b.url=this.options.url(a)),Backbone.Collection.extend(b)},_fetchModelWorkflows:function(a){if(!a.isNew()){var b=this;b.workflows[a.cid]=new(this._generateCollectionFor(a))([],{}),b.workflows[a.cid].fetch({success:function(c){b.workflows[a.cid].reset(c.models),b._trigger("changed",null,{instance:a,workflows:b.workflows[a.cid]})},error:function(a,b){}})}}})}(jQuery);var app=angular.module("tutorialWebApp",["ngRoute","ngSanitize"]);app.config(["$routeProvider",function(a){a.when("/",{templateUrl:themeularData.root+"partials/home.html",controller:"HomeCtrl"}).when("/page/:pageID",{templateUrl:themeularData.root+"partials/page-template.html",controller:"PageCtrl"}).when("/about",{templateUrl:themeularData.root+"partials/about.html",controller:"PageCtrl"}).when("/faq",{templateUrl:themeularData.root+"partials/faq.html",controller:"PageCtrl"}).when("/pricing",{templateUrl:themeularData.root+"partials/pricing.html",controller:"PageCtrl"}).when("/services",{templateUrl:themeularData.root+"partials/services.html",controller:"PageCtrl"}).when("/contact",{templateUrl:themeularData.root+"partials/contact.html",controller:"PageCtrl"}).when("/blog",{templateUrl:themeularData.root+"partials/blog.html",controller:"BlogCtrl"}).when("/blog/post",{templateUrl:themeularData.root+"partials/blog_item.html",controller:"BlogCtrl"}).otherwise("/404",{templateUrl:themeularData.root+"partials/404.html",controller:"PageCtrl"})}]),app.controller("BlogCtrl",function(){console.log("Blog Controller reporting for duty.")}),app.controller("PageCtrl",["$scope","$route","$routeParams","$http","$location",function(a,b,c,d,e){console.log("Page Controller reporting for duty."),a.deletePage=function(b,c,f,g){return swal({title:c,text:f,type:g,showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel",closeOnConfirm:!1,closeOnCancel:!1},function(b){b?d.post(themeularData.ajax_url+"?_wp_json_nonce="+themeularData.nonce,a,{params:{action:"delete_post_type",post_id:a.page_data.id,nonce:themeularData.nonce}}).then(function(b){console.log(b),"1"==b.data?(swal({type:"success",title:"Page Deleted",text:"",timer:1500,showConfirmButton:!1}),setTimeout(function(){e.path("/"),a.$apply()},1500)):swal({type:"error",title:"Security Error",text:b.data})}):swal("Cancelled","Delete cancelled.","error")}),!1},d.post(themeularData.ajax_url,a,{params:{action:"user_authenticated"}}).then(function(b){a.user_authenticated=b}),d.get(themeularData.site_url+"wp/v2/pages/"+c.pageID+"?_wp_json_nonce="+themeularData.nonce).success(function(b){a.page_data=b,console.log(a)}),d.post(themeularData.ajax_url,a,{params:{action:"user_authenticated"}}).then(function(b){a.user_authenticated=b})}]),app.controller("navCtrl",["$scope","$http",function(a,b){console.log("Main Nav Controller reporting for duty."),console.log(a),b.get(themeularData.site_url+"wp-themeular/v1/menu-location/main_nav").success(function(b){a.menu_items=b,console.log(b)})}]),app.controller("HomeCtrl",["$scope",function(a){console.log("Home Controller reporting for duty."),jQuery(".carousel").carousel({interval:5e3}),jQuery(".tooltip-social").tooltip({selector:"a[data-toggle=tooltip]"})}]),app.filter("reverseOrder",function(){return function(a){return"undefined"!=typeof a?a.slice().reverse():void 0}}),jQuery(document).ready(function(){jQuery("body").midgardCreate({url:function(){return"javascript:false;"},collectionWidgets:{"default":"midgardCollectionAdd","skos:related":null},stanbolUrl:"http://dev.iks-project.eu:8081"}),jQuery("body").midgardCreate("configureEditor","title","halloWidget",{plugins:{halloformat:{},halloblacklist:{tags:["br"]}}}),jQuery("body").midgardCreate("setEditorForProperty","dcterms:title","title"),jQuery("body").midgardCreate("setEditorForProperty","dcterms:author",null)}),Backbone.sync=function(a,b,c){console&&console.log&&console.log("Model contents",b.toJSONLD()),c.success(b)},window.Modernizr=function(a,b,c){function d(){j.inputtypes=function(a){for(var d,e,f,g=0,h=a.length;h>g;g++)p.setAttribute("type",e=a[g]),d="text"!==p.type,d&&(p.value=q,p.style.cssText="position:absolute;visibility:hidden;",/^range$/.test(e)&&p.style.WebkitAppearance!==c?(l.appendChild(p),f=b.defaultView,d=f.getComputedStyle&&"textfield"!==f.getComputedStyle(p,null).WebkitAppearance&&0!==p.offsetHeight,l.removeChild(p)):/^(search|tel)$/.test(e)||(/^(url|email)$/.test(e)?d=p.checkValidity&&p.checkValidity()===!1:/^color$/.test(e)?(l.appendChild(p),l.offsetWidth,d=p.value!=q,l.removeChild(p)):d=p.value!=q)),s[a[g]]=!!d;return s}("search tel url email datetime date month week time datetime-local number range color".split(" "))}function e(a,b){return typeof a===b}function f(a){o.cssText=a}var g,h,i="2.0.6",j={},k=!0,l=b.documentElement,m=(b.head||b.getElementsByTagName("head")[0],"modernizr"),n=b.createElement(m),o=n.style,p=b.createElement("input"),q=":)",r=(Object.prototype.toString,{}),s={},t=[],u=function(){function a(a,f){f=f||b.createElement(d[a]||"div"),a="on"+a;var g=a in f;return g||(f.setAttribute||(f=b.createElement("div")),f.setAttribute&&f.removeAttribute&&(f.setAttribute(a,""),g=e(f[a],"function"),e(f[a],c)||(f[a]=c),f.removeAttribute(a))),f=null,g}var d={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return a}(),v={}.hasOwnProperty;h=e(v,c)||e(v.call,c)?function(a,b){return b in a&&e(a.constructor.prototype[b],c)}:function(a,b){return v.call(a,b)},r.draganddrop=function(){return u("dragstart")&&u("drop")},r.localstorage=function(){try{return!!localStorage.getItem}catch(a){return!1}},r.sessionstorage=function(){try{return!!sessionStorage.getItem}catch(a){return!1}};for(var w in r)h(r,w)&&(g=w.toLowerCase(),j[g]=r[w](),t.push((j[g]?"":"no-")+g));return j.input||d(),f(""),n=p=null,a.attachEvent&&function(){var a=b.createElement("div");return a.innerHTML="<elem></elem>",1!==a.childNodes.length}()&&function(a,b){function d(a){for(var b=-1;++b<i;)a.createElement(h[b])}a.iepp=a.iepp||{};var e,f=a.iepp,g=f.html5elements||"abbr|article|aside|audio|canvas|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",h=g.split("|"),i=h.length,j=new RegExp("(^|\\s)("+g+")","gi"),k=new RegExp("<(/*)("+g+")","gi"),l=/^\s*[\{\}]\s*$/,m=new RegExp("(^|[^\\n]*?\\s)("+g+")([^\\n]*)({[\\n\\w\\W]*?})","gi"),n=b.createDocumentFragment(),o=b.documentElement,p=o.firstChild,q=b.createElement("body"),r=b.createElement("style"),s=/print|all/;f.getCSS=function(a,b){if(a+""===c)return"";for(var d,e=-1,g=a.length,h=[];++e<g;)d=a[e],d.disabled||(b=d.media||b,s.test(b)&&h.push(f.getCSS(d.imports,b),d.cssText),b="all");return h.join("")},f.parseCSS=function(a){for(var b,c=[];null!=(b=m.exec(a));)c.push(((l.exec(b[1])?"\n":b[1])+b[2]+b[3]).replace(j,"$1.iepp_$2")+b[4]);
return c.join("\n")},f.writeHTML=function(){var a=-1;for(e=e||b.body;++a<i;)for(var c=b.getElementsByTagName(h[a]),d=c.length,f=-1;++f<d;)c[f].className.indexOf("iepp_")<0&&(c[f].className+=" iepp_"+h[a]);n.appendChild(e),o.appendChild(q),q.className=e.className,q.id=e.id,q.innerHTML=e.innerHTML.replace(k,"<$1font")},f._beforePrint=function(){r.styleSheet.cssText=f.parseCSS(f.getCSS(b.styleSheets,"all")),f.writeHTML()},f.restoreHTML=function(){q.innerHTML="",o.removeChild(q),o.appendChild(e)},f._afterPrint=function(){f.restoreHTML(),r.styleSheet.cssText=""},d(b),d(n),f.disablePP||(p.insertBefore(r,p.firstChild),r.media="print",r.className="iepp-printshim",a.attachEvent("onbeforeprint",f._beforePrint),a.attachEvent("onafterprint",f._afterPrint))}(a,b),j._version=i,j.hasEvent=u,l.className=l.className.replace(/\bno-js\b/,"")+(k?" js "+t.join(" "):""),j}(this,this.document),function(a,b,c){function d(a){return!a||"loaded"==a||"complete"==a}function e(){for(var a=1,b=-1;r.length-++b&&(!r[b].s||(a=r[b].r)););a&&h()}function f(a){var c,f=b.createElement("script");f.src=a.s,f.onreadystatechange=f.onload=function(){!c&&d(f.readyState)&&(c=1,e(),f.onload=f.onreadystatechange=null)},o(function(){c||(c=1,e())},m.errorTimeout),a.e?f.onload():p.parentNode.insertBefore(f,p)}function g(a){var c,d=b.createElement("link");if(d.href=a.s,d.rel="stylesheet",d.type="text/css",a.e||!x&&!t)d.onload=function(){c||(c=1,o(function(){e()},0))},a.e&&d.onload();else{var f=function(a){o(function(){if(!c)try{a.sheet.cssRules.length?(c=1,e()):f(a)}catch(b){1e3==b.code||"security"==b.message||"denied"==b.message?(c=1,o(function(){e()},0)):f(a)}},0)};f(d)}o(function(){c||(c=1,e())},m.errorTimeout),!a.e&&p.parentNode.insertBefore(d,p)}function h(){var a=r.shift();s=1,a?a.t?o(function(){"c"==a.t?g(a):f(a)},0):(a(),e()):s=0}function i(a,c,f,g,i,j){function k(){!n&&d(l.readyState)&&(q.r=n=1,!s&&e(),l.onload=l.onreadystatechange=null,o(function(){v.removeChild(l)},0))}var l=b.createElement(a),n=0,q={t:f,s:c,e:j};l.src=l.data=c,!u&&(l.style.display="none"),l.width=l.height="0","object"!=a&&(l.type=f),l.onload=l.onreadystatechange=k,"img"==a?l.onerror=k:"script"==a&&(l.onerror=function(){q.e=q.r=1,h()}),r.splice(g,0,q),v.insertBefore(l,u?null:p),o(function(){n||(v.removeChild(l),q.r=q.e=n=1,e())},m.errorTimeout)}function j(a,b,c){var d="c"==b?A:z;return s=0,b=b||"j",D(a)?i(d,a,b,this.i++,n,c):(r.splice(this.i++,0,a),1==r.length&&h()),this}function k(){var a=m;return a.loader={load:j,i:0},a}var l,m,n=b.documentElement,o=a.setTimeout,p=b.getElementsByTagName("script")[0],q={}.toString,r=[],s=0,t="MozAppearance"in n.style,u=t&&!!b.createRange().compareNode,v=u?n:p.parentNode,w=a.opera&&"[object Opera]"==q.call(a.opera),x="webkitAppearance"in n.style,y=x&&"async"in b.createElement("script"),z=t?"object":w||y?"img":"script",A=x?"img":z,B=Array.isArray||function(a){return"[object Array]"==q.call(a)},C=function(a){return Object(a)===a},D=function(a){return"string"==typeof a},E=function(a){return"[object Function]"==q.call(a)},F=[],G={};m=function(a){function b(a){var b,c,d=a.split("!"),e=F.length,f=d.pop(),g=d.length,h={url:f,origUrl:f,prefixes:d};for(c=0;g>c;c++)b=G[d[c]],b&&(h=b(h));for(c=0;e>c;c++)h=F[c](h);return h}function d(a,d,e,f,g){var h=b(a),i=h.autoCallback;if(!h.bypass){if(d&&(d=E(d)?d:d[a]||d[f]||d[a.split("/").pop().split("?")[0]]),h.instead)return h.instead(a,d,e,f,g);e.load(h.url,h.forceCSS||!h.forceJS&&/css$/.test(h.url)?"c":c,h.noexec),(E(d)||E(i))&&e.load(function(){k(),d&&d(h.origUrl,g,f),i&&i(h.origUrl,g,f)})}}function e(a,b){function c(a){if(D(a))d(a,i,b,0,f);else if(C(a))for(e in a)a.hasOwnProperty(e)&&d(a[e],i,b,e,f)}var e,f=!!a.test,g=f?a.yep:a.nope,h=a.load||a.both,i=a.callback;c(g),c(h),a.complete&&b.load(a.complete)}var f,g,h=this.yepnope.loader;if(D(a))d(a,0,h,0);else if(B(a))for(f=0;f<a.length;f++)g=a[f],D(g)?d(g,0,h,0):B(g)?m(g):C(g)&&e(g,h);else C(a)&&e(a,h)},m.addPrefix=function(a,b){G[a]=b},m.addFilter=function(a){F.push(a)},m.errorTimeout=1e4,null==b.readyState&&b.addEventListener&&(b.readyState="loading",b.addEventListener("DOMContentLoaded",l=function(){b.removeEventListener("DOMContentLoaded",l,0),b.readyState="complete"},0)),a.yepnope=k()}(this,this.document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))},window.rangy=function(){function a(a,b){var c=typeof a[b];return"function"==c||!("object"!=c||!a[b])||"unknown"==c}function b(a,b){return!("object"!=typeof a[b]||!a[b])}function c(a,b){return"undefined"!=typeof a[b]}function d(a){return function(b,c){for(var d=c.length;d--;)if(!a(b,c[d]))return!1;return!0}}function e(a){return a&&m(a,l)&&o(a,k)}function f(a){window.alert("Rangy not supported in your browser. Reason: "+a),p.initialized=!0,p.supported=!1}function g(){if(!p.initialized){var c,d=!1,g=!1;for(a(document,"createRange")&&(c=document.createRange(),m(c,j)&&o(c,i)&&(d=!0),c.detach()),(c=b(document,"body")?document.body:document.getElementsByTagName("body")[0])&&a(c,"createTextRange")&&(c=c.createTextRange(),e(c)&&(g=!0)),!d&&!g&&f("Neither Range nor TextRange are implemented"),p.initialized=!0,p.features={implementsDomRange:d,implementsTextRange:g},d=r.concat(q),g=0,c=d.length;c>g;++g)try{d[g](p)}catch(h){b(window,"console")&&a(window.console,"log")&&window.console.log("Init listener threw an exception. Continuing.",h)}}}function h(a){this.name=a,this.supported=this.initialized=!1}var i=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer","START_TO_START","START_TO_END","END_TO_START","END_TO_END"],j=["setStart","setStartBefore","setStartAfter","setEnd","setEndBefore","setEndAfter","collapse","selectNode","selectNodeContents","compareBoundaryPoints","deleteContents","extractContents","cloneContents","insertNode","surroundContents","cloneRange","toString","detach"],k=["boundingHeight","boundingLeft","boundingTop","boundingWidth","htmlText","text"],l=["collapse","compareEndPoints","duplicate","getBookmark","moveToBookmark","moveToElementText","parentElement","pasteHTML","select","setEndPoint","getBoundingClientRect"],m=d(a),n=d(b),o=d(c),p={version:"1.2.3",initialized:!1,supported:!0,util:{isHostMethod:a,isHostObject:b,isHostProperty:c,areHostMethods:m,areHostObjects:n,areHostProperties:o,isTextRange:e},features:{},modules:{},config:{alertOnWarn:!1,preferTextRange:!1}};p.fail=f,p.warn=function(a){a="Rangy warning: "+a,p.config.alertOnWarn?window.alert(a):"undefined"!=typeof window.console&&"undefined"!=typeof window.console.log&&window.console.log(a)},{}.hasOwnProperty?p.util.extend=function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])}:f("hasOwnProperty not supported");var q=[],r=[];p.init=g,p.addInitListener=function(a){p.initialized?a(p):q.push(a)};var s=[];p.addCreateMissingNativeApiListener=function(a){s.push(a)},p.createMissingNativeApi=function(a){a=a||window,g();for(var b=0,c=s.length;c>b;++b)s[b](a)},h.prototype.fail=function(a){throw this.initialized=!0,this.supported=!1,Error("Module '"+this.name+"' failed to load: "+a)},h.prototype.warn=function(a){p.warn("Module "+this.name+": "+a)},h.prototype.createError=function(a){return Error("Error in Rangy "+this.name+" module: "+a)},p.createModule=function(a,b){var c=new h(a);p.modules[a]=c,r.push(function(a){b(a,c),c.initialized=!0,c.supported=!0})},p.requireModules=function(a){for(var b,c,d=0,e=a.length;e>d;++d){if(c=a[d],b=p.modules[c],!(b&&b instanceof h))throw Error("Module '"+c+"' not found");if(!b.supported)throw Error("Module '"+c+"' not supported")}};var t=!1;if(n=function(){t||(t=!0,p.initialized||g())},"undefined"==typeof window)f("No window found");else{if("undefined"!=typeof document)return a(document,"addEventListener")&&document.addEventListener("DOMContentLoaded",n,!1),a(window,"addEventListener")?window.addEventListener("load",n,!1):a(window,"attachEvent")?window.attachEvent("onload",n):f("Window does not have required addEventListener or attachEvent method"),p;f("No document found")}}(),rangy.createModule("DomUtil",function(a,b){function c(a){for(var b=0;a=a.previousSibling;)b++;return b}function d(a,b){var c,d=[];for(c=a;c;c=c.parentNode)d.push(c);for(c=b;c;c=c.parentNode)if(o(d,c))return c;return null}function e(a,b,c){for(c=c?a:a.parentNode;c;){if(a=c.parentNode,a===b)return c;c=a}return null}function f(a){return a=a.nodeType,3==a||4==a||8==a}function g(a,b){var c=b.nextSibling,d=b.parentNode;return c?d.insertBefore(a,c):d.appendChild(a),a}function h(a){if(9==a.nodeType)return a;if("undefined"!=typeof a.ownerDocument)return a.ownerDocument;if("undefined"!=typeof a.document)return a.document;if(a.parentNode)return h(a.parentNode);throw Error("getDocument: no document found for node")}function i(a){return a?f(a)?'"'+a.data+'"':1==a.nodeType?"<"+a.nodeName+(a.id?' id="'+a.id+'"':"")+">["+a.childNodes.length+"]":a.nodeName:"[No node]"}function j(a){this._next=this.root=a}function k(a,b){this.node=a,this.offset=b}function l(a){this.code=this[a],this.codeName=a,this.message="DOMException: "+this.codeName}var m=a.util;m.areHostMethods(document,["createDocumentFragment","createElement","createTextNode"])||b.fail("document missing a Node creation method"),m.isHostMethod(document,"getElementsByTagName")||b.fail("document missing getElementsByTagName method");var n=document.createElement("div");m.areHostMethods(n,["insertBefore","appendChild","cloneNode"])||b.fail("Incomplete Element implementation"),m.isHostProperty(n,"innerHTML")||b.fail("Element is missing innerHTML property"),n=document.createTextNode("test"),m.areHostMethods(n,["splitText","deleteData","insertData","appendData","cloneNode"])||b.fail("Incomplete Text Node implementation");var o=function(a,b){for(var c=a.length;c--;)if(a[c]===b)return!0;return!1};j.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){var a,b=this._current=this._next;if(this._current)if(a=b.firstChild)this._next=a;else{for(a=null;b!==this.root&&!(a=b.nextSibling);)b=b.parentNode;this._next=a}return this._current},detach:function(){this._current=this._next=this.root=null}},k.prototype={equals:function(a){return this.node===a.node&this.offset==a.offset},inspect:function(){return"[DomPosition("+i(this.node)+":"+this.offset+")]"}},l.prototype={INDEX_SIZE_ERR:1,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INVALID_STATE_ERR:11},l.prototype.toString=function(){return this.message},a.dom={arrayContains:o,isHtmlNamespace:function(a){var b;return"undefined"==typeof a.namespaceURI||null===(b=a.namespaceURI)||"http://www.w3.org/1999/xhtml"==b},parentElement:function(a){return a=a.parentNode,1==a.nodeType?a:null},getNodeIndex:c,getNodeLength:function(a){var b;return f(a)?a.length:(b=a.childNodes)?b.length:0},getCommonAncestor:d,isAncestorOf:function(a,b,c){for(b=c?b:b.parentNode;b;){if(b===a)return!0;b=b.parentNode}return!1},getClosestAncestorIn:e,isCharacterDataNode:f,insertAfter:g,splitDataNode:function(a,b){var c=a.cloneNode(!1);return c.deleteData(0,b),a.deleteData(b,a.length-b),g(c,a),c},getDocument:h,getWindow:function(a){if(a=h(a),"undefined"!=typeof a.defaultView)return a.defaultView;if("undefined"!=typeof a.parentWindow)return a.parentWindow;throw Error("Cannot get a window object for node")},getIframeWindow:function(a){if("undefined"!=typeof a.contentWindow)return a.contentWindow;if("undefined"!=typeof a.contentDocument)return a.contentDocument.defaultView;throw Error("getIframeWindow: No Window object found for iframe element")},getIframeDocument:function(a){if("undefined"!=typeof a.contentDocument)return a.contentDocument;if("undefined"!=typeof a.contentWindow)return a.contentWindow.document;throw Error("getIframeWindow: No Document object found for iframe element")},getBody:function(a){return m.isHostObject(a,"body")?a.body:a.getElementsByTagName("body")[0]},getRootContainer:function(a){for(var b;b=a.parentNode;)a=b;return a},comparePoints:function(a,b,f,g){var h;if(a==f)return b===g?0:g>b?-1:1;if(h=e(f,a,!0))return b<=c(h)?-1:1;if(h=e(a,f,!0))return c(h)<g?-1:1;if(b=d(a,f),a=a===b?b:e(a,b,!0),f=f===b?b:e(f,b,!0),a===f)throw Error("comparePoints got to case 4 and childA and childB are the same!");for(b=b.firstChild;b;){if(b===a)return-1;if(b===f)return 1;b=b.nextSibling}throw Error("Should not be here!")},inspectNode:i,fragmentFromNodeChildren:function(a){for(var b,c=h(a).createDocumentFragment();b=a.firstChild;)c.appendChild(b);return c},createIterator:function(a){return new j(a)},DomPosition:k},a.DOMException=l}),rangy.createModule("DomRange",function(a){function b(a,b){return 3!=a.nodeType&&(I.isAncestorOf(a,b.startContainer,!0)||I.isAncestorOf(a,b.endContainer,!0))}function c(a){return I.getDocument(a.startContainer)}function d(a,b,c){if(b=a._listeners[b])for(var d=0,e=b.length;e>d;++d)b[d].call(a,{target:a,args:c})}function e(a){return new J(a.parentNode,I.getNodeIndex(a))}function f(a){return new J(a.parentNode,I.getNodeIndex(a)+1)}function g(a,b,c){var d=11==a.nodeType?a.firstChild:a;return I.isCharacterDataNode(b)?c==b.length?I.insertAfter(a,b):b.parentNode.insertBefore(a,0==c?b:I.splitDataNode(b,c)):c>=b.childNodes.length?b.appendChild(a):b.insertBefore(a,b.childNodes[c]),d}function h(a){for(var b,d,e=c(a.range).createDocumentFragment();d=a.next();){if(b=a.isPartiallySelectedSubtree(),d=d.cloneNode(!b),b&&(b=a.getSubtreeIterator(),d.appendChild(h(b)),b.detach(!0)),10==d.nodeType)throw new K("HIERARCHY_REQUEST_ERR");e.appendChild(d)}return e}function i(a,b,c){var d,e;for(c=c||{stop:!1};d=a.next();)if(a.isPartiallySelectedSubtree()){if(b(d)===!1)return void(c.stop=!0);if(d=a.getSubtreeIterator(),i(d,b,c),d.detach(!0),c.stop)return}else for(d=I.createIterator(d);e=d.next();)if(b(e)===!1)return void(c.stop=!0)}function j(a){for(var b;a.next();)a.isPartiallySelectedSubtree()?(b=a.getSubtreeIterator(),j(b),b.detach(!0)):a.remove()}function k(a){for(var b,d,e=c(a.range).createDocumentFragment();b=a.next();){if(a.isPartiallySelectedSubtree()?(b=b.cloneNode(!1),d=a.getSubtreeIterator(),b.appendChild(k(d)),d.detach(!0)):a.remove(),10==b.nodeType)throw new K("HIERARCHY_REQUEST_ERR");e.appendChild(b)}return e}function l(a,b,c){var d,e=!(!b||!b.length),f=!!c;e&&(d=RegExp("^("+b.join("|")+")$"));var g=[];return i(new n(a,!1),function(a){e&&!d.test(a.nodeType)||f&&!c(a)||g.push(a)}),g}function m(a){return"["+("undefined"==typeof a.getName?"Range":a.getName())+"("+I.inspectNode(a.startContainer)+":"+a.startOffset+", "+I.inspectNode(a.endContainer)+":"+a.endOffset+")]"}function n(a,b){if(this.range=a,this.clonePartiallySelectedTextNodes=b,!a.collapsed){this.sc=a.startContainer,this.so=a.startOffset,this.ec=a.endContainer,this.eo=a.endOffset;var c=a.commonAncestorContainer;this.sc===this.ec&&I.isCharacterDataNode(this.sc)?(this.isSingleCharacterDataNode=!0,this._first=this._last=this._next=this.sc):(this._first=this._next=this.sc!==c||I.isCharacterDataNode(this.sc)?I.getClosestAncestorIn(this.sc,c,!0):this.sc.childNodes[this.so],this._last=this.ec!==c||I.isCharacterDataNode(this.ec)?I.getClosestAncestorIn(this.ec,c,!0):this.ec.childNodes[this.eo-1])}}function o(a){this.code=this[a],this.codeName=a,this.message="RangeException: "+this.codeName}function p(a,b,c){this.nodes=l(a,b,c),this._next=this.nodes[0],this._position=0}function q(a){return function(b,c){for(var d,e=c?b:b.parentNode;e;){if(d=e.nodeType,I.arrayContains(a,d))return e;e=e.parentNode}return null}}function r(a,b){if(S(a,b))throw new o("INVALID_NODE_TYPE_ERR")}function s(a){if(!a.startContainer)throw new K("INVALID_STATE_ERR")}function t(a,b){if(!I.arrayContains(b,a.nodeType))throw new o("INVALID_NODE_TYPE_ERR")}function u(a,b){if(0>b||b>(I.isCharacterDataNode(a)?a.length:a.childNodes.length))throw new K("INDEX_SIZE_ERR")}function v(a,b){if(Q(a,!0)!==Q(b,!0))throw new K("WRONG_DOCUMENT_ERR")}function w(a){if(R(a,!0))throw new K("NO_MODIFICATION_ALLOWED_ERR")}function x(a,b){if(!a)throw new K(b)}function y(a){return!!a.startContainer&&!!a.endContainer&&!(!I.arrayContains(M,a.startContainer.nodeType)&&!Q(a.startContainer,!0))&&!(!I.arrayContains(M,a.endContainer.nodeType)&&!Q(a.endContainer,!0))&&a.startOffset<=(I.isCharacterDataNode(a.startContainer)?a.startContainer.length:a.startContainer.childNodes.length)&&a.endOffset<=(I.isCharacterDataNode(a.endContainer)?a.endContainer.length:a.endContainer.childNodes.length)}function z(a){if(s(a),!y(a))throw Error("Range error: Range is no longer valid after DOM mutation ("+a.inspect()+")")}function A(){}function B(a){a.START_TO_START=X,a.START_TO_END=Y,a.END_TO_END=Z,a.END_TO_START=$,a.NODE_BEFORE=_,a.NODE_AFTER=aa,a.NODE_BEFORE_AND_AFTER=ba,a.NODE_INSIDE=ca}function C(a){B(a),B(a.prototype)}function D(a,b){return function(){z(this);var c=this.startContainer,d=this.startOffset,e=this.commonAncestorContainer,g=new n(this,!0);return c!==e&&(c=I.getClosestAncestorIn(c,e,!0),d=f(c),c=d.node,d=d.offset),i(g,w),g.reset(),e=a(g),g.detach(),b(this,c,d,c,d),e}}function E(c,d,g){function h(a,b){return function(c){s(this),t(c,L),t(P(c),M),c=(a?e:f)(c),(b?i:l)(this,c.node,c.offset)}}function i(a,b,c){var e=a.endContainer,f=a.endOffset;(b!==a.startContainer||c!==a.startOffset)&&((P(b)!=P(e)||1==I.comparePoints(b,c,e,f))&&(e=b,f=c),d(a,b,c,e,f))}function l(a,b,c){var e=a.startContainer,f=a.startOffset;(b!==a.endContainer||c!==a.endOffset)&&((P(b)!=P(e)||-1==I.comparePoints(b,c,e,f))&&(e=b,f=c),d(a,e,f,b,c))}c.prototype=new A,a.util.extend(c.prototype,{setStart:function(a,b){s(this),r(a,!0),u(a,b),i(this,a,b)},setEnd:function(a,b){s(this),r(a,!0),u(a,b),l(this,a,b)},setStartBefore:h(!0,!0),setStartAfter:h(!1,!0),setEndBefore:h(!0,!1),setEndAfter:h(!1,!1),collapse:function(a){z(this),a?d(this,this.startContainer,this.startOffset,this.startContainer,this.startOffset):d(this,this.endContainer,this.endOffset,this.endContainer,this.endOffset)},selectNodeContents:function(a){s(this),r(a,!0),d(this,a,0,a,I.getNodeLength(a))},selectNode:function(a){s(this),r(a,!1),t(a,L);var b=e(a);a=f(a),d(this,b.node,b.offset,a.node,a.offset)},extractContents:D(k,d),deleteContents:D(j,d),canSurroundContents:function(){z(this),w(this.startContainer),w(this.endContainer);var a=new n(this,!0),c=a._first&&b(a._first,this)||a._last&&b(a._last,this);return a.detach(),!c},detach:function(){g(this)},splitBoundaries:function(){z(this);var a=this.startContainer,b=this.startOffset,c=this.endContainer,e=this.endOffset,f=a===c;I.isCharacterDataNode(c)&&e>0&&e<c.length&&I.splitDataNode(c,e),I.isCharacterDataNode(a)&&b>0&&b<a.length&&(a=I.splitDataNode(a,b),f?(e-=b,c=a):c==a.parentNode&&e>=I.getNodeIndex(a)&&e++,b=0),d(this,a,b,c,e)},normalizeBoundaries:function(){z(this);var a=this.startContainer,b=this.startOffset,c=this.endContainer,e=this.endOffset,f=function(a){var b=a.nextSibling;b&&b.nodeType==a.nodeType&&(c=a,e=a.length,a.appendData(b.data),b.parentNode.removeChild(b))},g=function(d){var f=d.previousSibling;if(f&&f.nodeType==d.nodeType){a=d;var g=d.length;b=f.length,d.insertData(0,f.data),f.parentNode.removeChild(f),a==c?(e+=b,c=a):c==d.parentNode&&(f=I.getNodeIndex(d),e==f?(c=d,e=g):e>f&&e--)}},h=!0;I.isCharacterDataNode(c)?c.length==e&&f(c):(e>0&&(h=c.childNodes[e-1])&&I.isCharacterDataNode(h)&&f(h),h=!this.collapsed),h?I.isCharacterDataNode(a)?0==b&&g(a):b<a.childNodes.length&&(f=a.childNodes[b])&&I.isCharacterDataNode(f)&&g(f):(a=c,b=e),d(this,a,b,c,e)},collapseToPoint:function(a,b){s(this),r(a,!0),u(a,b),(a!==this.startContainer||b!==this.startOffset||a!==this.endContainer||b!==this.endOffset)&&d(this,a,b,a,b)}}),C(c)}function F(a){a.collapsed=a.startContainer===a.endContainer&&a.startOffset===a.endOffset,a.commonAncestorContainer=a.collapsed?a.startContainer:I.getCommonAncestor(a.startContainer,a.endContainer)}function G(a,b,c,e,f){var g=a.startContainer!==b||a.startOffset!==c,h=a.endContainer!==e||a.endOffset!==f;a.startContainer=b,a.startOffset=c,a.endContainer=e,a.endOffset=f,F(a),d(a,"boundarychange",{startMoved:g,endMoved:h})}function H(a){this.startContainer=a,this.startOffset=0,this.endContainer=a,this.endOffset=0,this._listeners={boundarychange:[],detach:[]},F(this)}a.requireModules(["DomUtil"]);var I=a.dom,J=I.DomPosition,K=a.DOMException;n.prototype={_current:null,_next:null,_first:null,_last:null,isSingleCharacterDataNode:!1,reset:function(){this._current=null,this._next=this._first},hasNext:function(){return!!this._next},next:function(){var a=this._current=this._next;return a&&(this._next=a!==this._last?a.nextSibling:null,I.isCharacterDataNode(a)&&this.clonePartiallySelectedTextNodes&&(a===this.ec&&(a=a.cloneNode(!0)).deleteData(this.eo,a.length-this.eo),this._current===this.sc&&(a=a.cloneNode(!0)).deleteData(0,this.so))),a},remove:function(){var a,b,c=this._current;!I.isCharacterDataNode(c)||c!==this.sc&&c!==this.ec?c.parentNode&&c.parentNode.removeChild(c):(a=c===this.sc?this.so:0,b=c===this.ec?this.eo:c.length,a!=b&&c.deleteData(a,b-a))},isPartiallySelectedSubtree:function(){return b(this._current,this.range)},getSubtreeIterator:function(){var a;if(this.isSingleCharacterDataNode)a=this.range.cloneRange(),a.collapse();else{a=new H(c(this.range));var b=this._current,d=b,e=0,f=b,g=I.getNodeLength(b);I.isAncestorOf(b,this.sc,!0)&&(d=this.sc,e=this.so),I.isAncestorOf(b,this.ec,!0)&&(f=this.ec,g=this.eo),G(a,d,e,f,g)}return new n(a,this.clonePartiallySelectedTextNodes)},detach:function(a){a&&this.range.detach(),this.range=this._current=this._next=this._first=this._last=this.sc=this.so=this.ec=this.eo=null}},o.prototype={BAD_BOUNDARYPOINTS_ERR:1,INVALID_NODE_TYPE_ERR:2},o.prototype.toString=function(){return this.message},p.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){return this._current=this._next,this._next=this.nodes[++this._position],this._current},detach:function(){this._current=this._next=this.nodes=null}};var L=[1,3,4,5,7,8,10],M=[2,9,11],N=[1,3,4,5,7,8,10,11],O=[1,3,4,5,7,8],P=I.getRootContainer,Q=q([9,11]),R=q([5,6,10,12]),S=q([6,10,12]),T=document.createElement("style"),U=!1;try{T.innerHTML="<b>x</b>",U=3==T.firstChild.nodeType}catch(V){}a.features.htmlParsingConforms=U;var W=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],X=0,Y=1,Z=2,$=3,_=0,aa=1,ba=2,ca=3;A.prototype={attachListener:function(a,b){this._listeners[a].push(b)},compareBoundaryPoints:function(a,b){z(this),v(this.startContainer,b.startContainer);var c=a==$||a==X?"start":"end",d=a==Y||a==X?"start":"end";return I.comparePoints(this[c+"Container"],this[c+"Offset"],b[d+"Container"],b[d+"Offset"])},insertNode:function(a){if(z(this),t(a,N),w(this.startContainer),I.isAncestorOf(a,this.startContainer,!0))throw new K("HIERARCHY_REQUEST_ERR");this.setStartBefore(g(a,this.startContainer,this.startOffset))},cloneContents:function(){z(this);var a,b;return this.collapsed?c(this).createDocumentFragment():this.startContainer===this.endContainer&&I.isCharacterDataNode(this.startContainer)?(a=this.startContainer.cloneNode(!0),a.data=a.data.slice(this.startOffset,this.endOffset),b=c(this).createDocumentFragment(),b.appendChild(a),b):(b=new n(this,!0),a=h(b),b.detach(),a)},canSurroundContents:function(){z(this),w(this.startContainer),w(this.endContainer);var a=new n(this,!0),c=a._first&&b(a._first,this)||a._last&&b(a._last,this);return a.detach(),!c},surroundContents:function(a){if(t(a,O),!this.canSurroundContents())throw new o("BAD_BOUNDARYPOINTS_ERR");var b=this.extractContents();if(a.hasChildNodes())for(;a.lastChild;)a.removeChild(a.lastChild);g(a,this.startContainer,this.startOffset),a.appendChild(b),this.selectNode(a)},cloneRange:function(){z(this);for(var a,b=new H(c(this)),d=W.length;d--;)a=W[d],b[a]=this[a];return b},toString:function(){z(this);var a=this.startContainer;if(a===this.endContainer&&I.isCharacterDataNode(a))return 3==a.nodeType||4==a.nodeType?a.data.slice(this.startOffset,this.endOffset):"";var b=[];return a=new n(this,!0),i(a,function(a){(3==a.nodeType||4==a.nodeType)&&b.push(a.data)}),a.detach(),b.join("")},compareNode:function(a){z(this);var b=a.parentNode,c=I.getNodeIndex(a);if(!b)throw new K("NOT_FOUND_ERR");return a=this.comparePoint(b,c),b=this.comparePoint(b,c+1),0>a?b>0?ba:_:b>0?aa:ca},comparePoint:function(a,b){return z(this),x(a,"HIERARCHY_REQUEST_ERR"),v(a,this.startContainer),I.comparePoints(a,b,this.startContainer,this.startOffset)<0?-1:I.comparePoints(a,b,this.endContainer,this.endOffset)>0?1:0},createContextualFragment:U?function(a){var b=this.startContainer,c=I.getDocument(b);if(!b)throw new K("INVALID_STATE_ERR");var d=null;return 1==b.nodeType?d=b:I.isCharacterDataNode(b)&&(d=I.parentElement(b)),d=null===d||"HTML"==d.nodeName&&I.isHtmlNamespace(I.getDocument(d).documentElement)&&I.isHtmlNamespace(d)?c.createElement("body"):d.cloneNode(!1),d.innerHTML=a,I.fragmentFromNodeChildren(d)}:function(a){s(this);var b=c(this).createElement("body");return b.innerHTML=a,I.fragmentFromNodeChildren(b)},toHtml:function(){z(this);var a=c(this).createElement("div");return a.appendChild(this.cloneContents()),a.innerHTML},intersectsNode:function(a,b){if(z(this),x(a,"NOT_FOUND_ERR"),I.getDocument(a)!==c(this))return!1;var d=a.parentNode,e=I.getNodeIndex(a);x(d,"NOT_FOUND_ERR");var f=I.comparePoints(d,e,this.endContainer,this.endOffset);return d=I.comparePoints(d,e+1,this.startContainer,this.startOffset),b?0>=f&&d>=0:0>f&&d>0},isPointInRange:function(a,b){return z(this),x(a,"HIERARCHY_REQUEST_ERR"),v(a,this.startContainer),I.comparePoints(a,b,this.startContainer,this.startOffset)>=0&&I.comparePoints(a,b,this.endContainer,this.endOffset)<=0},intersectsRange:function(a,b){if(z(this),c(a)!=c(this))throw new K("WRONG_DOCUMENT_ERR");var d=I.comparePoints(this.startContainer,this.startOffset,a.endContainer,a.endOffset),e=I.comparePoints(this.endContainer,this.endOffset,a.startContainer,a.startOffset);return b?0>=d&&e>=0:0>d&&e>0},intersection:function(a){if(this.intersectsRange(a)){var b=I.comparePoints(this.startContainer,this.startOffset,a.startContainer,a.startOffset),c=I.comparePoints(this.endContainer,this.endOffset,a.endContainer,a.endOffset),d=this.cloneRange();return-1==b&&d.setStart(a.startContainer,a.startOffset),1==c&&d.setEnd(a.endContainer,a.endOffset),d}return null},union:function(a){if(this.intersectsRange(a,!0)){var b=this.cloneRange();return-1==I.comparePoints(a.startContainer,a.startOffset,this.startContainer,this.startOffset)&&b.setStart(a.startContainer,a.startOffset),1==I.comparePoints(a.endContainer,a.endOffset,this.endContainer,this.endOffset)&&b.setEnd(a.endContainer,a.endOffset),b}throw new o("Ranges do not intersect")},containsNode:function(a,b){return b?this.intersectsNode(a,!1):this.compareNode(a)==ca},containsNodeContents:function(a){return this.comparePoint(a,0)>=0&&this.comparePoint(a,I.getNodeLength(a))<=0},containsRange:function(a){return this.intersection(a).equals(a)},containsNodeText:function(a){var b=this.cloneRange();b.selectNode(a);var c=b.getNodes([3]);return c.length>0?(b.setStart(c[0],0),a=c.pop(),b.setEnd(a,a.length),a=this.containsRange(b),b.detach(),a):this.containsNodeContents(a)},createNodeIterator:function(a,b){return z(this),new p(this,a,b)},getNodes:function(a,b){return z(this),l(this,a,b)},getDocument:function(){return c(this)},collapseBefore:function(a){s(this),this.setEndBefore(a),this.collapse(!1)},collapseAfter:function(a){s(this),this.setStartAfter(a),this.collapse(!0)},getName:function(){return"DomRange"},equals:function(a){return H.rangesEqual(this,a)},isValid:function(){return y(this)},inspect:function(){return m(this)}},E(H,G,function(a){s(a),a.startContainer=a.startOffset=a.endContainer=a.endOffset=null,a.collapsed=a.commonAncestorContainer=null,d(a,"detach",null),a._listeners=null}),a.rangePrototype=A.prototype,H.rangeProperties=W,H.RangeIterator=n,H.copyComparisonConstants=C,H.createPrototypeRange=E,H.inspect=m,H.getRangeDocument=c,H.rangesEqual=function(a,b){return a.startContainer===b.startContainer&&a.startOffset===b.startOffset&&a.endContainer===b.endContainer&&a.endOffset===b.endOffset},a.DomRange=H,a.RangeException=o}),rangy.createModule("WrappedRange",function(a){function b(a,b,c,d){var g=a.duplicate();g.collapse(c);var h=g.parentElement();if(e.isAncestorOf(b,h,!0)||(h=b),!h.canHaveHTML)return new f(h.parentNode,e.getNodeIndex(h));b=e.getDocument(h).createElement("span");var i,j=c?"StartToStart":"StartToEnd";do h.insertBefore(b,b.previousSibling),g.moveToElementText(b);while((i=g.compareEndPoints(j,a))>0&&b.previousSibling);if(j=b.nextSibling,-1==i&&j&&e.isCharacterDataNode(j)){if(g.setEndPoint(c?"EndToStart":"EndToEnd",a),/[\r\n]/.test(j.data))for(h=g.duplicate(),c=h.text.replace(/\r\n/g,"\r").length,c=h.moveStart("character",c);-1==h.compareEndPoints("StartToEnd",h);)c++,h.moveStart("character",1);else c=g.text.length;h=new f(j,c)}else j=(d||!c)&&b.previousSibling,h=(c=(d||c)&&b.nextSibling)&&e.isCharacterDataNode(c)?new f(c,0):j&&e.isCharacterDataNode(j)?new f(j,j.length):new f(h,e.getNodeIndex(b));return b.parentNode.removeChild(b),h}function c(a,b){var c,d,f=a.offset,g=e.getDocument(a.node),h=g.body.createTextRange(),i=e.isCharacterDataNode(a.node);return i?(c=a.node,d=c.parentNode):(c=a.node.childNodes,c=f<c.length?c[f]:null,d=a.node),g=g.createElement("span"),g.innerHTML="&#feff;",c?d.insertBefore(g,c):d.appendChild(g),h.moveToElementText(g),h.collapse(!b),d.removeChild(g),i&&h[b?"moveStart":"moveEnd"]("character",f),h}a.requireModules(["DomUtil","DomRange"]);var d,e=a.dom,f=e.DomPosition,g=a.DomRange;if(!a.features.implementsDomRange||a.features.implementsTextRange&&a.config.preferTextRange){if(a.features.implementsTextRange){d=function(a){this.textRange=a,this.refresh()},d.prototype=new g(document),d.prototype.refresh=function(){var a,c,d=this.textRange;a=d.parentElement();var f=d.duplicate();f.collapse(!0),c=f.parentElement(),f=d.duplicate(),f.collapse(!1),d=f.parentElement(),c=c==d?c:e.getCommonAncestor(c,d),c=c==a?c:e.getCommonAncestor(a,c),0==this.textRange.compareEndPoints("StartToEnd",this.textRange)?c=a=b(this.textRange,c,!0,!0):(a=b(this.textRange,c,!0,!1),c=b(this.textRange,c,!1,!1)),this.setStart(a.node,a.offset),this.setEnd(c.node,c.offset)},g.copyComparisonConstants(d);var h=function(){return this}();"undefined"==typeof h.Range&&(h.Range=d),a.createNativeRange=function(a){return a=a||document,a.body.createTextRange()}}}else!function(){function b(a){for(var b,c=i.length;c--;)b=i[c],a[b]=a.nativeRange[b]}var c,f,h,i=g.rangeProperties;d=function(a){if(!a)throw Error("Range must be specified");this.nativeRange=a,b(this)},g.createPrototypeRange(d,function(a,b,c,d,e){var f=a.endContainer!==d||a.endOffset!=e;(a.startContainer!==b||a.startOffset!=c||f)&&(a.setEnd(d,e),a.setStart(b,c))},function(a){a.nativeRange.detach(),a.detached=!0;for(var b,c=i.length;c--;)b=i[c],a[b]=null}),c=d.prototype,c.selectNode=function(a){this.nativeRange.selectNode(a),b(this)},c.deleteContents=function(){this.nativeRange.deleteContents(),b(this)},c.extractContents=function(){var a=this.nativeRange.extractContents();return b(this),a},c.cloneContents=function(){return this.nativeRange.cloneContents()},c.surroundContents=function(a){this.nativeRange.surroundContents(a),b(this)},c.collapse=function(a){this.nativeRange.collapse(a),b(this)},c.cloneRange=function(){return new d(this.nativeRange.cloneRange())},c.refresh=function(){b(this)},c.toString=function(){return this.nativeRange.toString()};var j=document.createTextNode("test");e.getBody(document).appendChild(j);var k=document.createRange();k.setStart(j,0),k.setEnd(j,0);try{k.setStart(j,1),f=!0,c.setStart=function(a,c){this.nativeRange.setStart(a,c),b(this)},c.setEnd=function(a,c){this.nativeRange.setEnd(a,c),b(this)},h=function(a){return function(c){this.nativeRange[a](c),b(this)}}}catch(l){f=!1,c.setStart=function(a,c){try{this.nativeRange.setStart(a,c)}catch(d){this.nativeRange.setEnd(a,c),this.nativeRange.setStart(a,c)}b(this)},c.setEnd=function(a,c){try{this.nativeRange.setEnd(a,c)}catch(d){this.nativeRange.setStart(a,c),this.nativeRange.setEnd(a,c)}b(this)},h=function(a,c){return function(d){
try{this.nativeRange[a](d)}catch(e){this.nativeRange[c](d),this.nativeRange[a](d)}b(this)}}}c.setStartBefore=h("setStartBefore","setEndBefore"),c.setStartAfter=h("setStartAfter","setEndAfter"),c.setEndBefore=h("setEndBefore","setStartBefore"),c.setEndAfter=h("setEndAfter","setStartAfter"),k.selectNodeContents(j),c.selectNodeContents=k.startContainer==j&&k.endContainer==j&&0==k.startOffset&&k.endOffset==j.length?function(a){this.nativeRange.selectNodeContents(a),b(this)}:function(a){this.setStart(a,0),this.setEnd(a,g.getEndOffset(a))},k.selectNodeContents(j),k.setEnd(j,3),f=document.createRange(),f.selectNodeContents(j),f.setEnd(j,4),f.setStart(j,2),c.compareBoundaryPoints=-1==k.compareBoundaryPoints(k.START_TO_END,f)&1==k.compareBoundaryPoints(k.END_TO_START,f)?function(a,b){return b=b.nativeRange||b,a==b.START_TO_END?a=b.END_TO_START:a==b.END_TO_START&&(a=b.START_TO_END),this.nativeRange.compareBoundaryPoints(a,b)}:function(a,b){return this.nativeRange.compareBoundaryPoints(a,b.nativeRange||b)},a.util.isHostMethod(k,"createContextualFragment")&&(c.createContextualFragment=function(a){return this.nativeRange.createContextualFragment(a)}),e.getBody(document).removeChild(j),k.detach(),f.detach()}(),a.createNativeRange=function(a){return a=a||document,a.createRange()};a.features.implementsTextRange&&(d.rangeToTextRange=function(a){if(a.collapsed)return c(new f(a.startContainer,a.startOffset),!0);var b=c(new f(a.startContainer,a.startOffset),!0),d=c(new f(a.endContainer,a.endOffset),!1);return a=e.getDocument(a.startContainer).body.createTextRange(),a.setEndPoint("StartToStart",b),a.setEndPoint("EndToEnd",d),a}),d.prototype.getName=function(){return"WrappedRange"},a.WrappedRange=d,a.createRange=function(b){return b=b||document,new d(a.createNativeRange(b))},a.createRangyRange=function(a){return a=a||document,new g(a)},a.createIframeRange=function(b){return a.createRange(e.getIframeDocument(b))},a.createIframeRangyRange=function(b){return a.createRangyRange(e.getIframeDocument(b))},a.addCreateMissingNativeApiListener(function(b){b=b.document,"undefined"==typeof b.createRange&&(b.createRange=function(){return a.createRange(this)}),b=b=null})}),rangy.createModule("WrappedSelection",function(a,b){function c(a){return(a||window).getSelection()}function d(a){return(a||window).document.selection}function e(a,b,c){var d=c?"end":"start";c=c?"start":"end",a.anchorNode=b[d+"Container"],a.anchorOffset=b[d+"Offset"],a.focusNode=b[c+"Container"],a.focusOffset=b[c+"Offset"]}function f(a){a.anchorNode=a.focusNode=null,a.anchorOffset=a.focusOffset=0,a.rangeCount=0,a.isCollapsed=!0,a._ranges.length=0}function g(b){var c;return b instanceof t?(c=b._selectionNativeRange,c||(c=a.createNativeRange(r.getDocument(b.startContainer)),c.setEnd(b.endContainer,b.endOffset),c.setStart(b.startContainer,b.startOffset),b._selectionNativeRange=c,b.attachListener("detach",function(){this._selectionNativeRange=null}))):b instanceof u?c=b.nativeRange:a.features.implementsDomRange&&b instanceof r.getWindow(b.startContainer).Range&&(c=b),c}function h(a){var b,c=a.getNodes();a:if(c.length&&1==c[0].nodeType){b=1;for(var d=c.length;d>b;++b)if(!r.isAncestorOf(c[0],c[b])){b=!1;break a}b=!0}else b=!1;if(!b)throw Error("getSingleElementFromRange: range "+a.inspect()+" did not consist of a single element");return c[0]}function i(a,b){var c=new u(b);a._ranges=[c],e(a,c,!1),a.rangeCount=1,a.isCollapsed=c.collapsed}function j(b){if(b._ranges.length=0,"None"==b.docSelection.type)f(b);else{var c=b.docSelection.createRange();if(c&&"undefined"!=typeof c.text)i(b,c);else{b.rangeCount=c.length;for(var d,g=r.getDocument(c.item(0)),h=0;h<b.rangeCount;++h)d=a.createRange(g),d.selectNode(c.item(h)),b._ranges.push(d);b.isCollapsed=1==b.rangeCount&&b._ranges[0].collapsed,e(b,b._ranges[b.rangeCount-1],!1)}}}function k(a,b){var c=a.docSelection.createRange(),d=h(b),e=r.getDocument(c.item(0));e=r.getBody(e).createControlRange();for(var f=0,g=c.length;g>f;++f)e.add(c.item(f));try{e.add(d)}catch(i){throw Error("addRange(): Element within the specified Range could not be added to control selection (does it have layout?)")}e.select(),j(a)}function l(a,b,c){this.nativeSelection=a,this.docSelection=b,this._ranges=[],this.win=c,this.refresh()}function m(a,b){var c=r.getDocument(b[0].startContainer);c=r.getBody(c).createControlRange();for(var d,e=0;e<rangeCount;++e){d=h(b[e]);try{c.add(d)}catch(f){throw Error("setRanges(): Element within the one of the specified Ranges could not be added to control selection (does it have layout?)")}}c.select(),j(a)}function n(a,b){if(a.anchorNode&&r.getDocument(a.anchorNode)!==r.getDocument(b))throw new v("WRONG_DOCUMENT_ERR")}function o(a){var b=[],c=new w(a.anchorNode,a.anchorOffset),d=new w(a.focusNode,a.focusOffset),e="function"==typeof a.getName?a.getName():"Selection";if("undefined"!=typeof a.rangeCount)for(var f=0,g=a.rangeCount;g>f;++f)b[f]=t.inspect(a.getRangeAt(f));return"["+e+"(Ranges: "+b.join(", ")+")(anchor: "+c.inspect()+", focus: "+d.inspect()+"]"}a.requireModules(["DomUtil","DomRange","WrappedRange"]),a.config.checkSelectionRanges=!0;var p,q,r=a.dom,s=a.util,t=a.DomRange,u=a.WrappedRange,v=a.DOMException,w=r.DomPosition,x=a.util.isHostMethod(window,"getSelection"),y=a.util.isHostObject(document,"selection"),z=y&&(!x||a.config.preferTextRange);z?(p=d,a.isSelectionValid=function(a){a=(a||window).document;var b=a.selection;return"None"!=b.type||r.getDocument(b.createRange().parentElement())==a}):x?(p=c,a.isSelectionValid=function(){return!0}):b.fail("Neither document.selection or window.getSelection() detected."),a.getNativeSelection=p,x=p();var A=a.createNativeRange(document),B=r.getBody(document),C=s.areHostObjects(x,s.areHostProperties(x,["anchorOffset","focusOffset"]));a.features.selectionHasAnchorAndFocus=C;var D=s.isHostMethod(x,"extend");a.features.selectionHasExtend=D;var E="number"==typeof x.rangeCount;a.features.selectionHasRangeCount=E;var F=!1,G=!0;s.areHostMethods(x,["addRange","getRangeAt","removeAllRanges"])&&"number"==typeof x.rangeCount&&a.features.implementsDomRange&&function(){var a=document.createElement("iframe");a.frameBorder=0,a.style.position="absolute",a.style.left="-10000px",B.appendChild(a);var b=r.getIframeDocument(a);b.open(),b.write("<html><head></head><body>12</body></html>"),b.close();var c=r.getIframeWindow(a).getSelection(),d=b.documentElement.lastChild.firstChild;b=b.createRange(),b.setStart(d,1),b.collapse(!0),c.addRange(b),G=1==c.rangeCount,c.removeAllRanges();var e=b.cloneRange();b.setStart(d,0),e.setEnd(d,2),c.addRange(b),c.addRange(e),F=2==c.rangeCount,b.detach(),e.detach(),B.removeChild(a)}(),a.features.selectionSupportsMultipleRanges=F,a.features.collapsedNonEditableSelectionsSupported=G;var H,I=!1;B&&s.isHostMethod(B,"createControlRange")&&(H=B.createControlRange(),s.areHostProperties(H,["item","add"])&&(I=!0)),a.features.implementsControlRange=I,q=C?function(a){return a.anchorNode===a.focusNode&&a.anchorOffset===a.focusOffset}:function(a){return a.rangeCount?a.getRangeAt(a.rangeCount-1).collapsed:!1};var J;if(s.isHostMethod(x,"getRangeAt")?J=function(a,b){try{return a.getRangeAt(b)}catch(c){return null}}:C&&(J=function(b){var c=r.getDocument(b.anchorNode);return c=a.createRange(c),c.setStart(b.anchorNode,b.anchorOffset),c.setEnd(b.focusNode,b.focusOffset),c.collapsed!==this.isCollapsed&&(c.setStart(b.focusNode,b.focusOffset),c.setEnd(b.anchorNode,b.anchorOffset)),c}),a.getSelection=function(a){a=a||window;var b=a._rangySelection,c=p(a),e=y?d(a):null;return b?(b.nativeSelection=c,b.docSelection=e,b.refresh(a)):(b=new l(c,e,a),a._rangySelection=b),b},a.getIframeSelection=function(b){return a.getSelection(r.getIframeWindow(b))},H=l.prototype,!z&&C&&s.areHostMethods(x,["removeAllRanges","addRange"])){H.removeAllRanges=function(){this.nativeSelection.removeAllRanges(),f(this)};var K=function(b,c){var d=t.getRangeDocument(c);d=a.createRange(d),d.collapseToPoint(c.endContainer,c.endOffset),b.nativeSelection.addRange(g(d)),b.nativeSelection.extend(c.startContainer,c.startOffset),b.refresh()};H.addRange=E?function(b,c){if(I&&y&&"Control"==this.docSelection.type)k(this,b);else if(c&&D)K(this,b);else{var d;F?d=this.rangeCount:(this.removeAllRanges(),d=0),this.nativeSelection.addRange(g(b)),this.rangeCount=this.nativeSelection.rangeCount,this.rangeCount==d+1?(a.config.checkSelectionRanges&&(d=J(this.nativeSelection,this.rangeCount-1))&&!t.rangesEqual(d,b)&&(b=new u(d)),this._ranges[this.rangeCount-1]=b,e(this,b,N(this.nativeSelection)),this.isCollapsed=q(this)):this.refresh()}}:function(a,b){b&&D?K(this,a):(this.nativeSelection.addRange(g(a)),this.refresh())},H.setRanges=function(a){if(I&&a.length>1)m(this,a);else{this.removeAllRanges();for(var b=0,c=a.length;c>b;++b)this.addRange(a[b])}}}else{if(!(s.isHostMethod(x,"empty")&&s.isHostMethod(A,"select")&&I&&z))return b.fail("No means of selecting a Range or TextRange was found"),!1;H.removeAllRanges=function(){try{if(this.docSelection.empty(),"None"!=this.docSelection.type){var a;if(this.anchorNode)a=r.getDocument(this.anchorNode);else if("Control"==this.docSelection.type){var b=this.docSelection.createRange();b.length&&(a=r.getDocument(b.item(0)).body.createTextRange())}a&&(a.body.createTextRange().select(),this.docSelection.empty())}}catch(c){}f(this)},H.addRange=function(a){"Control"==this.docSelection.type?k(this,a):(u.rangeToTextRange(a).select(),this._ranges[0]=a,this.rangeCount=1,this.isCollapsed=this._ranges[0].collapsed,e(this,a,!1))},H.setRanges=function(a){this.removeAllRanges();var b=a.length;b>1?m(this,a):b&&this.addRange(a[0])}}H.getRangeAt=function(a){if(0>a||a>=this.rangeCount)throw new v("INDEX_SIZE_ERR");return this._ranges[a]};var L;if(z)L=function(b){var c;a.isSelectionValid(b.win)?c=b.docSelection.createRange():(c=r.getBody(b.win.document).createTextRange(),c.collapse(!0)),"Control"==b.docSelection.type?j(b):c&&"undefined"!=typeof c.text?i(b,c):f(b)};else if(s.isHostMethod(x,"getRangeAt")&&"number"==typeof x.rangeCount)L=function(b){if(I&&y&&"Control"==b.docSelection.type)j(b);else if(b._ranges.length=b.rangeCount=b.nativeSelection.rangeCount,b.rangeCount){for(var c=0,d=b.rangeCount;d>c;++c)b._ranges[c]=new a.WrappedRange(b.nativeSelection.getRangeAt(c));e(b,b._ranges[b.rangeCount-1],N(b.nativeSelection)),b.isCollapsed=q(b)}else f(b)};else{if(!C||"boolean"!=typeof x.isCollapsed||"boolean"!=typeof A.collapsed||!a.features.implementsDomRange)return b.fail("No means of obtaining a Range or TextRange from the user's selection was found"),!1;L=function(a){var b;b=a.nativeSelection,b.anchorNode?(b=J(b,0),a._ranges=[b],a.rangeCount=1,b=a.nativeSelection,a.anchorNode=b.anchorNode,a.anchorOffset=b.anchorOffset,a.focusNode=b.focusNode,a.focusOffset=b.focusOffset,a.isCollapsed=q(a)):f(a)}}H.refresh=function(a){var b=a?this._ranges.slice(0):null;if(L(this),a){if(a=b.length,a!=this._ranges.length)return!1;for(;a--;)if(!t.rangesEqual(b[a],this._ranges[a]))return!1;return!0}};var M=function(a,b){var c=a.getAllRanges(),d=!1;a.removeAllRanges();for(var e=0,g=c.length;g>e;++e)d||b!==c[e]?a.addRange(c[e]):d=!0;a.rangeCount||f(a)};H.removeRange=I?function(a){if("Control"==this.docSelection.type){var b=this.docSelection.createRange();a=h(a);var c=r.getDocument(b.item(0));c=r.getBody(c).createControlRange();for(var d,e=!1,f=0,g=b.length;g>f;++f)d=b.item(f),d!==a||e?c.add(b.item(f)):e=!0;c.select(),j(this)}else M(this,a)}:function(a){M(this,a)};var N;!z&&C&&a.features.implementsDomRange?(N=function(a){var b=!1;return a.anchorNode&&(b=1==r.comparePoints(a.anchorNode,a.anchorOffset,a.focusNode,a.focusOffset)),b},H.isBackwards=function(){return N(this)}):N=H.isBackwards=function(){return!1},H.toString=function(){for(var a=[],b=0,c=this.rangeCount;c>b;++b)a[b]=""+this._ranges[b];return a.join("")},H.collapse=function(b,c){n(this,b);var d=a.createRange(r.getDocument(b));d.collapseToPoint(b,c),this.removeAllRanges(),this.addRange(d),this.isCollapsed=!0},H.collapseToStart=function(){if(!this.rangeCount)throw new v("INVALID_STATE_ERR");var a=this._ranges[0];this.collapse(a.startContainer,a.startOffset)},H.collapseToEnd=function(){if(!this.rangeCount)throw new v("INVALID_STATE_ERR");var a=this._ranges[this.rangeCount-1];this.collapse(a.endContainer,a.endOffset)},H.selectAllChildren=function(b){n(this,b);var c=a.createRange(r.getDocument(b));c.selectNodeContents(b),this.removeAllRanges(),this.addRange(c)},H.deleteFromDocument=function(){if(I&&y&&"Control"==this.docSelection.type){for(var a,b=this.docSelection.createRange();b.length;)a=b.item(0),b.remove(a),a.parentNode.removeChild(a);this.refresh()}else if(this.rangeCount){b=this.getAllRanges(),this.removeAllRanges(),a=0;for(var c=b.length;c>a;++a)b[a].deleteContents();this.addRange(b[c-1])}},H.getAllRanges=function(){return this._ranges.slice(0)},H.setSingleRange=function(a){this.setRanges([a])},H.containsNode=function(a,b){for(var c=0,d=this._ranges.length;d>c;++c)if(this._ranges[c].containsNode(a,b))return!0;return!1},H.toHtml=function(){var a="";if(this.rangeCount){a=t.getRangeDocument(this._ranges[0]).createElement("div");for(var b=0,c=this._ranges.length;c>b;++b)a.appendChild(this._ranges[b].cloneContents());a=a.innerHTML}return a},H.getName=function(){return"WrappedSelection"},H.inspect=function(){return o(this)},H.detach=function(){this.win=this.anchorNode=this.focusNode=this.win._rangySelection=null},l.inspect=o,a.Selection=l,a.selectionPrototype=H,a.addCreateMissingNativeApiListener(function(b){"undefined"==typeof b.getSelection&&(b.getSelection=function(){return a.getSelection(this)}),b=null})}),function(a){var b={},c=/^(([a-z][\-a-z0-9+\.]*):)?(\/\/([^\/?#]+))?([^?#]*)?(\?([^#]*))?(#(.*))?$/i,d=function(a){var b=a.match(c);if(null===b)throw"Malformed URI: "+a;return{scheme:b[1]?b[2].toLowerCase():void 0,authority:b[3]?b[4]:void 0,path:b[5]||"",query:b[6]?b[7]:void 0,fragment:b[8]?b[9]:void 0}},e=function(a){var b="",c=[];if(/\./.test(a)){for(;void 0!==a&&""!==a;)"."===a||".."===a?a="":/^\.\.\//.test(a)?a=a.substring(3):/^\.\//.test(a)?a=a.substring(2):/^\/\.(\/|$)/.test(a)?a="/"+a.substring(3):/^\/\.\.(\/|$)/.test(a)?(a="/"+a.substring(4),b=b.replace(/\/?[^\/]+$/,"")):(c=a.match(/^(\/?[^\/]*)(\/.*)?$/),a=c[2],b+=c[1]);return b}return a},f=function(a,b){return""===a.authority||void 0!==a.path&&""!==a.path?a.path.replace(/[^\/]+$/,"")+b:"/"+b};a.uri=function(c,d){var e;return c=c||"",b[c]?b[c]:(d=d||a.uri.base(),"string"==typeof d&&(d=a.uri.absolute(d)),e=new a.uri.fn.init(c,d),b[e]?b[e]:(b[e]=e,e))},a.uri.fn=a.uri.prototype={scheme:void 0,authority:void 0,path:void 0,query:void 0,fragment:void 0,init:function(b,c){if(c=c||{},a.extend(this,d(b)),void 0===this.scheme&&(this.scheme=c.scheme,void 0!==this.authority?this.path=e(this.path):(this.authority=c.authority,""===this.path?(this.path=c.path,void 0===this.query&&(this.query=c.query)):(/^\//.test(this.path)||(this.path=f(c,this.path)),this.path=e(this.path)))),void 0===this.scheme)throw"Malformed URI: URI is not an absolute URI and no base supplied: "+b;return this},resolve:function(b){return a.uri(b,this)},relative:function(b){var c,d,e,f=0,g=[],h="";if("string"==typeof b&&(b=a.uri(b,{})),b.scheme!==this.scheme||b.authority!==this.authority)return b.toString();if(b.path!==this.path){if(c=b.path.split("/"),d=this.path.split("/"),c[1]!==d[1])h=b.path;else{for(;c[f]===d[f];)f+=1;for(e=f;f<d.length-1;f+=1)g.push("..");for(;e<c.length;e+=1)g.push(c[e]);h=g.join("/")}return h=void 0===b.query?h:h+"?"+b.query,h=void 0===b.fragment?h:h+"#"+b.fragment}return void 0!==b.query&&b.query!==this.query?"?"+b.query+(void 0===b.fragment?"":"#"+b.fragment):void 0!==b.fragment&&b.fragment!==this.fragment?"#"+b.fragment:""},toString:function(){var a="";return this._string?this._string:(a=void 0===this.scheme?a:a+this.scheme+":",a=void 0===this.authority?a:a+"//"+this.authority,a+=this.path,a=void 0===this.query?a:a+"?"+this.query,a=void 0===this.fragment?a:a+"#"+this.fragment,this._string=a,a)}},a.uri.fn.init.prototype=a.uri.fn,a.uri.absolute=function(b){return a.uri(b,{})},a.uri.resolve=function(b,c){return a.uri(b,c)},a.uri.relative=function(b,c){return a.uri(c,{}).relative(b)},a.uri.base=function(){return a(document).base()},a.fn.base=function(){var b=a(this).parents().andSelf().find("base").attr("href"),c=a(this)[0].ownerDocument||document,d=a.uri.absolute(null===c.location?document.location.href:c.location.href);return void 0===b?d:a.uri(b,d)}}(jQuery),function(a){var b="http://www.w3.org/XML/1998/namespace",c="http://www.w3.org/2000/xmlns/",d=/\sxmlns(?::([^ =]+))?\s*=\s*(?:"([^"]*)"|'([^']*)')/g,e="[-A-Z_a-zÀ-ÖØ-öø-˿Ͱ-ͽͿ-῿‌-‍⁰-↏Ⰰ-⿯、-퟿豈-﷏ﷰ-�က0-F.0-9·̀-ͯ‿-⁀]",f="[A-Za-zÀ-ÖØ-öø-ÿĀ-ıĴ-ľŁ-ňŊ-žƀ-ǃǍ-ǰǴ-ǵǺ-ȗɐ-ʨʻ-ˁΆΈ-ΊΌΎ-ΡΣ-ώϐ-ϖϚϜϞϠϢ-ϳЁ-ЌЎ-яё-ќў-ҁҐ-ӄӇ-ӈӋ-ӌӐ-ӫӮ-ӵӸ-ӹԱ-Ֆՙա-ֆא-תװ-ײء-غف-يٱ-ڷں-ھۀ-ێې-ۓەۥ-ۦअ-हऽक़-ॡঅ-ঌএ-ঐও-নপ-রলশ-হড়-ঢ়য়-ৡৰ-ৱਅ-ਊਏ-ਐਓ-ਨਪ-ਰਲ-ਲ਼ਵ-ਸ਼ਸ-ਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઋઍએ-ઑઓ-નપ-રલ-ળવ-હઽૠଅ-ଌଏ-ଐଓ-ନପ-ରଲ-ଳଶ-ହଽଡ଼-ଢ଼ୟ-ୡஅ-ஊஎ-ஐஒ-கங-சஜஞ-டண-தந-பம-வஷ-ஹఅ-ఌఎ-ఐఒ-నప-ళవ-హౠ-ౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹೞೠ-ೡഅ-ഌഎ-ഐഒ-നപ-ഹൠ-ൡก-ฮะา-ำเ-ๅກ-ຂຄງ-ຈຊຍດ-ທນ-ຟມ-ຣລວສ-ຫອ-ຮະາ-ຳຽເ-ໄཀ-ཇཉ-ཀྵႠ-Ⴥა-ჶᄀᄂ-ᄃᄅ-ᄇᄉᄋ-ᄌᄎ-ᄒᄼᄾᅀᅌᅎᅐᅔ-ᅕᅙᅟ-ᅡᅣᅥᅧᅩᅭ-ᅮᅲ-ᅳᅵᆞᆨᆫᆮ-ᆯᆷ-ᆸᆺᆼ-ᇂᇫᇰᇹḀ-ẛẠ-ỹἀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼΩK-Å℮ↀ-ↂぁ-ゔァ-ヺㄅ-ㄬ가-힣一-龥〇〡-〩_]",g=new RegExp("^"+f+e+"*$");a.fn.xmlns=function(e,f,h){var i,j,k,l,m,n=this.eq(0),o=n.data("xmlns"),p=n[0],q=e?"xmlns:"+e:"xmlns",r=!1;if(void 0===f){if(void 0===e){if(!o){if(o={},p.attributes&&p.attributes.getNamedItemNS)for(k=0;k<p.attributes.length;k+=1)i=p.attributes[k],/^xmlns(:(.+))?$/.test(i.nodeName)&&(e=/^xmlns(:(.+))?$/.exec(i.nodeName)[2]||"",l=i.nodeValue,(""===e||""!==l&&l!==b&&l!==c&&g.test(e)&&"xml"!==e&&"xmlns"!==e)&&(o[e]=a.uri(i.nodeValue),r=!0));else{for(m=/<[^>]+>/.exec(p.outerHTML),i=d.exec(m);null!==i;)e=i[1]||"",l=i[2]||i[3],(""===e||""!==l&&l!==b&&l!==c&&g.test(e)&&"xml"!==e&&"xmlns"!==e)&&(o[e]=a.uri(i[2]||i[3]),r=!0),i=d.exec(m);d.lastIndex=0}h=h||(1===p.parentNode.nodeType?n.parent().xmlns():{}),o=r?a.extend({},h,o):h,n.data("xmlns",o)}return o}if("object"==typeof e){for(j in e)"string"==typeof e[j]&&g.test(j)&&this.xmlns(j,e[j]);return this.find("*").andSelf().removeData("xmlns"),this}return o||(o=n.xmlns()),o[e]}return this.find("*").andSelf().removeData("xmlns"),this.attr(q,f)},a.fn.removeXmlns=function(a){var b,c,d;if("object"==typeof a)if(void 0===a.length)for(c in a)"string"==typeof a[c]&&this.removeXmlns(c);else for(d=0;d<a.length;d+=1)this.removeXmlns(a[d]);else b=a?"xmlns:"+a:"xmlns",this.removeAttr(b);return this.find("*").andSelf().removeData("xmlns"),this},a.fn.qname=function(a){var b,c,d;if(void 0===a&&(a=void 0===this[0].outerHTML?this[0].nodeName.toLowerCase():/<([^ >]+)/.exec(this[0].outerHTML)[1].toLowerCase()),"?xml:namespace"===a)throw"XMLinHTML: Unable to get the prefix to resolve the name of this element";if(b=/^(([^:]+):)?([^:]+)$/.exec(a),c=b[2]||"",d=this.xmlns(c),void 0===d&&""!==c)throw"MalformedQName: The prefix "+c+" is not declared";return{namespace:d,localPart:b[3],prefix:c,name:a}}}(jQuery),function(a){var b=function(a){return a.replace(/[ \t\n\r]+/," ").replace(/^ +/,"").replace(/ +$/,"")};a.typedValue=function(b,c){return a.typedValue.fn.init(b,c)},a.typedValue.fn=a.typedValue.prototype={representation:void 0,value:void 0,datatype:void 0,init:function(c,d){var e=a.typedValue.types[d];if(a.typedValue.valid(c,d))return this.representation=c,this.datatype=d,this.value=void 0===e?b(c):e.value(e.strip?b(c):c),this;throw{name:"InvalidValue",message:c+" is not a valid "+d+" value"}}},a.typedValue.fn.init.prototype=a.typedValue.fn,a.typedValue.types={},a.typedValue.types["http://www.w3.org/2001/XMLSchema#string"]={regex:/^.*$/,strip:!1,value:function(a){return a}},a.typedValue.types["http://www.w3.org/2001/XMLSchema#token"]={regex:/^.*$/,strip:!0,value:function(a){return b(a)}},a.typedValue.types["http://www.w3.org/2001/XMLSchema#NCName"]={regex:/^[a-z_][-\.a-z0-9]+$/i,strip:!0,value:function(a){return b(a)}},a.typedValue.types["http://www.w3.org/2001/XMLSchema#boolean"]={regex:/^(?:true|false|1|0)$/,strip:!0,value:function(a){return"true"===a||"1"===a}},a.typedValue.types["http://www.w3.org/2001/XMLSchema#decimal"]={regex:/^[\-\+]?(?:[0-9]+\.[0-9]*|\.[0-9]+|[0-9]+)$/,strip:!0,value:function(a){return a=a.replace(/^0+/,"").replace(/0+$/,""),""===a&&(a="0.0"),"."===a.substring(0,1)&&(a="0"+a),/\.$/.test(a)?a+="0":/\./.test(a)||(a+=".0"),a}},a.typedValue.types["http://www.w3.org/2001/XMLSchema#integer"]={regex:/^[\-\+]?[0-9]+$/,strip:!0,value:function(a){return parseInt(a,10)}},a.typedValue.types["http://www.w3.org/2001/XMLSchema#int"]={regex:/^[\-\+]?[0-9]+$/,strip:!0,value:function(a){return parseInt(a,10)}},a.typedValue.types["http://www.w3.org/2001/XMLSchema#float"]={regex:/^(?:[\-\+]?(?:[0-9]+\.[0-9]*|\.[0-9]+|[0-9]+)(?:[eE][\-\+]?[0-9]+)?|[\-\+]?INF|NaN)$/,strip:!0,value:function(a){return"-INF"===a?-1/0:"INF"===a||"+INF"===a?1/0:parseFloat(a)}},a.typedValue.types["http://www.w3.org/2001/XMLSchema#double"]={regex:a.typedValue.types["http://www.w3.org/2001/XMLSchema#float"].regex,strip:!0,value:a.typedValue.types["http://www.w3.org/2001/XMLSchema#float"].value},a.typedValue.types["http://www.w3.org/2001/XMLSchema#duration"]={regex:/^([\-\+])?P(?:([0-9]+)Y)?(?:([0-9]+)M)?(?:([0-9]+)D)?(?:T(?:([0-9]+)H)?(?:([0-9]+)M)?(?:([0-9]+(?:\.[0-9]+)?)?S)?)$/,validate:function(a){var b=this.regex.exec(a);return b[2]||b[3]||b[4]||b[5]||b[6]||b[7]},strip:!0,value:function(a){return a}},a.typedValue.types["http://www.w3.org/2001/XMLSchema#yearMonthDuration"]={regex:/^([\-\+])?P(?:([0-9]+)Y)?(?:([0-9]+)M)?$/,validate:function(a){var b=this.regex.exec(a);return b[2]||b[3]},strip:!0,value:function(a){var b=this.regex.exec(a),c=b[2]||0,d=b[3]||0;return d+=12*c,"-"===b[1]?-1*d:d}},a.typedValue.types["http://www.w3.org/2001/XMLSchema#dateTime"]={regex:/^(-?[0-9]{4,})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):(([0-9]{2})(\.([0-9]+))?)((?:[\-\+]([0-9]{2}):([0-9]{2}))|Z)?$/,validate:function(a){var b,c=this.regex.exec(a),d=parseInt(c[1],10),e=void 0===c[10]||"Z"===c[10]?"+0000":c[10].replace(/:/,"");if(0===d||parseInt(e,10)<-1400||parseInt(e,10)>1400)return!1;try{if(d=100>d?Math.abs(d)+1e3:d,month=parseInt(c[2],10),day=parseInt(c[3],10),day>31)return!1;if(day>30&&1!==month&&3!==month&&5!==month&&7!==month&&8!==month&&10!==month&&12!==month)return!1;if(2===month){if(day>29)return!1;if(29===day&&(d%4!==0||d%100===0&&d%400!==0))return!1}return b=""+d+"/"+c[2]+"/"+c[3]+" "+c[4]+":"+c[5]+":"+c[7]+" "+e,b=new Date(b),!0}catch(f){return!1}},strip:!0,value:function(a){return a}},a.typedValue.types["http://www.w3.org/2001/XMLSchema#date"]={regex:/^(-?[0-9]{4,})-([0-9]{2})-([0-9]{2})((?:[\-\+]([0-9]{2}):([0-9]{2}))|Z)?$/,validate:function(a){var b=this.regex.exec(a),c=parseInt(b[1],10),d=parseInt(b[2],10),e=parseInt(b[3],10),f=void 0===b[10]||"Z"===b[10]?"+0000":b[10].replace(/:/,"");return 0===c||d>12||e>31||parseInt(f,10)<-1400||parseInt(f,10)>1400?!1:!0},strip:!0,value:function(a){return a}},a.typedValue.types["http://www.w3.org/2001/XMLSchema#gYear"]={regex:/^-?([0-9]{4,})$/,validate:function(a){var b=parseInt(a,10);return 0!==b},strip:!0,value:function(a){return parseInt(a,10)}},a.typedValue.types["http://www.w3.org/2001/XMLSchema#gMonthDay"]={regex:/^--([0-9]{2})-([0-9]{2})((?:[\-\+]([0-9]{2}):([0-9]{2}))|Z)?$/,validate:function(a){var b=this.regex.exec(a),c=parseInt(b[1],10),d=parseInt(b[2],10),e=void 0===b[3]||"Z"===b[3]?"+0000":b[3].replace(/:/,"");return c>12||d>31||parseInt(e,10)<-1400||parseInt(e,10)>1400?!1:2===c&&d>29?!1:(4===c||6===c||9===c||11===c)&&d>30?!1:!0},strip:!0,value:function(a){return a}},a.typedValue.types["http://www.w3.org/2001/XMLSchema#anyURI"]={regex:/^.*$/,strip:!0,value:function(b,c){var d=a.extend({},a.typedValue.defaults,c);return a.uri.resolve(b,d.base)}},a.typedValue.defaults={base:a.uri.base(),namespaces:{}},a.typedValue.valid=function(c,d){var e=a.typedValue.types[d];return void 0===e?!0:(c=e.strip?b(c):c,e.regex.test(c)?void 0===e.validate?!0:e.validate(c):!1)}}(jQuery),function(a){a.curie=function(b,c){var d=a.extend({},a.curie.defaults,c||{}),e=/^(([^:]*):)?(.+)$/.exec(b),f=e[2],g=e[3],h=d.namespaces[f];if(/^:.+/.test(b)){if(void 0===d.reservedNamespace||null===d.reservedNamespace)throw"Malformed CURIE: No prefix and no default namespace for unprefixed CURIE "+b;h=d.reservedNamespace}else if(f){if(void 0===h)throw"Malformed CURIE: No namespace binding for "+f+" in CURIE "+b}else if("lower"===d.charcase?b=b.toLowerCase():"upper"===d.charcase&&(b=b.toUpperCase()),d.reserved.length&&a.inArray(b,d.reserved)>=0)h=d.reservedNamespace,g=b;else{if(void 0===d.defaultNamespace||null===d.defaultNamespace)throw"Malformed CURIE: No prefix and no default namespace for unprefixed CURIE "+b;h=d.defaultNamespace}return a.uri(h+g)},a.curie.defaults={namespaces:{},reserved:[],reservedNamespace:void 0,defaultNamespace:void 0,charcase:"preserve"},a.safeCurie=function(b,c){var d=/^\[([^\]]+)\]$/.exec(b);return d?a.curie(d[1],c):a.uri(b)},a.createCurie=function(b,c){var d,e=a.extend({},a.curie.defaults,c||{}),f=e.namespaces;if(b=a.uri(b).toString(),void 0!==e.reservedNamespace&&b.substring(0,e.reservedNamespace.toString().length)===e.reservedNamespace.toString()?(d=b.substring(e.reservedNamespace.toString().length),-1===a.inArray(d,e.reserved)&&(d=":"+d)):a.each(f,function(a,c){return b.substring(0,c.toString().length)===c.toString()?(d=a+":"+b.substring(c.toString().length),null):void 0}),void 0===d)throw"No Namespace Binding: There's no appropriate namespace binding for generating a CURIE from "+b;return d},a.fn.curie=function(b,c){var d=a.extend({},a.fn.curie.defaults,{namespaces:this.xmlns()},c||{});return a.curie(b,d)},a.fn.safeCurie=function(b,c){var d=a.extend({},a.fn.curie.defaults,{namespaces:this.xmlns()},c||{});return a.safeCurie(b,d)},a.fn.createCurie=function(b,c){var d=a.extend({},a.fn.curie.defaults,{namespaces:this.xmlns()},c||{});return a.createCurie(b,d)},a.fn.curie.defaults={reserved:["alternate","appendix","bookmark","cite","chapter","contents","copyright","first","glossary","help","icon","index","last","license","meta","next","p3pv1","prev","role","section","stylesheet","subsection","start","top","up"],reservedNamespace:"http://www.w3.org/1999/xhtml/vocab#",defaultNamespace:void 0,charcase:"lower"}}(jQuery),function(a){var b={},c={},d={},e={},f={},g="http://www.w3.org/2001/XMLSchema#",h="http://www.w3.org/1999/02/22-rdf-syntax-ns#",i="http://www.w3.org/2000/01/rdf-schema#",j=/^<(([^>]|\\>)*)>$/,k=/^("""((\\"|[^"])*)"""|"((\\"|[^"])*)")(@([a-z]+(-[a-z0-9]+)*)|\^\^(.+))?$/,l=/(("""((\\"|[^"])*)""")|("(\\"|[^"]|)*")|(<(\\>|[^>])*>)|\S)+/g,m=databankSeed=(new Date).getTime()%1e3,n=function(){return m+=1,"b"+m.toString(16)},o=function(){return databankSeed+=1,"data"+databankSeed.toString(16)},q={},r={},s=function(b,c){if("string"!=typeof b)return b;try{return a.rdf.resource(b,c)}catch(d){try{return a.rdf.blank(b,c)}catch(e){throw"Bad Triple: Subject "+b+" is not a resource: "+e}}},t=function(b,c){if("a"===b)return a.rdf.type;if("string"!=typeof b)return b;try{return a.rdf.resource(b,c)}catch(d){throw"Bad Triple: Property "+b+" is not a resource: "+d}},u=function(b,c){if("string"!=typeof b)return b;try{return a.rdf.resource(b,c)}catch(d){try{return a.rdf.blank(b,c)}catch(e){try{return a.rdf.literal(b,c)}catch(f){throw"Bad Triple: Object "+b+" is not a resource or a literal "+f}}}},w=function(a,b,c){var d;return"string"==typeof b?(d=b.substring(1),c[d]&&c[d]!==a?null:(c[d]=a,c)):b===a?c:null},x=function(b,c){if(void 0===b.union){if(void 0!==c.subject.type)return void 0===b.subjectIndex[c.subject]?[]:a.map(b.subjectIndex[c.subject],function(a){var b=c.exec(a);return null===b?null:{bindings:b,triples:[a]}});if("uri"===c.object.type||"bnode"===c.object.type)return void 0===b.objectIndex[c.object]?[]:a.map(b.objectIndex[c.object],function(a){var b=c.exec(a);return null===b?null:{bindings:b,triples:[a]}});if(void 0!==c.property.type)return void 0===b.propertyIndex[c.property]?[]:a.map(b.propertyIndex[c.property],function(a){var b=c.exec(a);return null===b?null:{bindings:b,triples:[a]}})}return a.map(b.triples(),function(a){var b=c.exec(a);return null===b?null:{bindings:b,triples:[a]}})},y=function(b,c,d){return a.map(b,function(b,e){var f=a.map(c,function(a){var c,d,e=!0;for(c in a.bindings)if(d=a.bindings[c],void 0!==b.bindings[c]&&b.bindings[c]!==d){e=!1;break}return e?a:null});return f.length>0?a.map(f,function(c){return{bindings:a.extend({},b.bindings,c.bindings),triples:P(b.triples.concat(c.triples))}}):d?b:null})},z=function(b,c){var d,e,f;void 0===c.filterExp||a.isFunction(c.filterExp)||(void 0===b.union?(d="string"==typeof c.filterExp.subject?"":c.filterExp.subject,e="string"==typeof c.filterExp.property?"":c.filterExp.property,f="string"==typeof c.filterExp.object?"":c.filterExp.object,void 0===b.queries[d]&&(b.queries[d]={}),void 0===b.queries[d][e]&&(b.queries[d][e]={}),void 0===b.queries[d][e][f]&&(b.queries[d][e][f]=[]),b.queries[d][e][f].push(c)):a.each(b.union,function(a,b){z(b,c)}))},A=function(b){b.length=0,b.matches=[],a.each(b.children,function(a,b){A(b)}),a.each(b.partOf,function(a,b){A(b)})},B=function(b,c){c.length>0&&(a.each(b.children,function(a,b){E(b,c)}),a.each(b.partOf,function(a,b){B(b,c)}),a.each(c,function(a,c){b.matches.push(c),Array.prototype.push.call(b,c.bindings)}))},C=function(a,b){var c,d,e,f,g,h,i,j=b.length,k={},l={},m={},n=[];for(c=0;c<a.length;c+=1)for(d=a[c].bindings,e=a[c].triples,l=m,f=0;j>f;f+=1)if(h=b[f],i=d[h],f===j-1)if(void 0===l[i]){for(k={bindings:{},triples:e},g=0;j>g;g+=1)k.bindings[b[g]]=d[b[g]];l[i]=k,n.push(k)}else k=l[i],k.triples=k.triples.concat(e);else void 0===l[i]&&(l[i]={}),l=l[i];return n},D=function(a,b){var c,d,e,f={},g=[];for(c=0;c<a.length;c+=1)d=a[c],void 0===f[d.bindings[b]]?(e={bindings:{node:d.bindings[b]},triples:d.triples},g.push(e),f[d.bindings[b]]=e):(e=f[d.bindings[b]],e.triples=e.triples.concat(d.triples));return g},E=function(b,c){var d;void 0===b.union?b.top||b.parent.top?d=b.alphaMemory:(c=c||b.parent.matches,d=a.isFunction(b.filterExp)?a.map(c,function(a,c){return b.filterExp.call(a.bindings,c,a.bindings,a.triples)?a:null}):void 0!==b.filterExp?y(c,b.alphaMemory,b.filterExp.optional):c):d=a.map(b.union,function(a){return a.matches}),void 0!==b.selections?d=C(d,b.selections):void 0!==b.navigate&&(d=D(d,b.navigate)),B(b,d)},F=function(a,b){var c;a.filterExp.optional?(A(a),E(a)):(c=a.top||a.parent.top?[b]:y(a.parent.matches,[b],!1),B(a,c))},G=function(a,b){var c,d=a.filterExp.exec(b);null!==d&&(c={triples:[b],bindings:d},a.alphaMemory.push(c),F(a,c))},H=function(b,c){b.alphaMemory.splice(a.inArray(c,b.alphaMemory),1),A(b),E(b)},I=function(b,c){a.each(b,function(a,b){G(b,c)})},J=function(b,c){a.each(b,function(a,b){H(b,c)})},K=function(b,c){var d=c.subject,e=c.property,f=c.object;void 0===b.union?(void 0!==b.queries[d]&&(void 0!==b.queries[d][e]&&(void 0!==b.queries[d][e][f]&&I(b.queries[d][e][f],c),void 0!==b.queries[d][e][""]&&I(b.queries[d][e][""],c)),void 0!==b.queries[d][""]&&(void 0!==b.queries[d][""][f]&&I(b.queries[d][""][f],c),void 0!==b.queries[d][""][""]&&I(b.queries[d][""][""],c))),void 0!==b.queries[""]&&(void 0!==b.queries[""][e]&&(void 0!==b.queries[""][e][f]&&I(b.queries[""][e][f],c),void 0!==b.queries[""][e][""]&&I(b.queries[""][e][""],c)),void 0!==b.queries[""][""]&&(void 0!==b.queries[""][""][f]&&I(b.queries[""][""][f],c),void 0!==b.queries[""][""][""]&&I(b.queries[""][""][""],c)))):a.each(b.union,function(a,b){K(b,c)})},L=function(b,c){var d=c.subject,e=c.property,f=c.object;void 0===b.union?(void 0!==b.queries[d]&&(void 0!==b.queries[d][e]&&(void 0!==b.queries[d][e][f]&&J(b.queries[d][e][f],c),void 0!==b.queries[d][e][""]&&J(b.queries[d][e][""],c)),void 0!==b.queries[d][""]&&(void 0!==b.queries[d][""][f]&&J(b.queries[d][""][f],c),void 0!==b.queries[d][""][""]&&J(b.queries[d][""][""],c))),void 0!==b.queries[""]&&(void 0!==b.queries[""][e]&&(void 0!==b.queries[""][e][f]&&J(b.queries[""][e][f],c),void 0!==b.queries[""][e][""]&&J(b.queries[""][e][""],c)),void 0!==b.queries[""][""]&&(void 0!==b.queries[""][""][f]&&J(b.queries[""][""][f],c),
void 0!==b.queries[""][""][""]&&J(b.queries[""][""][""],c)))):a.each(b.union,function(a,b){L(b,c)})},M=function(b,c,d){var e,f,g=c[0],h={},i=[];if(d=d||{},0===c.length){for(e=0;e<b.length;e+=1)for(v in b[e])void 0===d[v]&&(d[v]=[]),a.isArray(d[v])&&d[v].push(b[e][v]);return[d]}for(e=0;e<b.length;e+=1)key=b[e][g],void 0===h[key]&&(h[key]=[]),h[key].push(b[e]);c=c.splice(1,1);for(v in h)f=a.extend({},d),f[g]=h[v][0][g],i=i.concat(M(h[v],c,f));return i},N=function(a,b,c){return void 0===r[a.id]&&(r[a.id]={}),void 0===r[a.id][b]?(r[a.id][b]=c,!1):!0},O=function(b,c,d,e){var f=r[b.id][c];a.isFunction(f[d])&&f[d].call(b,e),r[b.id][c]=void 0},P=function(a){for(var b=[],c=a.length,d=0;c>d;d++){for(var e=d+1;c>e;e++)a[d]===a[e]&&(e=++d);b.push(a[d])}return b};a.typedValue.types["http://www.w3.org/1999/02/22-rdf-syntax-ns#XMLLiteral"]={regex:/^.*$/m,strip:!1,value:function(a){return a}},a.rdf=function(b){return new a.rdf.fn.init(b)},a.rdf.fn=a.rdf.prototype={rdfquery:"1.1",init:function(b){var c,d;if(b=b||{},this.parent=b.parent,this.union=b.union,this.top=void 0===this.parent&&void 0===this.union,void 0===this.union?void 0===b.databank?this.databank=void 0===this.parent?a.rdf.databank(b.triples,b):this.parent.databank:this.databank=b.databank:(c=a.map(this.union,function(a){return a.databank}),c=P(c),void 0!==c[1]?this.databank=a.rdf.databank(void 0,{union:c}):this.databank=c[0]),this.children=[],this.partOf=[],this.filterExp=b.filter,this.selections=b.distinct,this.navigate=b.navigate,this.alphaMemory=[],this.matches=[],this.length=0,void 0!==this.filterExp)a.isFunction(this.filterExp)||(z(this.databank,this),this.alphaMemory=x(this.databank,this.filterExp));else if(void 0!==b.nodes)for(this.alphaMemory=[],d=0;d<b.nodes.length;d+=1)this.alphaMemory.push({bindings:{node:b.nodes[d]},triples:[]});return E(this),this},base:function(a){return void 0===a?this.databank.base():(this.databank.base(a),this)},prefix:function(a,b){return void 0===b?this.databank.prefix(a):(this.databank.prefix(a,b),this)},add:function(b,c){var d,e;if(void 0!==b.rdfquery){if(b.top)return e=this.databank.add(b.databank),d=a.rdf({parent:this.parent,databank:e});if(this.top)return e=b.databank.add(this.databank),d=a.rdf({parent:b.parent,databank:e});if(void 0===this.union)return d=a.rdf({union:[this,b]}),this.partOf.push(d),b.partOf.push(d),d;this.union.push(b),b.partOf.push(this)}else"string"==typeof b&&(c=a.extend({},{base:this.base(),namespaces:this.prefix(),source:b},c),b=a.rdf.pattern(b,c)),b.isFixed()?this.databank.add(b.triple(),c):(d=this,this.each(function(a,e){var f=b.triple(e);null!==f&&d.databank.add(f,c)}));return this},remove:function(b,c){return"string"==typeof b&&(c=a.extend({},{base:this.base(),namespaces:this.prefix()},c),b=a.rdf.pattern(b,c)),b.isFixed()?this.databank.remove(b.triple(),c):(query=this,this.each(function(a,d){var e=b.triple(d);null!==e&&query.databank.remove(e,c)})),this},load:function(a,b){var c=this,b=b||{},d=b.success;return void 0!==d&&(b.success=function(){d.call(c)}),this.databank.load(a,b),this},except:function(b){return a.rdf({databank:this.databank.except(b.databank)})},where:function(b,c){var d,e,f,g;return c=c||{},"string"==typeof b&&(e=c.base||this.base(),f=a.extend({},this.prefix(),c.namespaces||{}),g=c.optional||!1,b=a.rdf.pattern(b,{namespaces:f,base:e,optional:g})),d=a.rdf(a.extend({},c,{parent:this,filter:b})),this.children.push(d),d},optional:function(b,c){return this.where(b,a.extend({},c||{},{optional:!0}))},about:function(a,b){return this.where(a+" ?property ?value",b)},filter:function(b,c){var d,e;return d="string"==typeof b?c.constructor===RegExp?function(){return c.test(this[b].value)}:function(){return"literal"===this[b].type?this[b].value===c:this[b]===c}:b,e=a.rdf({parent:this,filter:d}),this.children.push(e),e},node:function(b){var c,d;return"?"===b.toString().substring(0,1)?(c=b.toString().substring(1),d=a.rdf({parent:this,navigate:c})):("string"==typeof b&&(b=u(b,{namespaces:this.prefix(),base:this.base()})),d=a.rdf({parent:this,nodes:[b]})),this.children.push(d),d},find:function(a){return this.where("?node "+a+" ?object",{navigate:"object"})},back:function(a){return this.where("?subject "+a+" ?node",{navigate:"subject"})},group:function(b){return a.isArray(b)||(b=[b]),a(M(this,b))},select:function(a){var b,c,d=[];for(b=0;b<this.length;b+=1)if(void 0===a)d[b]=this[b];else for(d[b]={},c=0;c<a.length;c+=1)d[b][a[c]]=this[b][a[c]];return d},describe:function(a){var b,c,d,e=[];for(b=0;b<a.length;b+=1)if(d=a[b],"?"===d.substring(0,1))for(d=d.substring(1),c=0;c<this.length;c+=1)e.push(this[c][d]);else e.push(d);return this.databank.describe(e)},eq:function(a){return this.filter(function(b){return b===a})},reset:function(){for(var a=this;void 0!==a.parent;)a=a.parent;return a},end:function(){return this.parent},size:function(){return this.length},sources:function(){return a(a.map(this.matches,function(a){return[a.triples]}))},dump:function(b){var c=a.map(this.matches,function(a){return a.triples});return b=a.extend({namespaces:this.databank.namespaces,base:this.databank.base},b||{}),a.rdf.dump(c,b)},get:function(b){return void 0===b?a.makeArray(this):this[b]},each:function(b){return a.each(this.matches,function(a,c){b.call(c.bindings,a,c.bindings,c.triples)}),this},map:function(b){return a(a.map(this.matches,function(a,c){return b.call(a.bindings,c,a.bindings,a.triples)}))},jquery:function(){return a(this)}},a.rdf.fn.init.prototype=a.rdf.fn,a.rdf.gleaners=[],a.rdf.parsers={},a.rdf.dump=function(b,c){var d,e,f,g=a.extend({},a.rdf.dump.defaults,c||{}),h=g.format,i=g.serialize;if(e=a.rdf.parsers[h],void 0===e){f=[];for(p in a.rdf.parsers)f.push(p);throw"Unrecognised dump format: "+h+". Expected one of "+f.join(", ")}return d=e.dump(b,g),i?e.serialize(d):d},a.rdf.dump.defaults={format:"application/json",serialize:!1,indent:!1,namespaces:{}},a.fn.rdf=function(b){var c=[],b=b||function(){return this};return a(this)[0]&&9===a(this)[0].nodeType?a(this).children("*").rdf(b):a(this).length>0?(c=a(this).map(function(c,d){return a.map(a.rdf.gleaners,function(c){return c.gleaner.call(a(d),{callback:b})})}),a.rdf({triples:c,namespaces:a(this).xmlns()})):a.rdf()},a.extend(a.expr[":"],{about:function(b,c,d){var e=a(b),f=d[3]?e.safeCurie(d[3]):null,g=!1;return a.each(a.rdf.gleaners,function(a,b){g|=b.gleaner.call(e,{about:f})}),g},type:function(b,c,d){var e=a(b),f=d[3]?e.curie(d[3]):null,g=!1;return a.each(a.rdf.gleaners,function(a,b){g|=b.gleaner.call(e,{type:f})}),g},itemid:function(b,c,d){var e=a(b),f=d[3]?e.safeCurie(d[3]):null,g=!1;return a.each(a.rdf.gleaners,function(a,b){g|=b.gleaner.call(e,{itemid:f})}),g},itemtype:function(b,c,d){var e=a(b),f=d[3]?e.curie(d[3]):null,g=!1;return a.each(a.rdf.gleaners,function(a,b){g|=b.gleaner.call(e,{itemtype:f})}),g}}),a.rdf.databank=function(b,c){return new a.rdf.databank.fn.init(b,c)},a.rdf.databank.fn=a.rdf.databank.prototype={init:function(b,c){var d;if(b=b||[],c=c||{},this.id=o(),q[this.id]=this,void 0===c.union)for(this.queries={},this.tripleStore=[],this.subjectIndex={},this.propertyIndex={},this.objectIndex={},this.baseURI=c.base||a.uri.base(),this.namespaces=a.extend({},c.namespaces||{}),d=0;d<b.length;d+=1)this.add(b[d]);else this.union=c.union;return this},base:function(b){return void 0===this.union?void 0===b?this.baseURI:(this.baseURI=b,this):void 0===b?this.union[0].base():(a.each(this.union,function(a,c){c.base(b)}),this)},prefix:function(b,c){var d={};return void 0===this.union?void 0===b?this.namespaces:void 0===c?this.namespaces[b]:(this.namespaces[b]=c,this):void 0===c?(a.each(this.union,function(b,c){a.extend(d,c.prefix())}),void 0===b?d:d[b]):(a.each(this.union,function(a,d){d.prefix(b,c)}),this)},add:function(b,c){var d,e=c&&c.base||this.base(),f=a.extend({},this.prefix(),c&&c.namespaces||{}),g=c&&c.depth||a.rdf.databank.defaults.depth,h=c&&c.proxy||a.rdf.databank.defaults.proxy;return b===this?this:void 0!==b.subjectIndex?void 0===this.union?d=a.rdf.databank(void 0,{union:[this,b]}):(this.union.push(b),this):("string"==typeof b&&(b=a.rdf.triple(b,{namespaces:f,base:e,source:b})),void 0===this.union?(void 0===this.subjectIndex[b.subject]&&(this.subjectIndex[b.subject]=[],g>0&&"uri"===b.subject.type&&this.load(b.subject.value,{depth:g-1,proxy:h})),void 0===this.propertyIndex[b.property]&&(this.propertyIndex[b.property]=[],g>0&&this.load(b.property.value,{depth:g-1,proxy:h})),-1===a.inArray(b,this.subjectIndex[b.subject])&&(this.tripleStore.push(b),this.subjectIndex[b.subject].push(b),this.propertyIndex[b.property].push(b),("uri"===b.object.type||"bnode"===b.object.type)&&(void 0===this.objectIndex[b.object]&&(this.objectIndex[b.object]=[],g>0&&"uri"===b.object.type&&this.load(b.object.value,{depth:g-1,proxy:h})),this.objectIndex[b.object].push(b)),K(this,b))):a.each(this.union,function(a,c){c.add(b)}),this)},remove:function(b,c){var d,e,f,g=c&&c.base||this.base(),h=a.extend({},this.prefix(),c&&c.namespaces||{});return"string"==typeof b&&(b=a.rdf.triple(b,{namespaces:h,base:g,source:b})),this.tripleStore.splice(a.inArray(b,this.tripleStore),1),d=this.subjectIndex[b.subject],void 0!==d&&(d.splice(a.inArray(b,d),1),0===a(d).size()&&delete this.subjectIndex[b.subject]),e=this.propertyIndex[b.property],void 0!==e&&(e.splice(a.inArray(b,e),1),0===a(e).size()&&delete this.propertyIndex[b.property]),("uri"===b.object.type||"bnode"===b.object.type)&&(f=this.objectIndex[b.object],void 0!==f&&(f.splice(a.inArray(b,f),1),0===a(f).size()&&delete this.objectIndex[b.object])),L(this,b),this},except:function(b){var c=b.subjectIndex,d=[];return a.each(this.subjectIndex,function(b,e){var f=c[b];void 0===f?d=d.concat(e):a.each(e,function(b,c){-1===a.inArray(c,f)&&d.push(c)})}),a.rdf.databank(d)},triples:function(){var b=[];return void 0===this.union?b=this.tripleStore:(a.each(this.union,function(a,c){b=b.concat(c.triples().get())}),b=P(b)),a(b)},size:function(){return this.triples().length},describe:function(b){for(var c,d,e,f={},g=[];b.length>0;)if(d=b.pop(),void 0===f[d]){if(void 0===d.value&&(d=a.rdf.resource(d)),void 0!==this.subjectIndex[d])for(c=0;c<this.subjectIndex[d].length;c+=1)e=this.subjectIndex[d][c],g.push(e),"bnode"===e.object.type&&b.push(e.object);if(void 0!==this.objectIndex[d])for(c=0;c<this.objectIndex[d].length;c+=1)e=this.objectIndex[d][c],g.push(e),"bnode"===e.subject.type&&b.push(e.subject);f[d]=!0}return P(g)},dump:function(b){return b=a.extend({namespaces:this.namespaces,base:this.base},b||{}),a.rdf.dump(this.triples(),b)},load:function(b,c){var d,e,f,g,h,i,j=c&&c.format,k=c&&c.async||a.rdf.databank.defaults.async,l=c&&c.success||a.rdf.databank.defaults.success,m=c&&c.error||a.rdf.databank.defaults.error,n=c&&c.proxy||a.rdf.databank.defaults.proxy,o=c&&c.depth||a.rdf.databank.defaults.depth;if(f="string"==typeof b&&"http://"===b.substring(1,7)?a.uri(b):b,f.scheme)return N(this,f,{success:l,error:m})||(g='<script type="text/javascript" src="'+n+"?id="+this.id+"&amp;depth="+o+"&amp;url="+encodeURIComponent(f.resolve("").toString())+'"></script>',k?setTimeout("$('head').append('"+g+"')",0):a("head").append(g)),this;for(void 0===j&&("string"==typeof b?j="{"===b.substring(0,1)?"application/json":"<!DOCTYPE html"===b.substring(0,14)||"<html"===b.substring(0,5)?"application/xhtml+xml":"<?xml"===b.substring(0,5)||"<rdf:RDF"===b.substring(0,8)?"application/rdf+xml":"text/turtle":b.documentElement||b.ownerDocument?(i=b.documentElement?b.documentElement:b.ownerDocument.documentElement,j="html"===i.nodeName?"application/xhtml+xml":"application/rdf+xml"):j="application/json"),h=a.rdf.parsers[j],"string"==typeof b&&(b=h.parse(b)),e=h.triples(b),d=0;d<e.length;d+=1)this.add(e[d],c);return this},toString:function(){return"[Databank with "+this.size()+" triples]"}},a.rdf.databank.fn.init.prototype=a.rdf.databank.fn,a.rdf.databank.defaults={parse:!1,async:!0,success:null,error:null,depth:0,proxy:"http://www.jenitennison.com/rdfquery/proxy.php"},a.rdf.databank.load=function(a,b,c,d){void 0!==c&&q[a].load(c,d),O(q[a],b,void 0===c?"error":"success",d)},a.rdf.pattern=function(b,c,d,e){var g,h,i;if(void 0===d){if(e=c||{},h=a.trim(b).match(l),3!==h.length&&(4!==h.length||"."!==h[3]))throw"Bad Pattern: Couldn't parse string "+b;b=h[0],c=h[1],d=h[2],i=void 0===e.optional?a.rdf.pattern.defaults.optional:e.optional}return f[b]&&f[b][c]&&f[b][c][d]&&f[b][c][d][i]?f[b][c][d][i]:(g=new a.rdf.pattern.fn.init(b,c,d,e),f[g.subject]&&f[g.subject][g.property]&&f[g.subject][g.property][g.object]&&f[g.subject][g.property][g.object][g.optional]?f[g.subject][g.property][g.object][g.optional]:(void 0===f[g.subject]&&(f[g.subject]={}),void 0===f[g.subject][g.property]&&(f[g.subject][g.property]={}),void 0===f[g.subject][g.property][g.object]&&(f[g.subject][g.property][g.object]={}),f[g.subject][g.property][g.object][g.optional]=g,g))},a.rdf.pattern.fn=a.rdf.pattern.prototype={init:function(b,c,d,e){var f=a.extend({},a.rdf.pattern.defaults,e);return this.subject="?"===b.toString().substring(0,1)?b:s(b,f),this.property="?"===c.toString().substring(0,1)?c:t(c,f),this.object="?"===d.toString().substring(0,1)?d:u(d,f),this.optional=f.optional,this},fill:function(b){var c=this.subject,d=this.property,e=this.object;return"string"==typeof c&&b[c.substring(1)]&&(c=b[c.substring(1)]),"string"==typeof d&&b[d.substring(1)]&&(d=b[d.substring(1)]),"string"==typeof e&&b[e.substring(1)]&&(e=b[e.substring(1)]),a.rdf.pattern(c,d,e,{optional:this.optional})},exec:function(a){var b={};return b=w(a.subject,this.subject,b),null===b?null:(b=w(a.property,this.property,b),null===b?null:b=w(a.object,this.object,b))},isFixed:function(){return"string"!=typeof this.subject&&"string"!=typeof this.property&&"string"!=typeof this.object},triple:function(b){var c=this;return this.isFixed()||(c=this.fill(b)),c.isFixed()?a.rdf.triple(c.subject,c.property,c.object,{source:this.toString()}):null},toString:function(){return this.subject+" "+this.property+" "+this.object}},a.rdf.pattern.fn.init.prototype=a.rdf.pattern.fn,a.rdf.pattern.defaults={base:a.uri.base(),namespaces:{},optional:!1},a.rdf.triple=function(b,c,d,f){var g,h,i;if(void 0===d){if(f=c,i=a.trim(b).match(l),3!==i.length&&(4!==i.length||"."!==i[3]))throw"Bad Triple: Couldn't parse string "+b;b=i[0],c=i[1],d=i[2]}return h=f&&f.graph||"",e[h]&&e[h][b]&&e[h][b][c]&&e[h][b][c][d]?e[h][b][c][d]:(g=new a.rdf.triple.fn.init(b,c,d,f),h=g.graph||"",e[h]&&e[h][g.subject]&&e[h][g.subject][g.property]&&e[h][g.subject][g.property][g.object]?e[h][g.subject][g.property][g.object]:(void 0===e[h]&&(e[h]={}),void 0===e[h][g.subject]&&(e[h][g.subject]={}),void 0===e[h][g.subject][g.property]&&(e[h][g.subject][g.property]={}),e[h][g.subject][g.property][g.object]=g,g))},a.rdf.triple.fn=a.rdf.triple.prototype={init:function(b,c,d,e){var f;return f=a.extend({},a.rdf.triple.defaults,e),this.subject=s(b,f),this.property=t(c,f),this.object=u(d,f),this.graph=void 0===f.graph?void 0:s(f.graph,f),this.source=f.source,this},isFixed:function(){return!0},triple:function(a){return this},dump:function(){var a={},b=this.subject.value.toString(),c=this.property.value.toString();return a[b]={},a[b][c]=this.object.dump(),a},toString:function(){return this.subject+" "+this.property+" "+this.object+" ."}},a.rdf.triple.fn.init.prototype=a.rdf.triple.fn,a.rdf.triple.defaults={base:a.uri.base(),source:[document],namespaces:{}},a.rdf.resource=function(c,d){var e;return b[c]?b[c]:(e=new a.rdf.resource.fn.init(c,d),b[e]?b[e]:(b[e]=e,e))},a.rdf.resource.fn=a.rdf.resource.prototype={type:"uri",value:void 0,init:function(b,c){var d,e,f,g;if("string"==typeof b)if(d=j.exec(b),g=a.extend({},a.rdf.resource.defaults,c),null!==d)this.value=a.uri.resolve(d[1].replace(/\\>/g,">"),g.base);else if(":"===b.substring(0,1)){if(f=g.namespaces[""],void 0===f)throw"Malformed Resource: No namespace binding for default namespace in "+b;this.value=a.uri.resolve(f+b.substring(1))}else if(":"===b.substring(b.length-1)){if(e=b.substring(0,b.length-1),f=g.namespaces[e],void 0===f)throw"Malformed Resource: No namespace binding for prefix "+e+" in "+b;this.value=a.uri.resolve(f)}else try{this.value=a.curie(b,{namespaces:g.namespaces})}catch(h){throw"Malformed Resource: Bad format for resource "+h}else this.value=b;return this},dump:function(){return{type:"uri",value:this.value.toString()}},toString:function(){return"<"+this.value+">"}},a.rdf.resource.fn.init.prototype=a.rdf.resource.fn,a.rdf.resource.defaults={base:a.uri.base(),namespaces:{}},a.rdf.type=a.rdf.resource("<"+h+"type>"),a.rdf.label=a.rdf.resource("<"+i+"label>"),a.rdf.first=a.rdf.resource("<"+h+"first>"),a.rdf.rest=a.rdf.resource("<"+h+"rest>"),a.rdf.nil=a.rdf.resource("<"+h+"nil>"),a.rdf.subject=a.rdf.resource("<"+h+"subject>"),a.rdf.property=a.rdf.resource("<"+h+"property>"),a.rdf.object=a.rdf.resource("<"+h+"object>"),a.rdf.blank=function(b){var d;return c[b]?c[b]:(d=new a.rdf.blank.fn.init(b),c[d]?c[d]:(c[d]=d,d))},a.rdf.blank.fn=a.rdf.blank.prototype={type:"bnode",value:void 0,id:void 0,init:function(a){if("[]"===a)this.id=n(),this.value="_:"+this.id;else{if("_:"!==a.substring(0,2))throw"Malformed Blank Node: "+a+" is not a legal format for a blank node";this.id=a.substring(2),this.value=a}return this},dump:function(){return{type:"bnode",value:this.value}},toString:function(){return this.value}},a.rdf.blank.fn.init.prototype=a.rdf.blank.fn,a.rdf.literal=function(b,c){var e;return d[b]?d[b]:(e=new a.rdf.literal.fn.init(b,c),d[e]?d[e]:(d[e]=e,e))},a.rdf.literal.fn=a.rdf.literal.prototype={type:"literal",value:void 0,lang:void 0,datatype:void 0,init:function(b,c){var d,e,f=a.extend({},a.rdf.literal.defaults,c);if(e=a.safeCurie(f.datatype,{namespaces:f.namespaces}),void 0!==f.lang&&void 0!==f.datatype&&e.toString()!==h+"XMLLiteral")throw"Malformed Literal: Cannot define both a language and a datatype for a literal ("+b+")";if(void 0!==f.datatype)e=a.safeCurie(f.datatype,{namespaces:f.namespaces}),a.extend(this,a.typedValue(b.toString(),e)),e.toString()===h+"XMLLiteral"&&(this.lang=f.lang);else if(void 0!==f.lang)this.value=b.toString(),this.lang=f.lang;else if("boolean"==typeof b)a.extend(this,a.typedValue(b.toString(),g+"boolean"));else if("number"==typeof b)a.extend(this,a.typedValue(b.toString(),g+"double"));else if("true"===b||"false"===b)a.extend(this,a.typedValue(b,g+"boolean"));else if(a.typedValue.valid(b,g+"integer"))a.extend(this,a.typedValue(b,g+"integer"));else if(a.typedValue.valid(b,g+"decimal"))a.extend(this,a.typedValue(b,g+"decimal"));else if(a.typedValue.valid(b,g+"double")&&!/^\s*([\-\+]?INF|NaN)\s*$/.test(b))a.extend(this,a.typedValue(b,g+"double"));else{if(d=k.exec(b),null===d)throw"Malformed Literal: Couldn't recognise the value "+b;this.value=(d[2]||d[4]).replace(/\\"/g,'"').replace(/\\n/g,"\n").replace(/\\t/g,"	").replace(/\\r/g,"\r"),d[9]?(e=a.rdf.resource(d[9],f),a.extend(this,a.typedValue(this.value,e.value))):d[7]&&(this.lang=d[7])}return this},dump:function(){var a={type:"literal",value:this.value.toString()};return void 0!==this.lang?a.lang=this.lang:void 0!==this.datatype&&(a.datatype=this.datatype.toString()),a},toString:function(){var a='"'+this.value+'"';return void 0!==this.lang?a+="@"+this.lang:void 0!==this.datatype&&(a+="^^<"+this.datatype+">"),a}},a.rdf.literal.fn.init.prototype=a.rdf.literal.fn,a.rdf.literal.defaults={base:a.uri.base(),namespaces:{},datatype:void 0,lang:void 0}}(jQuery),function(a){a.rdf.parsers["application/json"]={parse:a.secureEvalJSON,serialize:a.toJSON,triples:function(b){var c,d,e,f,g,h,i,j,k=[];for(c in b){d="_:"===c.substring(0,2)?a.rdf.blank(c):a.rdf.resource("<"+c+">");for(e in b[c])for(f=a.rdf.resource("<"+e+">"),i=0;i<b[c][e].length;i+=1){if(g=b[c][e][i],"uri"===g.type)h=a.rdf.resource("<"+g.value+">");else if("bnode"===g.type)h=a.rdf.blank(g.value);else if(void 0!==g.datatype)h=a.rdf.literal(g.value,{datatype:g.datatype});else{j={},void 0!==g.lang&&(j.lang=g.lang);var l="string"==typeof g.value?g.value.replace(/\"/g,'\\"'):g.value;h=a.rdf.literal('"'+l+'"',j)}k.push(a.rdf.triple(d,f,h))}}return k},dump:function(a){var b,c,d,e,f={};for(b=0;b<a.length;b+=1)c=a[b],d=c.subject.value.toString(),e=c.property.value.toString(),void 0===f[d]&&(f[d]={}),void 0===f[d][e]&&(f[d][e]=[]),f[d][e].push(c.object.dump());return f}}}(jQuery),function(a){var b=/^(\u0009|\u000A|\u000D|\u0020|#([^\u000A\u000D])*)+/,c="A-Z_a-zÀ-ÖØ-öø-˿Ͱ-ͽͿ-῿‌-‍⁰-↏Ⰰ-⿯、-퟿豈-﷏ﷰ-�",d="-"+c+"0-9·̀-ͯ‿-⁀",e=new RegExp("^["+c+"]["+d+"]*"),f=/^(\\u[0-9A-F]{4}|\\U[0-9A-F]{8}|\\\\|\\>|[\u0020-\u003D\u003F-\u005B\u005D-\u10FFFF])*/,g=/^(true|false)[\s\.;,)\]]/,h=/^(-|\+)?([0-9]+\.[0-9]*[eE](-|\+)?[0-9]+|\.[0-9]+[eE](-|\+)?[0-9]+|[0-9]+[eE](-|\+)?[0-9]+)/,i=/^(-|\+)?(([0-9]+\.[0-9]*)|(\.[0-9]))+/,j=/^(-|\+)?[0-9]+/,k=/^(\\u[0-9A-F]{4}|\\U[0-9A-F]{8}|\\\\|[\u0020-\u0021\u0023-\u005B]|[\u005D-\u10FFFF]|\\t|\\n|\\r|\\")*/,l=/^(\\u[0-9A-F]{4}|\\U[0-9A-F]{8}|\\\\|[\u0020-\u0021\u0023-\u005B]|[\u005D-\u10FFFF]|\\t|\\n|\\r|\\"|\u0009|\u000A|\u000D|"[^"]|""[^"])*/,m=/^[a-z]+(-[a-z0-9]+)*/,n=function(a){},o=function(a){return a.replace(/(\\u([0-9A-F]{4}))|(\\U([0-9A-F]{4})([0-9A-F]{4}))/g,function(a,b,c,d,e,f){return void 0!==b?String.fromCharCode(parseInt(c,16)):String.fromCharCode(parseInt(e,16))+String.fromCharCode(parseInt(f,16))})},p=function(a,b){if(a.substring(0,b.length)===b)return a.substring(b.length);throw"Invalid Turtle: Expecting '"+b+"', found '"+a.substring(0,20)+"...'"},q=function(a,c){var d;if(c=c||{},d=c.required||!1,d&&!b.test(a))throw"Invalid Turtle: Required whitespace is missing!";return a.replace(b,"")},r=function(b,c){var d;return n("uriref: "+b),b=p(b,"<"),d=f.exec(b)[0],b=b.substring(d.length),b=p(b,">"),{remainder:b,uri:a.uri.resolve(d,c.base)}},s=function(a,b){var c;return n("name: "+a),e.test(a)?(c=e.exec(a),{name:c[0],remainder:a.substring(c[0].length)}):{name:"",remainder:a}},t=function(a,b){var c=s(a,b);if(n("prefixName: "+a),"_"===c.name.substring(0,1))throw"Invalid Turtle: Prefix must not start with an underscore: "+s;return{prefix:c.name,remainder:c.remainder}},u=function(a,b){var c,d;if(n("directive: "+a),"@prefix"===a.substring(0,7))a=a.substring(7),a=q(a,{required:!0}),c=t(a,b),d=c.prefix,a=c.remainder,a=q(a),a=p(a,":"),a=q(a),c=r(a,b),b.namespaces[d]=c.uri,a=c.remainder;else{if("@base"!==a.substring(0,5))throw"Invalid Turtle: Unrecognised directive: "+a;a=p(a,"@base"),a=q(a,{required:!0}),c=r(a,b),b.base=c.uri,a=c.remainder}return a=q(a),a=p(a,"."),{remainder:a,opts:b,triples:[]}},v=function(a,b){var c,d=[],e=[],f=a.substring(0,1);for(n("itemList: "+a);")"!==f;)c=E(a,b),a=c.remainder,d.push(c.object),e=e.concat(c.triples),a=q(a),f=a.substring(0,1);return{remainder:a,items:d,triples:e}},w=function(b,c){var d,e,f,g,h,i=a.rdf.nil;for(n("collection: "+b),b=p(b,"("),b=q(b),d=v(b,c),b=d.remainder,f=d.items,g=d.triples,e=f.length-1;e>=0;e-=1)h=a.rdf.blank("[]"),g.push(a.rdf.triple(h,a.rdf.first,f[e])),g.push(a.rdf.triple(h,a.rdf.rest,i)),i=h;return b=q(b),b=p(b,")"),{remainder:b,collection:i,triples:g}},x=function(b,c){var d,e,f=b.substring(0,1);return n("blank: "+b),"_"===f?(b=p(b,"_:"),d=s(b,c),{remainder:d.remainder,blank:a.rdf.blank("_:"+d.name),triples:[]}):"("===f?(d=w(b,c),{remainder:d.remainder,blank:d.collection,triples:d.triples}):"[]"===b.substring(0,2)?{remainder:b.substring(2),blank:a.rdf.blank("[]"),triples:[]}:(e=a.rdf.blank("[]"),c.subject.unshift(e),b=p(b,"["),b=q(b),d=G(b,c),b=d.remainder,b=q(b),b=p(b,"]"),c.subject.shift(),{remainder:b,blank:e,triples:d.triples})},y=function(a,b){var c,d=a.substring(0,1);return n("subject: "+a),"["===d||"_"===d||"("===d?(c=x(a,b),{remainder:c.remainder,subject:c.blank,triples:c.triples}):(c=z(a,b),{remainder:c.remainder,subject:c.resource,triples:[]})},z=function(b,c){var d,e,f,g=b.substring(0,1);if(n("resource: "+b),"<"===g)return d=r(b,c),{remainder:d.remainder,resource:a.rdf.resource(d.uri,c.base)};try{d=t(b,c),e=d.prefix,b=d.remainder}catch(h){e=""}return b=p(b,":"),d=s(b,c),f=d.name,{remainder:d.remainder,resource:a.rdf.resource(e+":"+f,{namespaces:c.namespaces,base:c.base})}},A=function(a,b){var c;return n("quotedString: "+a),'"""'===a.substring(0,3)?(a=p(a,'"""'),c=l.exec(a)[0],a=a.substring(c.length),c=c.replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(/\r/g,"\\r").replace(/\\"/g,'"'),c=o(c),a=p(a,'"""'),{remainder:a,string:c}):(a=p(a,'"'),c=k.exec(a)[0],a=a.substring(c.length),c=c.replace(/\\"/g,'"'),c=o(c),a=p(a,'"'),{remainder:a,string:c})},B=function(a,b){var c;return n("language: "+a),c=m.exec(a)[0],{remainder:a.substring(c.length),language:c}},C=function(b,c){var d,e;return n("literal: "+b),g.test(b)?(e=g.exec(b)[1],{remainder:b.substring(e.length),literal:a.rdf.literal(e,{datatype:"http://www.w3.org/2001/XMLSchema#boolean"})}):h.test(b)?(e=h.exec(b)[0],{remainder:b.substring(e.length),literal:a.rdf.literal(e,{datatype:"http://www.w3.org/2001/XMLSchema#double"})}):i.test(b)?(e=i.exec(b)[0],{remainder:b.substring(e.length),literal:a.rdf.literal(e,{datatype:"http://www.w3.org/2001/XMLSchema#decimal"})}):j.test(b)?(e=j.exec(b)[0],{remainder:b.substring(e.length),literal:a.rdf.literal(e,{datatype:"http://www.w3.org/2001/XMLSchema#integer"})}):(parsed=A(b,c),b=parsed.remainder,e=parsed.string,b=q(b),d=b.substring(0,1),"^"===d?(b=p(b,"^^"),b=q(b),parsed=z(b,c),{remainder:parsed.remainder,literal:a.rdf.literal(e,{datatype:parsed.resource.value})}):"@"===d?(b=p(b,"@"),b=q(b),parsed=B(b,c),{remainder:parsed.remainder,literal:a.rdf.literal(e,{lang:parsed.language})}):{remainder:b,literal:a.rdf.literal('"'+e.replace(/"/g,'\\"')+'"')})},D=function(b,c){var d,e=b.substring(0,1);n("verb: "+b);try{return d=z(b,c),{remainder:d.remainder,verb:d.resource}}catch(f){if("a"===e)return b=q(b.substring(1),{required:!0}),{remainder:b,verb:a.rdf.type};throw f}},E=function(a,b){var c,d=a.substring(0,1);if(n("object: "+a),"["===d||"_"===d||"("===d)return c=x(a,b),{remainder:c.remainder,object:c.blank,triples:c.triples};try{return c=C(a,b),{remainder:c.remainder,object:c.literal,triples:[]}}catch(e){return c=z(a,b),{remainder:c.remainder,object:c.resource,triples:[]}}},F=function(b,c){var d,e,f=[],g=b.substring(0,1);n("objectList: "+b);do{if(d=E(b,c),b=d.remainder,f=f.concat(d.triples),e=a.rdf.triple(c.subject[0],c.verb[0],d.object),f.push(e),b=q(b),g=b.substring(0,1),","!==g)break;b=p(b,","),b=q(b),g=b.substring(0,1)}while("]"!==g&&";"!==g&&"."!==g);return{remainder:b,triples:f}},G=function(a,b){var c,d,e=[],f=a.substring(0,1);n("predicateObjectList: "+a);do{if(c=D(a,b),a=c.remainder,d=c.verb,a=q(a),b.verb.unshift(d),c=F(a,b),a=c.remainder,e=e.concat(c.triples),b.verb.shift(),a=q(a),f=a.substring(0,1),";"!==f)break;a=p(a,";"),a=q(a),f=a.substring(0,1)}while("]"!==f&&"."!==f);return{remainder:a,triples:e}},H=function(a,b){var c,d=[];return n("triples: "+a),c=y(a,b),a=c.remainder,b.subject.unshift(c.subject),d=c.triples,a=q(a),c=G(a,b),b.subject.shift(),a=q(c.remainder),a=p(a,"."),{remainder:a,opts:b,triples:d.concat(c.triples)}},I=function(a,b){var c;return n("statement: "+a),a=q(a),0===a.length?{remainder:"",opts:b,triples:[]}:(c=a.substring(0,1),"@"===c?u(a,b):H(a,b))},J=function(b,c){var d={},e=[];for(c=c||{},c.namespaces={},c.base=c.base||a.uri.base(),c.subject=[],c.verb=[];""!==b;)n("parseTurtle: "+b),d=I(b,c),b=d.remainder,c=d.opts,e=e.concat(d.triples);return e},K=function(b,c){var d,e,f,g,h,i,j=a.rdf.parsers["application/json"].dump(b),k=c.namespaces||{},l=c.indent||!1,m="";for(e in k)m+="@prefix "+e+": <"+k[e]+"> . ",l&&(m+="\n");for(f in j){if(l&&(m+="\n"),"_:"===f.substring(0,2))m+=f;else try{m+=a.createCurie(f,{namespaces:k})}catch(n){m+="<"+f+">"}m+=" ",d=!0;for(g in j[f]){if(l&&(m+="\n  "),d=!1,g===a.rdf.type.value.toString())m+="a";else try{m+=a.createCurie(g,{namespaces:k})}catch(o){m+="<"+g+">"}for(m+=" ",i=0;i<j[f][g].length;i+=1){if(i>0&&l&&(m+="\n    "),h=j[f][g][i],"uri"===h.type)try{m+=a.createCurie(h.value,{namespaces:k})}catch(p){m+="<"+h.value+">"}else if("bnode"===h.type)m+=h.value;else if(m+='"'+h.value+'"',h.lang&&(m+="@"+h.lang),h.datatype){m+="^^";try{m+=a.createCurie(h.datatype,{namespaces:k})}catch(q){m+="<"+h.datatype+">"}}m+=" , "}m=m.substring(0,m.length-3),m+=" ; "}m=m.substring(0,m.length-3),m+=" . ",l&&(m+="\n")}return m};a.rdf.parsers["text/turtle"]={parse:function(a){return a},serialize:function(a){return a},triples:J,dump:K}}(jQuery),function(a){var b="http://www.w3.org/1999/02/22-rdf-syntax-ns#",c=function(a,b,c,d){var e,f=a.ownerDocument;return void 0!==b&&null!==b?f.createAttributeNS?(e=f.createAttributeNS(b,c),e.nodeValue=d,a.attributes.setNamedItemNS(e)):(e=f.createNode(2,c,b),e.nodeValue=d,a.attributes.setNamedItem(e)):(e=f.createAttribute(c),e.nodeValue=d,a.attributes.setNamedItem(e)),a},d=function(a,b,d){return"http://www.w3.org/XML/1998/namespace"===b||"http://www.w3.org/2000/xmlns/"===b||(d?c(a,"http://www.w3.org/2000/xmlns/","xmlns:"+d,b):c(a,void 0,"xmlns",b)),a},e=function(a,b){var c,e,f="",g=!1;return void 0!==a&&null!==a&&(/:/.test(b)&&(e=/([^:]+):/.exec(b)[1]),g=!0),document.implementation&&document.implementation.createDocument?(c=document.implementation.createDocument(a,b,null),g&&d(c.documentElement,a,e),c):(c=new ActiveXObject("Microsoft.XMLDOM"),c.async="false",f=void 0===e?' xmlns="'+a+'"':" xmlns:"+e+'="'+a+'"',c.loadXML("<"+b+f+"/>"),c)},f=function(a,b,c,d){var e,f=a.ownerDocument;return e=void 0!==b&&null!==b?f.createElementNS?f.createElementNS(b,c):f.createNode(1,c,b):f.createElement(c),-1!==d&&(g(a,"\n"),0===d?g(a,"\n"):g(a,"  ")),a.appendChild(e),e},g=function(a,b){var c,d=a.ownerDocument;return c=d.createTextNode(b),a.appendChild(c),a},h=function(a,b){var c,d,e;try{d=new ActiveXObject("Microsoft.XMLDOM"),d.async="false",d.loadXML("<temp>"+b+"</temp>")}catch(f){c=new DOMParser,d=c.parseFromString("<temp>"+b+"</temp>","text/xml")}for(e=0;e<d.documentElement.childNodes.length;e+=1)a.appendChild(d.documentElement.childNodes[e].cloneNode(!0));return a},i=function(i,j){var k,l,m,n,o,p,q,r,s,t,u,v=e(b,"rdf:RDF"),w=a.rdf.parsers["application/json"].dump(i),x=j.namespaces||{},y=j.indent||!1;for(k in x)d(v.documentElement,x[k],k);for(l in w){if(void 0!==w[l][a.rdf.type.value]){r=/(.+[#\/])([^#\/]+)/.exec(w[l][a.rdf.type.value][0].value),t=r[1],s=r[2];for(k in x)if(x[k].toString()===t){u=k;break}m=f(v.documentElement,t,u+":"+s,y?0:-1)}else m=f(v.documentElement,b,"rdf:Description",y?0:-1);/^_:/.test(l)?c(m,b,"rdf:nodeID",l.substring(2)):c(m,b,"rdf:about",l);for(n in w[l])if(n!==a.rdf.type.value.toString()||w[l][n].length>1){r=/(.+[#\/])([^#\/]+)/.exec(n),t=r[1],s=r[2];for(k in x)if(x[k].toString()===t){u=k;break}for(p=n===a.rdf.type.value.toString()?1:0;p<w[l][n].length;p+=1)q=w[l][n][p],o=f(m,t,u+":"+s,y?1:-1),"uri"===q.type?c(o,b,"rdf:resource",q.value):"literal"===q.type?void 0!==q.datatype?"http://www.w3.org/1999/02/22-rdf-syntax-ns#XMLLiteral"===q.datatype?(c(o,b,"rdf:parseType","Literal"),y&&g(o,"\n    "),h(o,q.value),y&&g(o,"\n  ")):(c(o,b,"rdf:datatype",q.datatype),g(o,q.value)):void 0!==q.lang?(c(o,"http://www.w3.org/XML/1998/namespace","xml:lang",q.lang),g(o,q.value)):g(o,q.value):c(o,b,"rdf:nodeID",q.value.substring(2));y&&g(m,"\n")}}return y&&g(v.documentElement,"\n\n"),v},j=function(a){switch(a){case"http://www.w3.org/1999/02/22-rdf-syntax-ns":return"rdf";case"http://www.w3.org/XML/1998/namespace":return"xml";case"http://www.w3.org/2000/xmlns/":return"xmlns";default:throw"No default prefix mapped for namespace "+a}},k=function(a,b,c){var d;if(a.hasAttributeNS)return a.hasAttributeNS(b,c);try{return d=/:/.test(c)?/:(.+)$/.exec(c)[1]:c,null!==a.attributes.getQualifiedItem(d,b)}catch(e){return null!==a.getAttribute(j(b)+":"+c)}},l=function(a,b,c){var d;if(a.getAttributeNS)return a.getAttributeNS(b,c);try{return d=/:/.test(c)?/:(.+)$/.exec(c)[1]:c,a.attributes.getQualifiedItem(d,b).nodeValue}catch(e){return a.getAttribute(j(b)+":"+c)}},m=function(a){return a.localName||a.baseName},n=function(c,d){var e,f;return k(c,b,"about")?(e=l(c,b,"about"),f=a.rdf.resource("<"+e+">",{base:d})):k(c,b,"ID")?(e=l(c,b,"ID"),f=a.rdf.resource("<#"+e+">",{base:d})):k(c,b,"nodeID")?(e=l(c,b,"nodeID"),f=a.rdf.blank("_:"+e)):f=a.rdf.blank("[]"),
f},o=function(c,d,e,f){var g,h,i,j,p,q,f,r,s,t,u,v,w,x,y,z=1,A=[],B={},C=[];for(f=l(c,"http://www.w3.org/XML/1998/namespace","lang")||f,e=l(c,"http://www.w3.org/XML/1998/namespace","base")||e,null!==f&&void 0!==f&&""!==f&&(B={lang:f}),g=n(c,e),!d||c.namespaceURI===b&&"Description"===m(c)||(i=a.rdf.type,p=a.rdf.resource("<"+c.namespaceURI+m(c)+">"),C.push(a.rdf.triple(g,i,p))),r=0;r<c.attributes.length;r+=1)h=c.attributes.item(r),void 0!==h.namespaceURI&&"http://www.w3.org/2000/xmlns/"!==h.namespaceURI&&"http://www.w3.org/XML/1998/namespace"!==h.namespaceURI&&"xmlns"!==h.prefix&&"xml"!==h.prefix&&(h.namespaceURI!==b?(i=a.rdf.resource("<"+h.namespaceURI+m(h)+">"),p=a.rdf.literal(B.lang?h.nodeValue:'"'+h.nodeValue.replace(/"/g,'\\"')+'"',B),C.push(a.rdf.triple(g,i,p))):"type"===m(h)&&(i=a.rdf.type,p=a.rdf.resource("<"+h.nodeValue+">",{base:e}),C.push(a.rdf.triple(g,i,p))));var D=f;for(r=0;r<c.childNodes.length;r+=1)if(h=c.childNodes[r],1===h.nodeType){if(h.namespaceURI===b&&"li"===m(h)?(i=a.rdf.resource("<"+b+"_"+z+">"),z+=1):i=a.rdf.resource("<"+h.namespaceURI+m(h)+">"),f=l(h,"http://www.w3.org/XML/1998/namespace","lang")||D,B=null!==f&&void 0!==f&&""!==f?{lang:f}:{},k(h,b,"resource"))j=l(h,b,"resource"),p=a.rdf.resource("<"+j+">",{base:e});else if(k(h,b,"nodeID"))j=l(h,b,"nodeID"),p=a.rdf.blank("_:"+j);else if(k(h,b,"parseType")){if(w=l(h,b,"parseType"),"Literal"===w){try{x=new XMLSerializer,j=x.serializeToString(h.getElementsByTagName("*")[0])}catch(E){for(j="",s=0;s<h.childNodes.length;s+=1)j+=h.childNodes[s].xml}p=a.rdf.literal(j,{datatype:b+"XMLLiteral"})}else if("Resource"===w)y=o(h,!1,e,f),y.length>0?(p=y[y.length-1].subject,C=C.concat(y)):p=a.rdf.blank("[]");else if("Collection"===w)if(h.getElementsByTagName("*").length>0){for(s=0;s<h.childNodes.length;s+=1)j=h.childNodes[s],1===j.nodeType&&A.push(j);for(t=a.rdf.blank("[]"),p=t,s=0;s<A.length;s+=1)j=A[s],y=o(j,!0,e,f),y.length>0?(v=y[y.length-1].subject,C=C.concat(y)):v=n(j),C.push(a.rdf.triple(t,a.rdf.first,v)),s===A.length-1?C.push(a.rdf.triple(t,a.rdf.rest,a.rdf.nil)):(u=a.rdf.blank("[]"),C.push(a.rdf.triple(t,a.rdf.rest,u)),t=u)}else p=a.rdf.nil}else if(k(h,b,"datatype"))j=h.childNodes[0].nodeValue?h.childNodes[0].nodeValue:"",p=a.rdf.literal(j,{datatype:l(h,b,"datatype")});else if(h.getElementsByTagName("*").length>0)for(s=0;s<h.childNodes.length;s+=1)j=h.childNodes[s],1===j.nodeType&&(y=o(j,!0,e,f),y.length>0?(p=y[y.length-1].subject,C=C.concat(y)):p=n(j));else h.childNodes.length>0?(j=h.childNodes[0].nodeValue,p=a.rdf.literal(B.lang?j:'"'+j.replace(/"/g,'\\"')+'"',B)):(y=o(h,!1,e,f),y.length>0?(p=y[y.length-1].subject,C=C.concat(y)):p=a.rdf.blank("[]"));C.push(a.rdf.triple(g,i,p)),k(h,b,"ID")&&(q=a.rdf.resource("<#"+l(h,b,"ID")+">",{base:e}),C.push(a.rdf.triple(q,a.rdf.subject,g)),C.push(a.rdf.triple(q,a.rdf.property,i)),C.push(a.rdf.triple(q,a.rdf.object,p)))}return C},p=function(c){var d,e=[];return c.documentElement.namespaceURI===b&&"RDF"===m(c.documentElement)?(d=l(c.documentElement,"http://www.w3.org/XML/1998/namespace","lang"),base=l(c.documentElement,"http://www.w3.org/XML/1998/namespace","base")||a.uri.base(),e=a.map(c.documentElement.childNodes,function(a){return 1===a.nodeType?o(a,!0,base,d):null})):e=o(c.documentElement,!0),e};a.rdf.parsers["application/rdf+xml"]={parse:function(a){var b;try{b=new ActiveXObject("Microsoft.XMLDOM"),b.async="false",b.loadXML(a)}catch(c){var d=new DOMParser;b=d.parseFromString(a,"text/xml")}return b},serialize:function(a){return a.xml?a.xml.replace(/\s+$/,""):(serializer=new XMLSerializer,serializer.serializeToString(a))},triples:p,dump:i}}(jQuery),function(a){var b={rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",xsd:"http://www.w3.org/2001/XMLSchema#",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},c=b.rdf+"XMLLiteral",d=a.fn.curie.defaults,e=["alternate","appendix","bookmark","cite","chapter","contents","copyright","first","glossary","help","icon","index","last","license","meta","next","p3pv1","prev","role","section","stylesheet","subsection","start","top","up"],f=/\s([^ =]+)\s*=\s*(?:"([^"]*)"|'([^']*)'|([^ >]+))/g,g="[-A-Z_a-zÀ-ÖØ-öø-˿Ͱ-ͽͿ-῿‌-‍⁰-↏Ⰰ-⿯、-퟿豈-﷏ﷰ-�က0-F.0-9·̀-ͯ‿-⁀]",h="[A-Za-zÀ-ÖØ-öø-ÿĀ-ıĴ-ľŁ-ňŊ-žƀ-ǃǍ-ǰǴ-ǵǺ-ȗɐ-ʨʻ-ˁΆΈ-ΊΌΎ-ΡΣ-ώϐ-ϖϚϜϞϠϢ-ϳЁ-ЌЎ-яё-ќў-ҁҐ-ӄӇ-ӈӋ-ӌӐ-ӫӮ-ӵӸ-ӹԱ-Ֆՙա-ֆא-תװ-ײء-غف-يٱ-ڷں-ھۀ-ێې-ۓەۥ-ۦअ-हऽक़-ॡঅ-ঌএ-ঐও-নপ-রলশ-হড়-ঢ়য়-ৡৰ-ৱਅ-ਊਏ-ਐਓ-ਨਪ-ਰਲ-ਲ਼ਵ-ਸ਼ਸ-ਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઋઍએ-ઑઓ-નપ-રલ-ળવ-હઽૠଅ-ଌଏ-ଐଓ-ନପ-ରଲ-ଳଶ-ହଽଡ଼-ଢ଼ୟ-ୡஅ-ஊஎ-ஐஒ-கங-சஜஞ-டண-தந-பம-வஷ-ஹఅ-ఌఎ-ఐఒ-నప-ళవ-హౠ-ౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹೞೠ-ೡഅ-ഌഎ-ഐഒ-നപ-ഹൠ-ൡก-ฮะา-ำเ-ๅກ-ຂຄງ-ຈຊຍດ-ທນ-ຟມ-ຣລວສ-ຫອ-ຮະາ-ຳຽເ-ໄཀ-ཇཉ-ཀྵႠ-Ⴥა-ჶᄀᄂ-ᄃᄅ-ᄇᄉᄋ-ᄌᄎ-ᄒᄼᄾᅀᅌᅎᅐᅔ-ᅕᅙᅟ-ᅡᅣᅥᅧᅩᅭ-ᅮᅲ-ᅳᅵᆞᆨᆫᆮ-ᆯᆷ-ᆸᆺᆼ-ᇂᇫᇰᇹḀ-ẛẠ-ỹἀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼΩK-Å℮ↀ-ↂぁ-ゔァ-ヺㄅ-ㄬ가-힣一-龥〇〡-〩_]",j=new RegExp("^"+h+g+"*$"),k=a.rdf.resource("<>"),l=function(a){var b,c,d="";if(!/&/.test(a))return a;for(;a.length>0;){if(b=/([^&]*)(&([^;]+);)(.*)/g.exec(a),null===b){d+=a;break}if(d+=b[1],c=b[3],a=b[4],"#"===c.charAt(0))d+="x"===c.charAt(1)?String.fromCharCode(parseInt(c.substring(2),16)):String.fromCharCode(parseInt(c.substring(1),10));else switch(c){case"amp":d+="&";break;case"nbsp":d+=String.fromCharCode(160);break;case"quot":d+='"';break;case"apos":d+="'";break;default:d+="&"+c+";"}}return d},m=function(c){var d,e,g,h,i,k,m,n,o={},p={};if(e=c[0],p[":length"]=0,e.attributes&&e.attributes.getNamedItemNS)for(m=e.attributes,d=0;d<m.length;d+=1)g=m[d],/^xmlns(:(.+))?$/.test(g.nodeName)&&""!==g.nodeValue?(n=/^xmlns(:(.+))?$/.exec(g.nodeName)[2]||"",!j.test(n)||"xml"===n&&g.nodeValue!==b.xml||g.nodeValue===b.xml&&"xml"!==n||"xmlns"===n||g.nodeValue===b.xmlns||(p[n]=a.uri(g.nodeValue),p[":length"]+=1)):/rel|rev|lang|xml:lang|about|href|src|resource|property|typeof|content|datatype/.test(g.nodeName)&&(o[g.nodeName]=null===g.nodeValue?void 0:g.nodeValue);else{for(h=/<[^>]+>/.exec(e.outerHTML),g=f.exec(h);null!==g;)i=g[1],k=g[2]||g[3]||g[4],/^xmlns/.test(i)&&"xmlns:"!==i&&""!==k?(n=/^xmlns(:(.+))?$/.exec(i)[2]||"",!j.test(n)||"xml"===n&&g.nodeValue!==b.xml||g.nodeValue===b.xml&&"xml"!==n||"xmlns"===n||g.nodeValue===b.xmlns||(p[n]=a.uri(k),p[":length"]+=1)):/about|href|src|resource|property|typeof|content|datatype|rel|rev|lang|xml:lang/.test(i)&&(o[i]=l(k)),g=f.exec(h);f.lastIndex=0}return{atts:o,namespaces:p}},n=function(a,b){var c=a[0].getAttribute(b);return null===c?void 0:c},o=function(b){return a.rdf.resource(b)},p=function(b,c,d,e){if("_:"===b.substring(0,2))return d?void 0:a.rdf.blank(b);try{return o(a.curie(b,e))}catch(f){return void 0}},q=function(b,c,d){var e=/^\[(.*)\]$/.exec(b),f=d.base||c.base();return e?p(e[1],c,!1,d):o(a.uri(b,f))},r=function(a,b,c,d){var e,f,g=[];for(a=a&&a.split?a.split(/[ \t\n\r\x0C]+/g):[],e=0;e<a.length;e+=1)""!==a[e]&&(f=p(a[e],b,c,d),void 0!==f&&g.push(f));return g},s=function(b,c,d){var e,f,g=[];for(c="uri"===c.type?c:a.rdf.resource(c,d),b=b&&b.split?b.split(/\s+/):[],e=0;e<b.length;e+=1)""!==b[e]&&(f=p(b[e],null,!1,d),f!==c&&g.push(b[e]));return g.reverse().join(" ")},t=function(b,c,e){var f,g,h,i;return c=c||{},h=c.atts||m(b).atts,f=void 0===e?void 0!==h.rel||void 0!==h.rev:e,g=h.resource,g=void 0===g?h.href:g,void 0===g?g=f?a.rdf.blank("[]"):g:(i=c.curieOptions||a.extend({},d,{namespaces:b.xmlns()}),g=q(g,b,i)),g},u=function(b,c,e){var f,g,h,i,j=!1;return c=c||{},g=c.atts||m(b).atts,h=c.curieOptions||a.extend({},d,{namespaces:b.xmlns(),base:b.base()}),f=void 0===e?void 0!==g.rel||void 0!==g.rev:e,void 0!==g.about&&(i=q(g.about,b,h)),void 0===i&&void 0!==g.src&&(i=q(g.src,b,h)),f||void 0!==i||void 0===g.resource||(i=q(g.resource,b,h)),f||void 0!==i||void 0===g.href||(i=q(g.href,b,h)),void 0===i&&(/^(head|body)$/i.test(b[0].nodeName)?i=k:void 0!==g["typeof"]?i=a.rdf.blank("[]"):1===b[0].parentNode.nodeType?(i=c.object||t(b.parent())||u(b.parent()).subject,j=!f&&void 0===g.property):i=k),{subject:i,skip:j}},v=function(a,b){var c;if(b=b||{},b.atts)c=b.atts.lang,c=c||b.atts["xml:lang"];else{c=a[0].getAttribute("lang");try{c=null===c||""===c?a[0].getAttribute("xml:lang"):c}catch(d){}c=null===c||""===c?void 0:c}return void 0===c&&(b.lang?c=b.lang:1===a[0].parentNode.nodeType&&(c=v(a.parent()))),c},w=function(a){switch(a){case"<":return"&lt;";case'"':return"&quot;";case"&":return"&amp;"}},x=function(b,c){var d,e,g,h,i,j,k="";return b.contents().each(function(){var b=a(this),l=b[0];if(1===l.nodeType){if(h=l.nodeName.toLowerCase(),k+="<"+h,l.outerHTML){for(j=/<[^>]+>/.exec(l.outerHTML),g=f.exec(j);null!==g;)/^jQuery/.test(g[1])||(k+=" "+g[1]+"=",k+=g[2]?g[3]:'"'+g[1]+'"'),g=f.exec(j);f.lastIndex=0}else for(e=l.attributes,d=0;d<e.length;d+=1)g=e.item(d),k+=" "+g.nodeName+'="',k+=g.nodeValue.replace(/[<"&]/g,w),k+='"';c||(i=b.xmlns(""),void 0!==i&&void 0===b.attr("xmlns")&&(k+=' xmlns="'+i+'"')),k+=">",k+=x(b,!0),k+="</"+h+">"}else 8===l.nodeType?(k+="<!--",k+=l.nodeValue,k+="-->"):k+=l.nodeValue}),k},y=function(b){var f,g,h,i,j,k,l,n,o,p,q,s,w,z,A,B,C,D,E,F,G,H,I=[],J=this.children();if(b=b||{},A=b.forward||[],B=b.backward||[],C=b.callback||function(){return this},E=m(this),F=E.atts,b.atts=F,G=b.namespaces||this.xmlns(),E.namespaces[":length"]>0){G=a.extend({},G);for(H in E.namespaces)":length"!==H&&(G[H]=E.namespaces[H])}if(b.curieOptions=a.extend({},d,{reserved:[],namespaces:G,base:this.base()}),D=a.extend({},b.curieOptions,{reserved:e}),g=u(this,b),i=v(this,b),g.skip)w=b.forward,z=b.backward,g=b.subject,h=b.object;else{if(g=g.subject,A.length>0||B.length>0){for(q=b.subject||u(this.parent()).subject,f=0;f<A.length;f+=1)p=a.rdf.triple(q,A[f],g,{source:this[0]}),p=C.call(p,this.get(0),p),void 0!==p&&null!==p&&(I=I.concat(p));for(f=0;f<B.length;f+=1)p=a.rdf.triple(g,B[f],q,{source:this[0]}),p=C.call(p,this.get(0),p),void 0!==p&&null!==p&&(I=I.concat(p))}for(h=t(this,b),n=r(F["typeof"],this,!1,b.curieOptions),f=0;f<n.length;f+=1)p=a.rdf.triple(g,a.rdf.type,n[f],{source:this[0]}),p=C.call(p,this.get(0),p),void 0!==p&&null!==p&&(I=I.concat(p));if(s=r(F.property,this,!0,b.curieOptions),s.length>0)for(j=F.datatype,k=F.content,l=this.text().replace(/"/g,'\\"'),void 0!==j&&""!==j?(j=a.curie(j,b.curieOptions),o=j.toString()===c?a.rdf.literal(x(this),{datatype:c}):void 0!==k?a.rdf.literal(k,{datatype:j}):a.rdf.literal(l,{datatype:j})):void 0!==k?o=void 0===i?a.rdf.literal('"'+k+'"'):a.rdf.literal(k,{lang:i}):0===J.length||""===j?(i=v(this,b),o=void 0===i?a.rdf.literal('"'+l+'"'):a.rdf.literal(l,{lang:i})):o=a.rdf.literal(x(this),{datatype:c}),f=0;f<s.length;f+=1)p=a.rdf.triple(g,s[f],o,{source:this[0]}),p=C.call(p,this.get(0),p),void 0!==p&&null!==p&&(I=I.concat(p));if(w=r(F.rel,this,!0,D),z=r(F.rev,this,!0,D),void 0!==F.resource||void 0!==F.href){if(void 0!==w)for(f=0;f<w.length;f+=1)p=a.rdf.triple(g,w[f],h,{source:this[0]}),p=C.call(p,this.get(0),p),void 0!==p&&null!==p&&(I=I.concat(p));if(w=[],void 0!==z)for(f=0;f<z.length;f+=1)p=a.rdf.triple(h,z[f],g,{source:this[0]}),p=C.call(p,this.get(0),p),void 0!==p&&null!==p&&(I=I.concat(p));z=[]}}return J.each(function(){I=I.concat(y.call(a(this),{forward:w,backward:z,subject:g,object:h||g,lang:i,namespaces:G,callback:C}))}),I},z=function(a){var b,c;return a&&void 0!==a.about?(c=m(this).atts,null===a.about?void 0!==c.property||void 0!==c.rel||void 0!==c.rev||void 0!==c["typeof"]:u(this,{atts:c}).subject.value===a.about):a&&void 0!==a.type?(b=n(this,"typeof"),void 0!==b?null===a.type?!0:this.curie(b)===a.type:!1):y.call(this,a)},A=1,B=function(d,e,f){var g,h,i;try{h=d.createCurie(f)}catch(j){f.toString()===c?(d.attr("xmlns:rdf",b.rdf),h="rdf:XMLLiteral"):(g=/^(.+[\/#])([^#]+)$/.exec(f),d.attr("xmlns:ns"+A,g[1]),h="ns"+A+":"+g[2],A+=1)}i=n(d,e),void 0!==i?-1===a.inArray(h,i.split(/\s+/))&&d.attr(e,i+" "+h):d.attr(e,h)},C=function(b,c,d){var e;e="bnode"===d.type?"[_:"+d.id+"]":a(b).base().relative(d.value),b.attr(c,e)},D=function(a,b){var c=u(a).subject;b!==c&&C(a,"about",b),a.removeData("rdfa.subject")},E=function(a,b){var c=t(a);b!==c&&C(a,"resource",b),a.removeData("rdfa.objectResource")},F=function(a,b){return a.wrapInner("<span></span>").children("span").attr("lang",b),a},G=function(b){var d,e,f,g,h,i,j,k,l,n,o,p,q,r=this.xmlns();if(h=this,q=m(this).atts,"string"==typeof b)b=a.rdf.triple(b,{namespaces:r,base:this.base()});else{if(b.rdfquery)return G.call(this,b.sources().get(0)),this;if(b.length){for(p=0;p<b.length;p+=1)G.call(this,b[p]);return this}}if(e=void 0!==q.rel||void 0!==q.rev,f=e||void 0!==q.property||void 0!==q["typeof"],"literal"!==b.object.type)i=u(this,{atts:q},!0).subject,k=t(this,{atts:q},!0),g=!f&&void 0===q.resource,j=i===b.subject,l=k===b.object,b.property===a.rdf.type?j?B(this,"typeof",b.object.value):f?(h=this.wrapInner("<span />").children("span"),B(h,"typeof",b.object.value),k!==b.subject&&D(h,b.subject)):(B(this,"typeof",b.object.value),D(this,b.subject)):j?l?B(this,"rel",b.property.value):g||!f?(B(this,"rel",b.property.value),E(this,b.object)):(h=this.wrap("<span />").parent(),B(h,"rev",b.property.value),D(h,b.object)):i===b.object?k===b.subject?B(this,"rev",b.property.value):g||!f?(B(this,"rev",b.property.value),E(this,b.subject)):(h=this.wrap("<span />").parent(),B(h,"rel",b.property.value),D(h,b.subject)):l?f?(h=this.wrapInner("<span />").children("span"),B(h,"rev",b.property.value),E(h,b.subject),h=h.wrapInner("<span />").children("span"),D(h,b.object),h=this):(D(this,b.subject),B(this,"rel",b.property.value)):k===b.subject?f?(h=this.wrapInner("<span />").children("span"),B(h,"rel",this.property.value),E(h,b.object),h=h.wrapInner("<span />").children("span"),D(h,k),h=this):(D(this,b.object),B(this,"rev",b.property.value)):f?(h=this.wrapInner("<span />").children("span"),B(h,"rel",b.property.value),D(h,b.subject),E(h,b.object),h.children("*").length>0&&(h=this.wrapInner("<span />").children("span"),D(h,i)),h=this):(B(h,"rel",b.property.value),D(this,b.subject),E(this,b.object),this.children("*").length>0&&(h=this.wrapInner("<span />").children("span"),D(h,i),h=this));else if(i=u(this,{atts:q}).subject,k=t(this,{atts:q}),j=i===b.subject,d=this.text()!==b.object.value,void 0!==q.property){if(o=q.content,l=void 0!==o?o===b.object.value:!d,!j||!l)return h=this.wrapInner("<span />").children("span"),G.call(h,b);B(this,"property",b.property.value)}else{if(k===b.subject)return h=this.wrapInner("<span />").children("span"),G.call(h,b);B(this,"property",b.property.value),D(this,b.subject),d&&(b.object.datatype&&b.object.datatype.toString()===c?this.html(b.object.value):this.attr("content",b.object.value)),n=v(this),b.object.lang?n!==b.object.lang&&(this.attr("lang",b.object.lang),d&&F(this,n)):b.object.datatype?B(this,"datatype",b.object.datatype):(d||this.attr("datatype",""),void 0!==n&&(this.attr("lang",""),d&&F(this,n)))}return this.parents().andSelf().trigger("rdfChange"),h},H=function(a){var b,c,d,e,f,g=this.xmlns();if(b=m(this).atts,a.length){for(i=0;i<a.length;i+=1)H.call(this,a[i]);return this}return hasRelation=void 0!==b.rel||void 0!==b.rev,hasRDFa=hasRelation||void 0!==b.property||void 0!==b["typeof"],hasRDFa&&(void 0!==a.property&&(void 0!==b.property&&(c=s(b.property,a.property,{namespaces:g}),""===c?this.removeAttr("property"):this.attr("property",c)),void 0!==b.rel&&(d=s(b.rel,a.property,{namespaces:g}),""===d?this.removeAttr("rel"):this.attr("rel",d)),void 0!==b.rev&&(e=s(b.rev,a.property,{namespaces:g}),""===e?this.removeAttr("rev"):this.attr("rev",e))),void 0!==a.type&&void 0!==b["typeof"]&&(f=s(b["typeof"],a.type,{namespaces:g}),""===f?this.removeAttr("typeof"):this.attr("typeof",f)),b.property===this.attr("property")&&b.rel===this.attr("rel")&&b.rev===this.attr("rev")&&b["typeof"]===this.attr("typeof"))?H.call(this.parent(),a):(this.parents().andSelf().trigger("rdfChange"),this)};a.fn.rdfa=function(b){if(void 0===b){var c=a.map(a(this),function(b){return y.call(a(b))});return a.rdf({triples:c})}return a(this).each(function(){G.call(a(this),b)}),this},a.fn.removeRdfa=function(b){return a(this).each(function(){H.call(a(this),b)}),this},a.rdf.gleaners.push({name:"rdfa",gleaner:z})}(jQuery),function(a){var b={schema:"http://schema.org/"},c=function(){return this.attr("itemid")?a.rdf.resource("<"+this.attr("itemid")+">"):a.rdf.blank("[]")},d=function(){var c=this.attr("itemtype");return c?a.rdf.resource("<"+c+">"):a.rdf.resource("<"+b.schema+"Thing>")},e=function(){var c=this.attr("itemprop");return c?a.rdf.resource("<"+b.schema+c+">"):void 0},f=function(a){return"<"+a+">"},g=function(){var b=this.get(0).nodeName.toLowerCase();return"meta"===b?a.rdf.literal(void 0===this.attr("content")?'""':this.attr("content")):"audio"===b||"embed"===b||"iframe"===b||"img"===b||"source"===b||"track"===b||"video"===b?this.attr("src")?a.rdf.resource(f(this.attr("src"))):a.rdf.resource("<>"):"a"===b||"area"===b||"link"===b?this.attr("href")?a.rdf.resource(f(this.attr("href"))):a.rdf.resource("<>"):"object"===b?this.attr("data")?a.rdf.resource(f(this.attr("data"))):a.rdf.resource("<>"):"time"===b&&void 0!==this.attr("datetime")?this.attr("datetime")?a.rdf.literal('"'+this.attr("datetime")+'"'):a.rdf.literal('""'):a.rdf.literal('"'+this.text()+'"')},h=function(c){var d=[],f=e.call(this);if(void 0!==f){if(void 0!==this.attr("itemscope")){var j=i.call(this,{subject:c.subject,property:f});return d=d.concat(j.triples)}var k=g.call(this),l=a.rdf.triple(c.subject,f,k,{namespaces:b});d.push(l)}var m=a.map(this.children(),function(b){return h.call(a(b),c)});return d=d.concat(m)},i=function(e){var f=[];e||(e={});var g=c.call(this);e.subject&&e.property&&f.push(a.rdf.triple(e.subject,e.property,g,{namespaces:b}));var i=d.call(this);if(f.push(a.rdf.triple(g,a.rdf.type,i,{namespaces:b})),void 0!==this.attr("itemref")){var j=a.map(this.attr("itemref").split(" "),function(a,b){return"#"+a}).join(", "),k=h.call(a(j),{subject:g});f=f.concat(k)}var l=a.map(this.children(),function(b){return h.call(a(b),{subject:g})});return f=f.concat(l),{triples:f}},j=function(b){if(void 0===this.attr("itemscope"))return console.log("[DEBUG]","No itemscope attribute found!"),[];var c=i.call(a(this)).triples;return console.log("[DEBUG]","Extracted ",c.length," triple(s)!",c),c},k=function(a){if(a&&void 0!==a.about)return null===a.about?void 0!==this.attr("itemprop")||void 0!==this.attr("itemref")||void 0!==this.attr("itemtype"):c.call(this)===a.about;if(a&&void 0!==a.type){var b=d.call(this);return void 0!==b?null===a.type?!0:b===a.type:!1}return j.call(this,a)},l=function(a){return this},m=function(a){return this};a.fn.microdata=function(b,c){if(void 0===b){var d=a.map(a(this),function(b){return j.call(a(b))});return a.rdf({triples:d})}return a(this).each(function(){l.call(a(this),b,c)}),this},a.fn.removeMicrodata=function(b){return a(this).each(function(){m.call(a(this),b)}),this},a.rdf.gleaners.push({name:"microdata",gleaner:k})}(jQuery),function(a){var b=1;a.rdf.ruleset=function(b,c){return new a.rdf.ruleset.fn.init(b,c)},a.rdf.ruleset.fn=a.rdf.ruleset.prototype={init:function(b,c){var d,e=a.extend({},a.rdf.ruleset.defaults,c);for(b=b||[],this.baseURI=e.base,this.namespaces=a.extend({},e.namespaces),this.rules=[],d=0;d<b.length;d+=1)this.add.apply(this,b[d]);return this},base:function(a){return void 0===a?this.baseURI:(this.baseURI=a,this)},prefix:function(a,b){return void 0===a?this.namespaces:void 0===b?this.namespaces[a]:(this.namespaces[a]=b,this)},size:function(){return this.rules.length},add:function(b,c){var d;return void 0===c&&b.rules?this.rules=this.rules.concat(b.rules):(d=void 0===c&&b.lhs?b:a.rdf.rule(b,c,{namespaces:this.prefix(),base:this.base()}),-1===a.inArray(d,this.rules)&&this.rules.push(d)),this},run:function(b,c){var d,e,f,g=a.extend({limit:50},c),h=g.limit;do{for(f=b.size(),d=0;d<this.rules.length;d+=1)e=this.rules[d],e.run(b);h-=1}while(b.size()>f&&h>0);return this}},a.rdf.ruleset.fn.init.prototype=a.rdf.ruleset.fn,a.rdf.ruleset.defaults={base:a.uri.base(),namespaces:{}},a.rdf.rule=function(b,c,d){return new a.rdf.rule.fn.init(b,c,d)},a.rdf.rule.fn=a.rdf.rule.prototype={init:function(b,c,d){var e=a.extend({},a.rdf.rule.defaults,d),f=[],g=!1;return"string"==typeof b&&(b=[b]),"string"==typeof c&&(c=[c]),this.lhs=a.map(b,function(b){return a.isArray(b)?[b]:a.isFunction(b)?b:(b=a.rdf.pattern(b,e),"string"==typeof b.subject&&f.push(b.subject),"string"==typeof b.property&&f.push(b.property),"string"==typeof b.object&&f.push(b.object),b)}),f=a.unique(f),a.isFunction(c)?this.rhs=c:this.rhs=a.map(c,function(b){if(b=a.rdf.pattern(b,e),"string"==typeof b.subject&&-1===a.inArray(b.subject,f)||"string"==typeof b.property&&-1===a.inArray(b.property,f)||"string"==typeof b.object&&-1===a.inArray(b.object,f))throw"Bad Rule: Right-hand side of the rule contains a reference to an unbound wildcard";return("bnode"===b.subject.type||"bnode"===b.property.type||"bnode"===b.object.type)&&(g=!0),b}),this.rhsBlanks=g,this.cache={},this},run:function(c,d){var e,f,g,h,i,j,k,l,m,n,o,p,q,r=a.rdf({databank:c}),s=a.extend({limit:50},d),t=s.limit,u=this.rhsBlanks;for(void 0===this.cache[c.id]&&(this.cache[c.id]={}),g=0;g<this.lhs.length;g+=1)e=this.lhs[g],r=a.isArray(e)?r.filter.apply(r,e):a.isFunction(e)?r.filter.call(r,e):r.where(this.lhs[g]);do{for(f=r.length,o=r.sources(),g=0;f>g;g+=1){for(p=o[g],q=!0,n=this.cache[c.id],h=0;h<p.length;h+=1)void 0===n[p[h]]?n[p[h]]={}:h===p.length-1&&(q=!1),n=n[p[h]];if(q)if(m=r.eq(g),u){for(h=0;h<this.rhs.length;h+=1)i=this.rhs[h],j=i.subject,k=i.property,l=i.object,"bnode"===j.type&&(j=a.rdf.blank(""+j+b)),"bnode"===k.type&&(k=a.rdf.blank(""+k+b)),"bnode"===l.type&&(l=a.rdf.blank(""+l+b)),i=a.rdf.pattern(j,k,l),m.add(i);b+=1}else if(a.isFunction(this.rhs))for(var v=m.map(this.rhs),w=0;w<v.length;w++)v[w]instanceof a.rdf.triple&&r.add(v[w]);else for(h=0;h<this.rhs.length;h+=1)m.add(this.rhs[h])}t-=1}while(r.length>f&&t>0);return this}},a.rdf.rule.fn.init.prototype=a.rdf.rule.fn,a.rdf.rule.defaults={base:a.uri.base(),namespaces:{}},a.extend(a.rdf.databank.fn,{reason:function(a,b){return a.run(this,b),this}}),a.extend(a.rdf.fn,{reason:function(a,b){return a.run(this.databank,b),this}})}(jQuery),!function(a,b,c){"use strict";!function d(a,b,c){function e(g,h){if(!b[g]){if(!a[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=b[g]={exports:{}};a[g][0].call(k.exports,function(b){var c=a[g][1][b];return e(c?c:b)},k,k.exports,d,a,b,c)}return b[g].exports}for(var f="function"==typeof require&&require,g=0;g<c.length;g++)e(c[g]);return e}({1:[function(d){var e,f,g,h,i=function(a){return a&&a.__esModule?a:{"default":a}},j=d("./modules/handle-dom"),k=d("./modules/utils"),l=d("./modules/handle-swal-dom"),m=d("./modules/handle-click"),n=d("./modules/handle-key"),o=i(n),p=d("./modules/default-params"),q=i(p),r=d("./modules/set-params"),s=i(r);g=h=function(){function d(a){var b=g;return b[a]===c?q["default"][a]:b[a]}var g=arguments[0];if(j.addClass(b.body,"stop-scrolling"),l.resetInput(),g===c)return k.logStr("SweetAlert expects at least 1 attribute!"),!1;var i=k.extend({},q["default"]);switch(typeof g){case"string":i.title=g,i.text=arguments[1]||"",i.type=arguments[2]||"";break;case"object":if(g.title===c)return k.logStr('Missing "title" argument!'),!1;i.title=g.title;for(var n in q["default"])i[n]=d(n);i.confirmButtonText=i.showCancelButton?"Confirm":q["default"].confirmButtonText,i.confirmButtonText=d("confirmButtonText"),i.doneFunction=arguments[1]||null;break;default:return k.logStr('Unexpected type of argument! Expected "string" or "object", got '+typeof g),!1}s["default"](i),l.fixVerticalPosition(),l.openModal(arguments[1]);for(var p=l.getModal(),r=p.querySelectorAll("button"),t=["onclick","onmouseover","onmouseout","onmousedown","onmouseup","onfocus"],u=function(a){return m.handleButton(a,i,p)},v=0;v<r.length;v++)for(var w=0;w<t.length;w++){var x=t[w];r[v][x]=u}l.getOverlay().onclick=u,e=a.onkeydown;var y=function(a){return o["default"](a,i,p)};a.onkeydown=y,a.onfocus=function(){setTimeout(function(){f!==c&&(f.focus(),f=c)},0)},h.enableButtons()},g.setDefaults=h.setDefaults=function(a){if(!a)throw new Error("userParams is required");if("object"!=typeof a)throw new Error("userParams has to be a object");k.extend(q["default"],a)},g.close=h.close=function(){var d=l.getModal();j.fadeOut(l.getOverlay(),5),j.fadeOut(d,5),j.removeClass(d,"showSweetAlert"),j.addClass(d,"hideSweetAlert"),j.removeClass(d,"visible");var g=d.querySelector(".sa-icon.sa-success");j.removeClass(g,"animate"),j.removeClass(g.querySelector(".sa-tip"),"animateSuccessTip"),j.removeClass(g.querySelector(".sa-long"),"animateSuccessLong");var h=d.querySelector(".sa-icon.sa-error");j.removeClass(h,"animateErrorIcon"),j.removeClass(h.querySelector(".sa-x-mark"),"animateXMark");var i=d.querySelector(".sa-icon.sa-warning");return j.removeClass(i,"pulseWarning"),j.removeClass(i.querySelector(".sa-body"),"pulseWarningIns"),j.removeClass(i.querySelector(".sa-dot"),"pulseWarningIns"),setTimeout(function(){var a=d.getAttribute("data-custom-class");j.removeClass(d,a)},300),j.removeClass(b.body,"stop-scrolling"),a.onkeydown=e,a.previousActiveElement&&a.previousActiveElement.focus(),f=c,clearTimeout(d.timeout),!0},g.showInputError=h.showInputError=function(a){var b=l.getModal(),c=b.querySelector(".sa-input-error");j.addClass(c,"show");var d=b.querySelector(".sa-error-container");j.addClass(d,"show"),d.querySelector("p").innerHTML=a,setTimeout(function(){g.enableButtons()},1),b.querySelector("input").focus()},g.resetInputError=h.resetInputError=function(a){if(a&&13===a.keyCode)return!1;var b=l.getModal(),c=b.querySelector(".sa-input-error");j.removeClass(c,"show");var d=b.querySelector(".sa-error-container");j.removeClass(d,"show")},g.disableButtons=h.disableButtons=function(){var a=l.getModal(),b=a.querySelector("button.confirm"),c=a.querySelector("button.cancel");b.disabled=!0,c.disabled=!0},g.enableButtons=h.enableButtons=function(){var a=l.getModal(),b=a.querySelector("button.confirm"),c=a.querySelector("button.cancel");b.disabled=!1,c.disabled=!1},"undefined"!=typeof a?a.sweetAlert=a.swal=g:k.logStr("SweetAlert is a frontend module!")},{"./modules/default-params":2,"./modules/handle-click":3,"./modules/handle-dom":4,"./modules/handle-key":5,"./modules/handle-swal-dom":6,"./modules/set-params":8,"./modules/utils":9}],2:[function(a,b,c){Object.defineProperty(c,"__esModule",{value:!0});var d={title:"",text:"",type:null,allowOutsideClick:!1,showConfirmButton:!0,showCancelButton:!1,closeOnConfirm:!0,closeOnCancel:!0,confirmButtonText:"OK",confirmButtonColor:"#8CD4F5",cancelButtonText:"Cancel",imageUrl:null,imageSize:null,timer:null,customClass:"",html:!1,animation:!0,allowEscapeKey:!0,inputType:"text",inputPlaceholder:"",inputValue:"",showLoaderOnConfirm:!1};c["default"]=d,b.exports=c["default"]},{}],3:[function(b,c,d){Object.defineProperty(d,"__esModule",{value:!0});var e=b("./utils"),f=(b("./handle-swal-dom"),b("./handle-dom")),g=function(b,c,d){function g(a){o&&c.confirmButtonColor&&(n.style.backgroundColor=a)}var j,k,l,m=b||a.event,n=m.target||m.srcElement,o=-1!==n.className.indexOf("confirm"),p=-1!==n.className.indexOf("sweet-overlay"),q=f.hasClass(d,"visible"),r=c.doneFunction&&"true"===d.getAttribute("data-has-done-function");switch(o&&c.confirmButtonColor&&(j=c.confirmButtonColor,k=e.colorLuminance(j,-.04),l=e.colorLuminance(j,-.14)),m.type){case"mouseover":g(k);break;case"mouseout":g(j);break;case"mousedown":g(l);break;case"mouseup":g(k);break;case"focus":var s=d.querySelector("button.confirm"),t=d.querySelector("button.cancel");o?t.style.boxShadow="none":s.style.boxShadow="none";break;case"click":var u=d===n,v=f.isDescendant(d,n);if(!u&&!v&&q&&!c.allowOutsideClick)break;o&&r&&q?h(d,c):r&&q||p?i(d,c):f.isDescendant(d,n)&&"BUTTON"===n.tagName&&sweetAlert.close()}},h=function(a,b){var c=!0;f.hasClass(a,"show-input")&&(c=a.querySelector("input").value,c||(c="")),b.doneFunction(c),b.closeOnConfirm&&sweetAlert.close(),b.showLoaderOnConfirm&&sweetAlert.disableButtons()},i=function(a,b){var c=String(b.doneFunction).replace(/\s/g,""),d="function("===c.substring(0,9)&&")"!==c.substring(9,10);d&&b.doneFunction(!1),b.closeOnCancel&&sweetAlert.close()};d["default"]={handleButton:g,handleConfirm:h,handleCancel:i},c.exports=d["default"]},{"./handle-dom":4,"./handle-swal-dom":6,"./utils":9}],4:[function(c,d,e){Object.defineProperty(e,"__esModule",{value:!0});var f=function(a,b){return new RegExp(" "+b+" ").test(" "+a.className+" ")},g=function(a,b){f(a,b)||(a.className+=" "+b)},h=function(a,b){var c=" "+a.className.replace(/[\t\r\n]/g," ")+" ";if(f(a,b)){for(;c.indexOf(" "+b+" ")>=0;)c=c.replace(" "+b+" "," ");a.className=c.replace(/^\s+|\s+$/g,"")}},i=function(a){var c=b.createElement("div");return c.appendChild(b.createTextNode(a)),c.innerHTML},j=function(a){a.style.opacity="",a.style.display="block"},k=function(a){if(a&&!a.length)return j(a);for(var b=0;b<a.length;++b)j(a[b])},l=function(a){a.style.opacity="",a.style.display="none"},m=function(a){if(a&&!a.length)return l(a);for(var b=0;b<a.length;++b)l(a[b])},n=function(a,b){for(var c=b.parentNode;null!==c;){if(c===a)return!0;c=c.parentNode}return!1},o=function(a){a.style.left="-9999px",a.style.display="block";var b,c=a.clientHeight;return b="undefined"!=typeof getComputedStyle?parseInt(getComputedStyle(a).getPropertyValue("padding-top"),10):parseInt(a.currentStyle.padding),a.style.left="",a.style.display="none","-"+parseInt((c+b)/2)+"px"},p=function(a,b){if(+a.style.opacity<1){b=b||16,a.style.opacity=0,a.style.display="block";var c=+new Date,d=function(a){function b(){return a.apply(this,arguments)}return b.toString=function(){return a.toString()},b}(function(){a.style.opacity=+a.style.opacity+(new Date-c)/100,c=+new Date,+a.style.opacity<1&&setTimeout(d,b)});d()}a.style.display="block"},q=function(a,b){b=b||16,a.style.opacity=1;var c=+new Date,d=function(a){function b(){return a.apply(this,arguments)}return b.toString=function(){return a.toString()},b}(function(){a.style.opacity=+a.style.opacity-(new Date-c)/100,c=+new Date,+a.style.opacity>0?setTimeout(d,b):a.style.display="none"});d()},r=function(c){if("function"==typeof MouseEvent){var d=new MouseEvent("click",{view:a,bubbles:!1,cancelable:!0});c.dispatchEvent(d)}else if(b.createEvent){var e=b.createEvent("MouseEvents");e.initEvent("click",!1,!1),c.dispatchEvent(e)}else b.createEventObject?c.fireEvent("onclick"):"function"==typeof c.onclick&&c.onclick()},s=function(b){"function"==typeof b.stopPropagation?(b.stopPropagation(),b.preventDefault()):a.event&&a.event.hasOwnProperty("cancelBubble")&&(a.event.cancelBubble=!0)};e.hasClass=f,e.addClass=g,e.removeClass=h,e.escapeHtml=i,e._show=j,e.show=k,e._hide=l,e.hide=m,e.isDescendant=n,e.getTopMargin=o,e.fadeIn=p,e.fadeOut=q,e.fireClick=r,e.stopEventPropagation=s},{}],5:[function(b,d,e){Object.defineProperty(e,"__esModule",{value:!0});var f=b("./handle-dom"),g=b("./handle-swal-dom"),h=function(b,d,e){var h=b||a.event,i=h.keyCode||h.which,j=e.querySelector("button.confirm"),k=e.querySelector("button.cancel"),l=e.querySelectorAll("button[tabindex]");if(-1!==[9,13,32,27].indexOf(i)){for(var m=h.target||h.srcElement,n=-1,o=0;o<l.length;o++)if(m===l[o]){n=o;break}9===i?(m=-1===n?j:n===l.length-1?l[0]:l[n+1],f.stopEventPropagation(h),m.focus(),d.confirmButtonColor&&g.setFocusStyle(m,d.confirmButtonColor)):13===i?("INPUT"===m.tagName&&(m=j,j.focus()),m=-1===n?j:c):27===i&&d.allowEscapeKey===!0?(m=k,f.fireClick(m,h)):m=c}};e["default"]=h,d.exports=e["default"]},{"./handle-dom":4,"./handle-swal-dom":6}],6:[function(c,d,e){var f=function(a){return a&&a.__esModule?a:{"default":a}};Object.defineProperty(e,"__esModule",{value:!0});var g=c("./utils"),h=c("./handle-dom"),i=c("./default-params"),j=f(i),k=c("./injected-html"),l=f(k),m=".sweet-alert",n=".sweet-overlay",o=function(){var a=b.createElement("div");for(a.innerHTML=l["default"];a.firstChild;)b.body.appendChild(a.firstChild)},p=function(a){function b(){return a.apply(this,arguments)}return b.toString=function(){return a.toString()},b}(function(){var a=b.querySelector(m);return a||(o(),a=p()),a}),q=function(){var a=p();return a?a.querySelector("input"):void 0;
},r=function(){return b.querySelector(n)},s=function(a,b){var c=g.hexToRgb(b);a.style.boxShadow="0 0 2px rgba("+c+", 0.8), inset 0 0 0 1px rgba(0, 0, 0, 0.05)"},t=function(c){var d=p();h.fadeIn(r(),10),h.show(d),h.addClass(d,"showSweetAlert"),h.removeClass(d,"hideSweetAlert"),a.previousActiveElement=b.activeElement;var e=d.querySelector("button.confirm");e.focus(),setTimeout(function(){h.addClass(d,"visible")},500);var f=d.getAttribute("data-timer");if("null"!==f&&""!==f){var g=c;d.timeout=setTimeout(function(){var a=(g||null)&&"true"===d.getAttribute("data-has-done-function");a?g(null):sweetAlert.close()},f)}},u=function(){var a=p(),b=q();h.removeClass(a,"show-input"),b.value=j["default"].inputValue,b.setAttribute("type",j["default"].inputType),b.setAttribute("placeholder",j["default"].inputPlaceholder),v()},v=function(a){if(a&&13===a.keyCode)return!1;var b=p(),c=b.querySelector(".sa-input-error");h.removeClass(c,"show");var d=b.querySelector(".sa-error-container");h.removeClass(d,"show")},w=function(){var a=p();a.style.marginTop=h.getTopMargin(p())};e.sweetAlertInitialize=o,e.getModal=p,e.getOverlay=r,e.getInput=q,e.setFocusStyle=s,e.openModal=t,e.resetInput=u,e.resetInputError=v,e.fixVerticalPosition=w},{"./default-params":2,"./handle-dom":4,"./injected-html":7,"./utils":9}],7:[function(a,b,c){Object.defineProperty(c,"__esModule",{value:!0});var d='<div class="sweet-overlay" tabIndex="-1"></div><div class="sweet-alert"><div class="sa-icon sa-error">\n      <span class="sa-x-mark">\n        <span class="sa-line sa-left"></span>\n        <span class="sa-line sa-right"></span>\n      </span>\n    </div><div class="sa-icon sa-warning">\n      <span class="sa-body"></span>\n      <span class="sa-dot"></span>\n    </div><div class="sa-icon sa-info"></div><div class="sa-icon sa-success">\n      <span class="sa-line sa-tip"></span>\n      <span class="sa-line sa-long"></span>\n\n      <div class="sa-placeholder"></div>\n      <div class="sa-fix"></div>\n    </div><div class="sa-icon sa-custom"></div><h2>Title</h2>\n    <p>Text</p>\n    <fieldset>\n      <input type="text" tabIndex="3" />\n      <div class="sa-input-error"></div>\n    </fieldset><div class="sa-error-container">\n      <div class="icon">!</div>\n      <p>Not valid!</p>\n    </div><div class="sa-button-container">\n      <button class="cancel" tabIndex="2">Cancel</button>\n      <div class="sa-confirm-button-container">\n        <button class="confirm" tabIndex="1">OK</button><div class="la-ball-fall">\n          <div></div>\n          <div></div>\n          <div></div>\n        </div>\n      </div>\n    </div></div>';c["default"]=d,b.exports=c["default"]},{}],8:[function(a,b,d){Object.defineProperty(d,"__esModule",{value:!0});var e=a("./utils"),f=a("./handle-swal-dom"),g=a("./handle-dom"),h=["error","warning","info","success","input","prompt"],i=function(a){var b=f.getModal(),d=b.querySelector("h2"),i=b.querySelector("p"),j=b.querySelector("button.cancel"),k=b.querySelector("button.confirm");if(d.innerHTML=a.html?a.title:g.escapeHtml(a.title).split("\n").join("<br>"),i.innerHTML=a.html?a.text:g.escapeHtml(a.text||"").split("\n").join("<br>"),a.text&&g.show(i),a.customClass)g.addClass(b,a.customClass),b.setAttribute("data-custom-class",a.customClass);else{var l=b.getAttribute("data-custom-class");g.removeClass(b,l),b.setAttribute("data-custom-class","")}if(g.hide(b.querySelectorAll(".sa-icon")),a.type&&!e.isIE8()){var m=function(){for(var d=!1,e=0;e<h.length;e++)if(a.type===h[e]){d=!0;break}if(!d)return logStr("Unknown alert type: "+a.type),{v:!1};var i=["success","error","warning","info"],j=c;-1!==i.indexOf(a.type)&&(j=b.querySelector(".sa-icon.sa-"+a.type),g.show(j));var k=f.getInput();switch(a.type){case"success":g.addClass(j,"animate"),g.addClass(j.querySelector(".sa-tip"),"animateSuccessTip"),g.addClass(j.querySelector(".sa-long"),"animateSuccessLong");break;case"error":g.addClass(j,"animateErrorIcon"),g.addClass(j.querySelector(".sa-x-mark"),"animateXMark");break;case"warning":g.addClass(j,"pulseWarning"),g.addClass(j.querySelector(".sa-body"),"pulseWarningIns"),g.addClass(j.querySelector(".sa-dot"),"pulseWarningIns");break;case"input":case"prompt":k.setAttribute("type",a.inputType),k.value=a.inputValue,k.setAttribute("placeholder",a.inputPlaceholder),g.addClass(b,"show-input"),setTimeout(function(){k.focus(),k.addEventListener("keyup",swal.resetInputError)},400)}}();if("object"==typeof m)return m.v}if(a.imageUrl){var n=b.querySelector(".sa-icon.sa-custom");n.style.backgroundImage="url("+a.imageUrl+")",g.show(n);var o=80,p=80;if(a.imageSize){var q=a.imageSize.toString().split("x"),r=q[0],s=q[1];r&&s?(o=r,p=s):logStr("Parameter imageSize expects value with format WIDTHxHEIGHT, got "+a.imageSize)}n.setAttribute("style",n.getAttribute("style")+"width:"+o+"px; height:"+p+"px")}b.setAttribute("data-has-cancel-button",a.showCancelButton),a.showCancelButton?j.style.display="inline-block":g.hide(j),b.setAttribute("data-has-confirm-button",a.showConfirmButton),a.showConfirmButton?k.style.display="inline-block":g.hide(k),a.cancelButtonText&&(j.innerHTML=g.escapeHtml(a.cancelButtonText)),a.confirmButtonText&&(k.innerHTML=g.escapeHtml(a.confirmButtonText)),a.confirmButtonColor&&(k.style.backgroundColor=a.confirmButtonColor,k.style.borderLeftColor=a.confirmLoadingButtonColor,k.style.borderRightColor=a.confirmLoadingButtonColor,f.setFocusStyle(k,a.confirmButtonColor)),b.setAttribute("data-allow-outside-click",a.allowOutsideClick);var t=a.doneFunction?!0:!1;b.setAttribute("data-has-done-function",t),a.animation?"string"==typeof a.animation?b.setAttribute("data-animation",a.animation):b.setAttribute("data-animation","pop"):b.setAttribute("data-animation","none"),b.setAttribute("data-timer",a.timer)};d["default"]=i,b.exports=d["default"]},{"./handle-dom":4,"./handle-swal-dom":6,"./utils":9}],9:[function(b,c,d){Object.defineProperty(d,"__esModule",{value:!0});var e=function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a},f=function(a){var b=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a);return b?parseInt(b[1],16)+", "+parseInt(b[2],16)+", "+parseInt(b[3],16):null},g=function(){return a.attachEvent&&!a.addEventListener},h=function(b){a.console&&a.console.log("SweetAlert: "+b)},i=function(a,b){a=String(a).replace(/[^0-9a-f]/gi,""),a.length<6&&(a=a[0]+a[0]+a[1]+a[1]+a[2]+a[2]),b=b||0;var c,d,e="#";for(d=0;3>d;d++)c=parseInt(a.substr(2*d,2),16),c=Math.round(Math.min(Math.max(0,c+c*b),255)).toString(16),e+=("00"+c).substr(c.length);return e};d.extend=e,d.hexToRgb=f,d.isIE8=g,d.logStr=h,d.colorLuminance=i},{}]},{},[1]),"function"==typeof define&&define.amd?define(function(){return sweetAlert}):"undefined"!=typeof module&&module.exports&&(module.exports=sweetAlert)}(window,document),function(){var a=this,b=a.jQuery,c=a.Backbone,d=a._,e=a.VIE=function(a){this.config=a?a:{},this.services={},this.jQuery=b,this.entities=new this.Collection,this.Entity.prototype.entities=this.entities,this.entities.vie=this,this.Entity.prototype.entityCollection=this.Collection,this.Entity.prototype.vie=this,this.Namespaces.prototype.vie=this,this.namespaces=new this.Namespaces(this.config.baseNamespace?this.config.baseNamespace:"http://viejs.org/ns/",{owl:"http://www.w3.org/2002/07/owl#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",schema:"http://schema.org/",foaf:"http://xmlns.com/foaf/0.1/",geo:"http://www.w3.org/2003/01/geo/wgs84_pos#",dbpedia:"http://dbpedia.org/ontology/",dbprop:"http://dbpedia.org/property/",skos:"http://www.w3.org/2004/02/skos/core#",xsd:"http://www.w3.org/2001/XMLSchema#",sioc:"http://rdfs.org/sioc/ns#",dcterms:"http://purl.org/dc/terms/"}),this.Type.prototype.vie=this,this.Types.prototype.vie=this,this.Attribute.prototype.vie=this,this.Attributes.prototype.vie=this,this.types=new this.Types,this.types.add("owl:Thing"),this.config.classic===!0&&(this.RDFa=new this.ClassicRDFa(this),this.RDFaEntities=new this.ClassicRDFaEntities(this),this.EntityManager=new this.ClassicEntityManager(this),this.cleanup=function(){this.entities.reset()})};if(e.prototype.use=function(a,b){if(!b&&!a.name)throw new Error("Please provide a name for the service!");return a.vie=this,a.name=b?b:a.name,a.init&&a.init(),this.services[a.name]=a,this},e.prototype.service=function(a){if(!this.services[a])throw"Undefined service "+a;return this.services[a]},e.prototype.getServicesArray=function(){return d.map(this.services,function(a){return a})},e.prototype.load=function(a){return a||(a={}),a.vie=this,new this.Loadable(a)},e.prototype.save=function(a){return a||(a={}),a.vie=this,new this.Savable(a)},e.prototype.remove=function(a){return a||(a={}),a.vie=this,new this.Removable(a)},e.prototype.analyze=function(a){return a||(a={}),a.vie=this,new this.Analyzable(a)},e.prototype.find=function(a){return a||(a={}),a.vie=this,new this.Findable(a)},e.prototype.loadSchema=function(a,c){if(c=c?c:{},!a)throw new Error("Please provide a proper URL");var d=this;return b.getJSON(a).success(function(a){e.Util.loadSchemaOrg(d,a,c.baseNS),c.success&&c.success.call(d)}).error(function(b,e,f){c.error&&(console.warn(b,e,f),c.error.call(d,"Could not load schema from URL ("+a+")"))}),this},"object"==typeof exports&&(exports.VIE=e,b||(b=require("jquery")),c||(c=require("backbone"),c.setDomLibrary(b)),d||(d=require("underscore")._)),e.prototype.Able=function(){this.init=function(a,c){return this.options=a,this.services=a.from||a.using||a.to||[],this.vie=a.vie,this.methodName=c,this.deferred=b.Deferred(),this.resolve=this.deferred.resolve,this.resolveWith=this.deferred.resolveWith,this.reject=this.deferred.reject,this.rejectWith=this.deferred.rejectWith,this.success=this.done=this.deferred.done,this.fail=this.deferred.fail,this.then=this.deferred.then,this.always=this.deferred.always,this.from=this.using,this.to=this.using,this},this.using=function(a){var b=this;return a=d.isArray(a)?a:[a],d.each(a,function(a){var c="string"==typeof a?b.vie.service(a):a;b.services.push(c)}),this},this.execute=function(){var a=this;return d(this.services).each(function(b){b[a.methodName](a)}),this}},e.prototype.Loadable=function(a){this.init(a,"load")},e.prototype.Loadable.prototype=new e.prototype.Able,e.prototype.Savable=function(a){this.init(a,"save")},e.prototype.Savable.prototype=new e.prototype.Able,e.prototype.Removable=function(a){this.init(a,"remove")},e.prototype.Removable.prototype=new e.prototype.Able,e.prototype.Analyzable=function(a){this.init(a,"analyze")},e.prototype.Analyzable.prototype=new e.prototype.Able,e.prototype.Findable=function(a){this.init(a,"find")},e.prototype.Findable.prototype=new e.prototype.Able,e.Util={toCurie:function(a,b,c){if(e.Util.isCurie(a,c))return a;var d=":";for(var f in c.toObj())if(1===a.indexOf(c.get(f))){var g=new RegExp("^<?"+c.get(f));return""===f&&(d=""),(b?"[":"")+a.replace(g,f+d).replace(/>$/,"")+(b?"]":"")}throw new Error("No prefix found for URI '"+a+"'!")},isCurie:function(a,b){if(e.Util.isUri(a))return!1;try{return e.Util.toUri(a,b),!0}catch(c){return!1}},toUri:function(a,b){var c=":";for(var d in b.toObj())if(""!==d&&(0===a.indexOf(d+":")||0===a.indexOf("["+d+":"))){var e=new RegExp("^\\[{0,1}"+d+c);return"<"+a.replace(e,b.get(d)).replace(/\]{0,1}$/,"")+">"}if(-1===a.indexOf(c))return"<"+b.base()+a+">";throw new Error("No prefix found for CURIE '"+a+"'!")},isUri:function(a){return"string"==typeof a&&0===a.search(/^<.+>$/)},rdf2Entities:function(a,c){if("function"!=typeof b.rdf)return e.Util._rdf2EntitiesNoRdfQuery(a,c);try{var f=c instanceof b.rdf?c:b.rdf().load(c,{});if(f.base(a.vie.namespaces.base()),a.rules){var g=b.rdf.ruleset();for(var h in a.vie.namespaces.toObj())""!==h&&g.prefix(h,a.vie.namespaces.get(h));for(var i=0;i<a.rules.length;i++)if(a.rules.hasOwnProperty(i)){var j=a.rules[i];g.add(j.left,j.right)}f=f.reason(g,10)}var k={};f.where("?subject ?property ?object").each(function(){function b(a){if("string"==typeof a.value){if(a.lang){var b={toString:function(){return this["@value"]},"@value":a.value.replace(/^"|"$/g,""),"@language":a.lang};return b}return a.value}return"uri"===a.type?a.toString():a.value}var c=this.subject.toString();k[c]||(k[c]={"@subject":c,"@context":a.vie.namespaces.toObj(!0),"@type":[]});var d,e=this.property.toString();try{d=a.vie.namespaces.curie(e)}catch(f){d=e}k[c][d]=k[c][d]||[],k[c][d].push(b(this.object))}),d(k).each(function(a){a["@type"]=a["@type"].concat(a["rdf:type"]),delete a["rdf:type"],d(a).each(function(b,c){1===b.length&&(a[c]=b[0])})});var l=[];return b.each(k,function(){var b=new a.vie.Entity(this);b=a.vie.entities.addOrUpdate(b),l.push(b)}),l}catch(m){return console.warn("Something went wrong while parsing the returned results!",m),[]}},getPreferredLangForPreferredProperty:function(a,b,c){var e,f,g,h,i,j,k,l,m;for(j=[],e=0,l=c.length;l>e;e++)for(g=c[e],h=0,m=b.length;m>h;h++)i=b[h],f=null,"string"==typeof i&&a.get(i)?(f=d.flatten([a.get(i)]),d(f).each(function(a){var b,c,d;return c=h,b=a["@language"],"string"!=typeof a||a.indexOf("@")!==a.length-3&&a.indexOf("@")!==a.length-5||(b=a.replace(/(^\"*|\"*@)..(..)?$/g,"")),c+=b?b===g?e:20:10,d=a.toString(),d=d.replace(/(^\"*|\"*@..$)/g,""),j.push({score:c,value:d})})):"object"==typeof i&&a.get(i.property)&&(k=d.flatten([a.get(i.property)]),k=d(k).map(function(a){return a.isEntity?a.getSubject():a}),j.push({score:h,value:i.makeLabel(k)}));return j=d(j).sortBy(function(a){return a.score}),j.length?j[0].value:"n/a"},_rdf2EntitiesNoRdfQuery:function(a,b){var c=[];return d.forEach(b,function(a,b){var e={};e["@subject"]="<"+b+">",d.forEach(a,function(a,b){b="<"+b+">",d.forEach(a,function(a){return"uri"===a.type&&(a.value="<"+a.value+">"),e[b]&&!d.isArray(e[b])&&(e[b]=[e[b]]),d.isArray(e[b])?void e[b].push(a.value):void(e[b]=a.value)})}),c.push(e)}),c},loadSchemaOrg:function(a,b,c){if(!b)throw new Error("Please load the schema.json file.");a.types.remove("<http://schema.org/Thing>");var d=c?c:a.namespaces.base();a.namespaces.base(c);var e={DataType:"xsd:anyType",Boolean:"xsd:boolean",Date:"xsd:date",Float:"xsd:float",Integer:"xsd:integer",Number:"xsd:anySimpleType",Text:"xsd:string",URL:"xsd:anyURI"},f=function(c,d){for(var g=a.types.add(d,[{id:"value",range:e[d]}]),h=0;h<c.length;h++){var i=a.types.get(c[h])?a.types.get(c[h]):f.call(a,b.datatypes[c[h]].supertypes,c[h]);g.inherit(i)}return g};for(var g in b.datatypes)if(!a.types.get(g)){var h=b.datatypes[g].supertypes;f.call(a,h,g)}var i=function(a){for(var c=[],d=b.types[a].specific_properties,e=0;e<d.length;e++){var f=d[e],g=b.properties[f].ranges;c.push({id:f,range:g})}return c},j=function(c,d,e){for(var f=a.types.add(d,e),g=0;g<c.length;g++){var h=a.types.get(c[g])?a.types.get(c[g]):j.call(a,b.types[c[g]].supertypes,c[g],i.call(a,c[g]));f.inherit(h)}return"Thing"!==d||f.isof("owl:Thing")||f.inherit("owl:Thing"),f};for(var k in b.types)if(!a.types.get(k)){var h=b.types[k].supertypes;j.call(a,h,k,i.call(a,k))}a.namespaces.base(d)},xsdDateTime:function(a){function b(a){var b=a.toString();return b.length<2?"0"+b:b}var c=a.getFullYear(),d=b(a.getMonth()+1),e=b(a.getDate()),f=b(a.getHours()),g=b(a.getMinutes()),h=b(a.getSeconds());return c+"-"+d+"-"+e+"T"+f+":"+g+":"+h},transformationRules:function(a){var c=[{left:["?subject a dbpedia:Person","?subject rdfs:label ?label"],right:function(a){return function(){return[b.rdf.triple(this.subject.toString(),"a","<"+a.base()+"Person>",{namespaces:a.toObj()}),b.rdf.triple(this.subject.toString(),"<"+a.base()+"name>",this.label,{namespaces:a.toObj()})]}}(a.vie.namespaces)},{left:["?subject a foaf:Person","?subject rdfs:label ?label"],right:function(a){return function(){return[b.rdf.triple(this.subject.toString(),"a","<"+a.base()+"Person>",{namespaces:a.toObj()}),b.rdf.triple(this.subject.toString(),"<"+a.base()+"name>",this.label,{namespaces:a.toObj()})]}}(a.vie.namespaces)},{left:["?subject a dbpedia:Place","?subject rdfs:label ?label"],right:function(a){return function(){return[b.rdf.triple(this.subject.toString(),"a","<"+a.base()+"Place>",{namespaces:a.toObj()}),b.rdf.triple(this.subject.toString(),"<"+a.base()+"name>",this.label.toString(),{namespaces:a.toObj()})]}}(a.vie.namespaces)},{left:["?subject a dbpedia:City","?subject rdfs:label ?label","?subject dbpedia:abstract ?abs","?subject dbpedia:country ?country"],right:function(a){return function(){return[b.rdf.triple(this.subject.toString(),"a","<"+a.base()+"City>",{namespaces:a.toObj()}),b.rdf.triple(this.subject.toString(),"<"+a.base()+"name>",this.label.toString(),{namespaces:a.toObj()}),b.rdf.triple(this.subject.toString(),"<"+a.base()+"description>",this.abs.toString(),{namespaces:a.toObj()}),b.rdf.triple(this.subject.toString(),"<"+a.base()+"containedIn>",this.country.toString(),{namespaces:a.toObj()})]}}(a.vie.namespaces)}];return c}},e.prototype.Entity=function(a,b){a=a?a:{},b=b?b:{};var e=this,f=function(a,b){var c=a;return b.isUri(a)||0===a.indexOf("@")||(b.isCurie(a)?c=b.uri(a):b.isUri(a)||(c=-1===a.indexOf(":")?"<"+b.base()+a+">":"<"+a+">")),c};void 0!==a["@type"]?(a["@type"]=d.isArray(a["@type"])?a["@type"]:[a["@type"]],a["@type"]=d.map(a["@type"],function(a){return e.vie.types.get(a)||e.vie.types.add(a).inherit("owl:Thing"),e.vie.types.get(a).id}),a["@type"]=1===a["@type"].length?a["@type"][0]:a["@type"]):a["@type"]=e.vie.types.get("owl:Thing").id,d.each(a,function(b,c){var d=f(c,this.namespaces);c!==d&&(delete a[c],a[d]=b)},e.vie);var g=c.Model.extend({idAttribute:"@subject",initialize:function(a,b){return a["@subject"]?this.id=this["@subject"]=this.toReference(a["@subject"]):this.id=this["@subject"]=a["@subject"]=this.cid.replace("c","_:bnode"),this},get:function(a){a=f(a,e.vie.namespaces);var b=c.Model.prototype.get.call(this,a);return b=d.isArray(b)?b:[b],b=d.map(b,function(b){return void 0!==b&&"@type"===a&&e.vie.types.get(b)?e.vie.types.get(b):void 0!==b&&e.vie.entities.get(b)?e.vie.entities.get(b):b},this),0===b.length?void 0:b=1===b.length?b[0]:b},has:function(a){return a=f(a,e.vie.namespaces),c.Model.prototype.has.call(this,a)},set:function(a,b,e){if(!a)return this;if("string"==typeof a){var g={};return g[a]=b,this.set(g,e)}a.attributes&&(a=a.attributes);var h=this;return d.each(a,function(b,c){var d=f(c,h.vie.namespaces);c!==d&&(delete a[c],a[d]=b)},this),d.each(a,function(c,e){if(c&&-1===e.indexOf("@"))if(c.isCollection)c.each(function(a){h.vie.entities.addOrUpdate(a)});else if(c.isEntity){h.vie.entities.addOrUpdate(c);var f=new h.vie.Collection;f.add(c),a[e]=f}else if(d.isArray(c));else if(c["@value"]);else if("object"==typeof c){var g=new h.vie.Entity(c,b);h.vie.entities.addOrUpdate(g);var f=new h.vie.Collection;f.add(c),a[e]=f}},this),c.Model.prototype.set.call(this,a,b)},unset:function(a,b){return a=f(a,e.vie.namespaces),c.Model.prototype.unset.call(this,a,b)},isNew:function(){return"_:bnode"===this.getSubjectUri().substr(0,7)?!0:!1},getSubject:function(){return"undefined"==typeof this.id&&(this.id=this.attributes[this.idAttribute]),"string"==typeof this.id?"http://"===this.id.substr(0,7)||"urn:"===this.id.substr(0,4)?this.toReference(this.id):this.id:this.cid.replace("c","_:bnode")},getSubjectUri:function(){return this.fromReference(this.getSubject())},isReference:function(a){var b=new RegExp("^\\<([^\\>]*)\\>$");return b.exec(a)?!0:!1},toReference:function(a){if(d.isArray(a)){var b=this;return d.map(a,function(a){return b.toReference(a)})}var c=this.vie.namespaces,e=a;return"_:"===a.substring(0,2)?e=a:c.isCurie(a)?(e=c.uri(a),e==="<"+c.base()+a+">"&&(e="<"+a+">")):c.isUri(a)||(e="<"+a+">"),e},fromReference:function(a){var b=this.vie.namespaces;return b.isUri(a)?a.substring(1,a.length-1):a},as:function(a){if("JSON"===a)return this.toJSON();if("JSONLD"===a)return this.toJSONLD();throw new Error("Unknown encoding "+a)},toJSONLD:function(){var a={},b=this;return d.each(b.attributes,function(c,d){var e=c;c instanceof b.vie.Collection&&(e=c.map(function(a){return a.getSubject()})),a[d]=e}),a["@subject"]=b.getSubject(),a},setOrAdd:function(a,b){var c=this;return"string"==typeof a&&b?c._setOrAddOne(a,b):"object"==typeof a&&d(a).each(function(a,b){c._setOrAddOne(b,a)}),this},_setOrAddOne:function(a,b){if(a&&b)if(a=f(a,e.vie.namespaces),d.isArray(b))for(var g=0;g<b.length;g++)this._setOrAddOne(a,b[g]);else{"@type"===a&&b instanceof e.vie.Type&&(b=b.id);var h={},i=c.Model.prototype.get.call(this,a);if(i)if(i.isCollection){if(b.isCollection)b.each(function(a){i.add(a)});else if(b.isEntity)i.add(b);else{if("object"!=typeof b)throw new Error("you cannot add a literal to a collection of entities!");b=new this.vie.Entity(b),i.add(b)}this.trigger("change:"+a,this,b,{}),this.change({})}else if(d.isArray(i)){if(b.isCollection)throw new Error("you cannot add a collection of entities to an array of literals!");if(b.isEntity)this._setOrAddOne(a,b.getSubject());else{if("object"==typeof b)throw new Error("you cannot add an entity of entities to an array of literals!");i.push(b),h[a]=i,this.set(h)}}else{if(b.isCollection)throw new Error("you cannot add a collection of entities to a literal!");if(b.isEntity)this._setOrAddOne(a,b.getSubject());else{if("object"==typeof b)throw new Error("you cannot add an entity of entities to a literal!");var j=[];j.push(i),j.push(b),h[a]=j,this.set(h)}}else h[a]=b,this.set(h)}},hasType:function(a){return a=e.vie.types.get(a),this.hasPropertyValue("@type",a)},hasPropertyValue:function(a,b){var c=this.get(a);return b instanceof Object||(b=e.vie.entities.get(b)),c instanceof Array?-1!==c.indexOf(b):c===b},isof:function(a){var b=this.get("@type");if(void 0===b)return!1;b=d.isArray(b)?b:[b],a=e.vie.types.get(a)?e.vie.types.get(a):new e.vie.Type(a);for(var c=0;c<b.length;c++)if(e.vie.types.get(b[c])){if(e.vie.types.get(b[c]).isof(a))return!0}else{var f=new e.vie.Type(b[c]);if(f.id===a.id)return!0}return!1},addTo:function(a,b){var c=this;if(a instanceof c.vie.Collection)return b?a.addOrUpdate(c):a.add(c),this;throw new Error("Please provide a proper collection of type VIE.Collection as argument!")},isEntity:!0,vie:e.vie});return new g(a,b)},e.prototype.Collection=c.Collection.extend({model:e.prototype.Entity,get:function(a){return null===a?null:(a=a.getSubject?a.getSubject():a,"string"==typeof a&&0===a.indexOf("_:")?2===a.indexOf("bnode")?(a=a.replace("_:bnode","c"),this._byCid[a]):this._byId["<"+a+">"]:(a=this.toReference(a),this._byId[a]))},addOrUpdate:function(a,c){c||(c={});var e,f=this;if(d.isArray(a)){var g=[];return d.each(a,function(a){g.push(f.addOrUpdate(a,c))}),g}if(void 0===a)throw new Error("No model given");if(a.isEntity||(a=new this.model(a)),a.id&&this.get(a.id)&&(e=this.get(a.id)),this.getByCid(a.cid))var e=this.getByCid(a.cid);if(e){var h={};return d.each(a.attributes,function(a,g){if(!e.has(g))return h[g]=a,!0;if(e.get(g)===a)return!0;var i=e.attributes[g],j=a;return i instanceof f.vie.Collection?!0:c.overrideAttributes?(h[g]=a,!0):void("@context"===g?h[g]=b.extend(!0,{},i,j):(i=b.isArray(i)?i:[i],j=b.isArray(j)?j:[j],h[g]=d.uniq(i.concat(j)),h[g]=1===h[g].length?h[g][0]:h[g]))}),d.isEmpty(h)||e.set(h,c.updateOptions),e}return this.add(a,c.addOptions),a},isReference:function(a){var b=new RegExp("^\\<([^\\>]*)\\>$");return b.exec(a)?!0:!1},toReference:function(a){return this.isReference(a)?a:"<"+a+">"},fromReference:function(a){return this.isReference(a)?a.substring(1,a.length-1):a},isCollection:!0}),e.prototype.Type)throw new Error("ERROR: VIE.Type is already defined. Please check your installation!");if(e.prototype.Types)throw new Error("ERROR: VIE.Types is already defined. Please check your installation!");if(e.prototype.Type=function(a,c){if(void 0===a||"string"!=typeof a)throw"The type constructor needs an 'id' of type string! E.g., 'Person'";if(this.id=this.vie.namespaces.isUri(a)?a:this.vie.namespaces.uri(a),this.vie.types.get(this.id))throw new Error("The type "+this.id+" is already defined!");this.supertypes=new this.vie.Types,this.subtypes=new this.vie.Types,this.attributes=new this.vie.Attributes(this,c?c:[]),this.isof=function(a){if(a=this.vie.types.get(a))return a.subsumes(this.id);throw new Error("No valid type given")},this.subsumes=function(a){if(a=this.vie.types.get(a)){if(this.id===a.id)return!0;for(var b=this.subtypes.list(),c=0;c<b.length;c++){var d=b[c];if(d&&(d.id===a.id||d.subsumes(a)))return!0}return!1}throw new Error("No valid type given")},this.inherit=function(a){if("string"==typeof a)this.inherit(this.vie.types.get(a));else if(a instanceof this.vie.Type){a.subtypes.addOrOverwrite(this),this.supertypes.addOrOverwrite(a);try{this.attributes.list()}catch(c){throw a.subtypes.remove(this),this.supertypes.remove(a),c}}else{if(!b.isArray(a))throw new Error("Wrong argument in VIE.Type.inherit()");for(var d=0,e=a.length;e>d;d++)this.inherit(a[d])}return this},this.hierarchy=function(){for(var a={id:this.id,subtypes:[]},b=this.subtypes.list(),c=0,d=b.length;d>c;c++){var e=this.vie.types.get(b[c]);a.subtypes.push(e.hierarchy())}return a},this.instance=function(a,b){if(a=a?a:{},b=b?b:{},b.typeChecking!==!1)for(var c in a)if(0!==c.indexOf("@")&&!this.attributes.get(c))throw new Error("Cannot create an instance of "+this.id+" as the type does not allow an attribute '"+c+"'!");return a["@type"]?a["@type"].push(this.id):a["@type"]=this.id,new this.vie.Entity(a,b)},this.toString=function(){return this.id}},e.prototype.Types=function(){this._types={},this.add=function(a,b){if(this.get(a))throw new Error("Type '"+a+"' already registered.");if("string"==typeof a){var c=new this.vie.Type(a,b);return this._types[c.id]=c,c}if(a instanceof this.vie.Type)return this._types[a.id]=a,a;throw new Error("Wrong argument to VIE.Types.add()!")},this.addOrOverwrite=function(a,b){return this.get(a)&&this.remove(a),this.add(a,b)},this.get=function(a){if(!a)return void 0;if("string"==typeof a){var b=this.vie.namespaces.isUri(a)?a:this.vie.namespaces.uri(a);return this._types[b]}return a instanceof this.vie.Type?this.get(a.id):void 0},this.remove=function(a){var b=this.get(a);if(!b)return this;if(!b||b.subsumes("owl:Thing"))return console.warn("You are not allowed to remove 'owl:Thing'."),this;delete this._types[b.id];for(var c=b.subtypes.list(),d=0;d<c.length;d++){var e=c[d];1===e.supertypes.list().length?this.remove(e):e.supertypes.remove(b.id)}return b},this.toArray=this.list=function(){var a=[];for(var b in this._types)a.push(this._types[b]);return a},this.sort=function(a,c){var d=this;if(a=b.isArray(a)?a:[a],c=c?!0:!1,0===a.length)return[];for(var e=[a[0]],f=1,g=a.length;g>f;f++){var h=a[f],i=d.get(h);if(i)for(var j=0;j<e.length;j++){if(i.subsumes(e[j])){e.splice(j,0,h);break}j===e.length-1&&e.push(h)}}return c||e.reverse(),e}},e.prototype.Attribute)throw new Error("ERROR: VIE.Attribute is already defined. Please check your VIE installation!");if(e.prototype.Attributes)throw new Error("ERROR: VIE.Attributes is already defined. Please check your VIE installation!");if(e.prototype.Attribute=function(a,b,c,e,f){if(void 0===a||"string"!=typeof a)throw new Error("The attribute constructor needs an 'id' of type string! E.g., 'Person'");if(void 0===b)throw new Error("The attribute constructor needs 'range'.");if(void 0===c)throw new Error("The attribute constructor needs a 'domain'.");this._domain=c,this.id=this.vie.namespaces.isUri(a)?a:this.vie.namespaces.uri(a),this.range=d.isArray(b)?b:[b],e=e?e:0,this.min=e>0?e:0,f=f?f:Number.MAX_VALUE,this.max=f>=this.min?f:this.min,this.applies=function(a){this.vie.types.get(a)&&(a=this.vie.types.get(a));for(var b=0,c=this.range.length;c>b;b++){var d=this.vie.types.get(this.range[b]);if(void 0===d&&"string"==typeof a){if(a===this.range[b])return!0}else if(a.isof(this.range[b]))return!0}return!1}},e.prototype.Attributes=function(a,c){this._local={},this._attributes={},this.domain=a,this.add=function(a,b,c,d){if(this.get(a))throw new Error("Attribute '"+a+"' already registered for domain "+this.domain.id+"!");if("string"==typeof a){var e=new this.vie.Attribute(a,b,this.domain,c,d);return this._local[e.id]=e,e}if(a instanceof this.vie.Attribute)return a.domain=this.domain,a.vie=this.vie,this._local[a.id]=a,a;throw new Error("Wrong argument to VIE.Types.add()!")},this.remove=function(a){var b=this.get(a);if(b.id in this._local)return delete this._local[b.id],b;throw new Error("The attribute "+a+" is inherited and cannot be removed from the domain "+this.domain.id+"!")},this.get=function(a){if("string"==typeof a){var b=this.vie.namespaces.isUri(a)?a:this.vie.namespaces.uri(a);return this._inherit()._attributes[b]}if(a instanceof this.vie.Attribute)return this.get(a.id);throw new Error("Wrong argument in VIE.Attributes.get()")},this._inherit=function(){for(var a=b.extend(!0,{},this._local),c=d.map(this.domain.supertypes.list(),function(a){return a.attributes}),e={},f={},g=0,h=c.length;h>g;g++)for(var i=c[g].list(),j=0,k=i.length;k>j;j++){var l=i[j].id;l in a||(l in e||l in f?(f[l]||(f[l]={range:[],mins:[],maxs:[]}),l in e&&(f[l].range=b.merge(f[l].range,e[l].range),f[l].mins=b.merge(f[l].mins,[e[l].min]),f[l].maxs=b.merge(f[l].maxs,[e[l].max]),delete e[l]),f[l].range=b.merge(f[l].range,i[j].range),f[l].mins=b.merge(f[l].mins,[i[j].min]),f[l].maxs=b.merge(f[l].maxs,[i[j].max]),f[l].range=d.uniq(f[l].range),f[l].mins=d.uniq(f[l].mins),f[l].maxs=d.uniq(f[l].maxs)):e[l]=i[j])}b.extend(a,e);for(var l in f){for(var m=f[l].range,n=f[l].mins,o=f[l].maxs,p=[],q=0,r=m.length;r>q;q++){var s=this.vie.types.get(m[q]),t=!1;if(s)for(var j=0;r>j;j++)if(j!==q){var u=this.vie.types.get(m[j]);if(u&&u.isof(s)){t=!0;break}}t||p.push(m[q])}var v=d.max(n),w=d.min(o);if(!(w>=v&&w>=0&&v>=0))throw new Error("This inheritance is not allowed because of an invalid minCount/maxCount pair!");a[l]=new this.vie.Attribute(l,p,this,v,w)}return this._attributes=a,this},this.toArray=this.list=function(a){var b=[],c=this._inherit()._attributes;for(var d in c)(!a||c[d].applies(a))&&b.push(c[d]);return b},c=d.isArray(c)?c:[c];for(var e=0,f=c.length;f>e;e++)this.add(c[e].id,c[e].range,c[e].min,c[e].max)},e.prototype.Namespaces)throw new Error("ERROR: VIE.Namespaces is already defined. Please check your VIE installation!");e.prototype.Namespaces=function(a,b){if(!a)throw new Error("Please provide a base namespace!");if(this._base=a,this._namespaces=b?b:{},"object"!=typeof this._namespaces||d.isArray(this._namespaces))throw new Error("If you want to initialise VIE namespace prefixes, please provide a proper object!")},e.prototype.Namespaces.prototype.base=function(a){if(a){if("string"==typeof a)return this.removeNamespace(a),this._base=a,this._base;throw new Error("Please provide a valid namespace!")}return this._base},e.prototype.Namespaces.prototype.add=function(a,c){if("object"==typeof a){for(var d in a)this.add(d,a[d]);return this}if(""===a)return this.base(c),this;if(this.contains(a)&&c!==this._namespaces[a])throw new Error("ERROR: Trying to register namespace prefix mapping ("+a+","+c+")!There is already a mapping existing: '("+a+","+this.get(a)+")'!");return b.each(this._namespaces,function(b,d){if(d===c&&b!==a)throw new Error("ERROR: Trying to register namespace prefix mapping ("+a+","+c+")!There is already a mapping existing: '("+b+","+c+")'!")}),this._namespaces[a]=c,this},e.prototype.Namespaces.prototype.addOrReplace=function(a,b){if("object"==typeof a){for(var c in a)this.addOrReplace(c,a[c]);return this}return this.remove(a),this.removeNamespace(b),this.add(a,b)},e.prototype.Namespaces.prototype.get=function(a){return""===a?this.base():this._namespaces[a]},e.prototype.Namespaces.prototype.getPrefix=function(a){var c=void 0;return b.each(this._namespaces,function(b,d){d===a&&(c=b)}),c},e.prototype.Namespaces.prototype.contains=function(a){return a in this._namespaces},e.prototype.Namespaces.prototype.containsNamespace=function(a){return void 0!==this.getPrefix(a)},e.prototype.Namespaces.prototype.update=function(a,b){return this.remove(a),this.add(a,b)},e.prototype.Namespaces.prototype.updateNamespace=function(a,b){return this.removeNamespace(a),this.add(a,b)},e.prototype.Namespaces.prototype.remove=function(a){
return a&&delete this._namespaces[a],this},e.prototype.Namespaces.prototype.removeNamespace=function(a){var b=this.getPrefix(a);return b&&delete this._namespaces[b],this},e.prototype.Namespaces.prototype.toObj=function(a){return a?b.extend({},this._namespaces):b.extend({"":this._base},this._namespaces)},e.prototype.Namespaces.prototype.curie=function(a,b){return e.Util.toCurie(a,b,this)},e.prototype.Namespaces.prototype.isCurie=function(a){return e.Util.isCurie(a,this)},e.prototype.Namespaces.prototype.uri=function(a){return e.Util.toUri(a,this)},e.prototype.Namespaces.prototype.isUri=e.Util.isUri,e.prototype.ClassicRDFa=function(a){this.vie=a},e.prototype.ClassicRDFa.prototype={readEntities:function(a){var b=[],c=this.vie.RDFaEntities.getInstances(a);return d.each(c,function(a){b.push(a.toJSONLD())}),b},findPredicateElements:function(a,b,c){return this.vie.services.rdfa.findPredicateElements(a,b,c)},getPredicate:function(a){return this.vie.services.rdfa.getElementPredicate(a)},getSubject:function(a){return this.vie.services.rdfa.getElementSubject(a)}},e.prototype.ClassicRDFaEntities=function(a){this.vie=a},e.prototype.ClassicRDFaEntities.prototype={getInstances:function(a){this.vie.services.rdfa||this.vie.use(new this.vie.RdfaService);var b=null,c=!1;for(this.vie.load({element:a}).from("rdfa").execute().done(function(a){b=a,c=!0});!c;);return b},getInstance:function(a){var b=this.getInstances(a);return b&&b.length?b.pop():null}},e.prototype.ClassicEntityManager=function(a){this.vie=a,this.entities=this.vie.entities},e.prototype.ClassicEntityManager.prototype={getBySubject:function(a){return this.vie.entities.get(a)},getByJSONLD:function(a){if("string"==typeof a)try{a=b.parseJSON(a)}catch(c){return null}return this.vie.entities.addOrUpdate(a)},initializeCollection:function(){}},function(){e.prototype.DBPediaService=function(a){var c={name:"dbpedia",namespaces:{owl:"http://www.w3.org/2002/07/owl#",yago:"http://dbpedia.org/class/yago/",foaf:"http://xmlns.com/foaf/0.1/",georss:"http://www.georss.org/georss/",geo:"http://www.w3.org/2003/01/geo/wgs84_pos#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",dbpedia:"http://dbpedia.org/ontology/",dbprop:"http://dbpedia.org/property/",dcelements:"http://purl.org/dc/elements/1.1/"},rules:[]};this.options=b.extend(!0,c,a?a:{}),this.vie=null,this.name=this.options.name,b.ajaxSetup({converters:{"text application/rdf+json":function(a){return JSON.parse(a)}},timeout:6e4})},e.prototype.DBPediaService.prototype={init:function(){for(var a in this.options.namespaces){var c=this.options.namespaces[a];this.vie.namespaces.add(a,c)}return this.rules=b.extend([],e.Util.transformationRules(this)),this.rules=b.merge(this.rules,this.options.rules?this.options.rules:[]),this.connector=new this.vie.DBPediaConnector(this.options),this},load:function(a){var b=this,c=a instanceof this.vie.Loadable;if(!c)throw new Error("Invalid Loadable passed");var f=function(c){c="string"==typeof c?JSON.parse(c):c,d.defer(function(){try{var f=e.Util.rdf2Entities(b,c);f=d.isArray(f)?f:[f];for(var g=0;g<f.length;g++)f[g].set("DBPediaServiceLoad",e.Util.xsdDateTime(new Date));f=1===f.length?f[0]:f,a.resolve(f)}catch(g){a.reject(g)}})},g=function(b){a.reject(b)},h=a.options.entity?a.options.entity:a.options.entities;if(h){h=d.isArray(h)?h:[h];for(var i=[],j=0;j<h.length;j++){var k="string"==typeof h[j]?h[j]:h[j].id;i.push(k)}this.connector.load(i,f,g)}else a.reject([]);return this}},e.prototype.DBPediaConnector=function(a){this.options=a,this.baseUrl="http://dbpedia.org/sparql?default-graph-uri=http%3A%2F%2Fdbpedia.org&timeout=0"},e.prototype.DBPediaConnector.prototype={load:function(a,c,e,f){f||(f={});var g=this.baseUrl+"&format="+encodeURIComponent("application/rdf+json")+"&query=";if(d.isArray(a)){for(var h="",i="",j=0;j<a.length;j++){var k=/^<.+>$/.test(a[j])?a[j]:"<"+a[j]+">";j>0&&(h+=" .",i+=" UNION "),h+=" "+k+" ?prop"+j+" ?val"+j,i+=" { "+k+" ?prop"+j+" ?val"+j+" }"}g+=encodeURIComponent("CONSTRUCT {"+h+" } WHERE {"+i+" }")}else a=/^<.+>$/.test(a)?a:"<"+a+">",g+=encodeURIComponent("CONSTRUCT { "+a+" ?prop ?val } WHERE { "+a+" ?prop ?val }");var l=f.format||"application/rdf+json";return"undefined"!=typeof exports&&"undefined"!=typeof process?this._loadNode(g,c,e,f,l):(b.ajax({success:function(a){c(a)},error:e,type:"GET",url:g,accepts:{"application/rdf+json":"application/rdf+json"}}),this)},_loadNode:function(a,b,c,d,e){var f=require("request"),g=f({method:"GET",uri:a,headers:{Accept:e}},function(a,c,d){b(JSON.parse(d))});return g.end(),this}}}(),function(){e.prototype.OpenCalaisService=function(a){var c={name:"opencalais",url:["http://api.opencalais.com/enlighten/rest/"],timeout:6e4,namespaces:{opencalaisc:"http://s.opencalais.com/1/pred/",opencalaiscr:"http://s.opencalais.com/1/type/er/",opencalaiscm:"http://s.opencalais.com/1/type/em/e/"},rules:[]};this.options=b.extend(!0,c,a?a:{}),this.vie=null,this.name=this.options.name,b.ajaxSetup({converters:{"text application/rdf+json":function(a){return JSON.parse(a)}},timeout:this.options.timeout})},e.prototype.OpenCalaisService.prototype={init:function(){for(var a in this.options.namespaces){var c=this.options.namespaces[a];this.vie.namespaces.add(a,c)}this.rules=b.extend([],e.Util.transformationRules(this)),this.rules=b.merge(this.rules,this.options.rules?this.options.rules:[]),this.connector=new this.vie.OpenCalaisConnector(this.options)},analyze:function(a){var c=this,f=a instanceof this.vie.Analyzable;if(!f)throw"Invalid Analyzable passed";var g=a.options.element?a.options.element:b("body"),h=c._extractText(g);if(h.length>0){var i=function(b){d.defer(function(){var d=e.Util.rdf2Entities(c,b);a.resolve(d)})},j=function(b){a.reject(b)};this.connector.analyze(h,i,j)}else console.warn("No text found in element."),a.resolve([])},_extractText:function(a){if(a.get(0)&&a.get(0).tagName&&("TEXTAREA"==a.get(0).tagName||"INPUT"==a.get(0).tagName&&a.attr("type","text")))return a.get(0).val();var c=a.text().replace(/\s+/g," ").replace(/\0\b\n\r\f\t/g,"");return b.trim(c)}},e.prototype.OpenCalaisConnector=function(a){this.options=a,this.baseUrl=d.isArray(a.url)?a.url:[a.url],this.enhancerUrlPrefix="/"},e.prototype.OpenCalaisConnector.prototype={analyze:function(a,c,e,f){if(f||(f={urlIndex:0}),f.urlIndex>=this.baseUrl.length)return void e("Could not connect to the given OpenCalais endpoints! Please check for their setup!");var g=this.baseUrl[f.urlIndex].replace(/\/$/,"");g+=this.enhancerUrlPrefix;var h=f.format||"application/rdf+json",i=function(a,b,c,e,f){return function(){console.error("OpenCalais connection error",arguments),a.analyze(b,c,e,d.extend(f,{urlIndex:f.urlIndex+1}))}}(this,a,c,e,f),j=this._prepareData(a);return"undefined"!=typeof exports&&"undefined"!=typeof process?this._analyzeNode(g,j,c,i,f,h):void b.ajax({success:function(a,b,d){var e=d.responseText.replace(/<!--[\s\S]*?-->/g,"");c(e)},error:i,type:"POST",url:g,data:j,accept:"text/plain"})},_analyzeNode:function(a,b,c,d,e,f){var g=require("request"),h=g({method:"POST",uri:a,body:b,headers:{Accept:f}},function(a,b,e){try{c({results:JSON.parse(e)})}catch(f){d(f)}});h.end()},_prepareData:function(a){return{licenseID:this.options.api_key,calculareRelevanceScore:"true",enableMetadataType:"GenericRelations,SocialTags",contentType:"text/html",content:a}}}}(),function(){e.prototype.RdfaRdfQueryService=function(a){var c={name:"rdfardfquery",namespaces:{},rules:[]};this.options=b.extend(!0,c,a?a:{}),this.views=[],this.vie=null,this.name=this.options.name},e.prototype.RdfaRdfQueryService.prototype={init:function(){for(var a in this.options.namespaces){var c=this.options.namespaces[a];this.vie.namespaces.add(a,c)}this.rules=b.extend([],e.Util.transformationRules(this)),this.rules=b.merge(this.rules,this.options.rules?this.options.rules:[])},analyze:function(a){return this.load(a)},load:function(a){var c=this,d=a instanceof this.vie.Loadable||a instanceof this.vie.Analyzable;if(!d)throw new Error("Invalid Loadable/Analyzable passed");var f=a.options.element?a.options.element:b(document);try{var g=b(f).find("[about],[typeof]").rdfa();b.each(b(f).xmlns(),function(a,b){c.vie.namespaces.addOrReplace(a,b.toString())});var h=e.Util.rdf2Entities(this,g);a.resolve(h)}catch(i){a.reject(i)}},save:function(a){var c=a instanceof this.vie.Savable;c||a.reject("Invalid Savable passed"),a.options.element||a.reject("Unable to write entity to RDFa, no element given"),a.options.entity||a.reject("Unable to write to RDFa, no entity given"),b.rdf||a.reject("No rdfQuery found.");var d=a.options.entity,e=[],f=d.get("@type");f=b.isArray(f)?f[0]:f,f=f.id,e.push(d.getSubject()+" a "+f),b(a.options.element).rdfa(e),a.resolve()}}}(),function(){e.prototype.RdfaService=function(a){var c={name:"rdfa",namespaces:{},subjectSelector:"[about],[typeof],[src],html",predicateSelector:"[property],[rel]",rules:[]};this.options=b.extend(!0,c,a?a:{}),this.views=[],this.vie=null,this.name=this.options.name},e.prototype.RdfaService.prototype={init:function(){for(var a in this.options.namespaces){var c=this.options.namespaces[a];this.vie.namespaces.add(a,c)}this.rules=b.merge([],e.Util.transformationRules(this)),this.rules=b.merge(this.rules,this.options.rules?this.options.rules:[])},analyze:function(a){return this.load(a)},load:function(a){var c=this,d=a instanceof this.vie.Loadable||a instanceof this.vie.Analyzable;if(!d)throw new Error("Invalid Loadable/Analyzable passed");var e;if(a.options.element)e=a.options.element;else{if("undefined"==typeof document)return a.resolve([]);e=b(document)}var f=this.xmlns(e);for(var g in f)this.vie.namespaces.addOrReplace(g,f[g]);var h=[];b(this.options.subjectSelector,e).add(b(e).filter(this.options.subjectSelector)).each(function(){var a=c._readEntity(b(this));a&&h.push(a)});a.resolve(h)},save:function(a){var b=a instanceof this.vie.Savable;if(!b)throw"Invalid Savable passed";if(!a.options.element)throw"Unable to write entity to RDFa, no element given";if(!a.options.entity)throw"Unable to write to RDFa, no entity given";this._writeEntity(a.options.entity,a.options.element),a.resolve()},_readEntity:function(a){var c,e,f,g=this.getElementSubject(a),h=this._getElementType(a),i=this._readEntityPredicates(g,a,!1);if(b.isEmptyObject(i))return null;var j=this.vie;for(c in i)e=i[c],d.isArray(e)&&(f=new this.vie.Collection,d.each(e,function(a){var b=j.entities.addOrUpdate({"@subject":a});f.addOrUpdate(b)}),i[c]=f);i["@subject"]=g,h&&(i["@type"]=h);var k=new this.vie.Entity(i);return k=this.vie.entities.addOrUpdate(k,{updateOptions:{silent:!0}}),this._registerEntityView(k,a),k},_writeEntity:function(a,c){var d=this;return this.findPredicateElements(this.getElementSubject(c),c,!0).each(function(){var c=b(this),e=d.getElementPredicate(c);if(!a.has(e))return!0;var f=a.get(e);return f&&f.isCollection?!0:f===d.readElementValue(e,c)?!0:void d.writeElementValue(e,c,f)}),!0},_getViewForElement:function(a,c){var d;return b.each(this.views,function(){return b(this.el).get(0)===a.get(0)?c&&!this.template?!0:(d=this,!1):void 0}),d},_registerEntityView:function(a,c){if(c.length){var e=this,f=this._getViewForElement(c);return f?f:(f=new this.vie.view.Entity({model:a,el:c,tagName:c.get(0).nodeName,vie:this.vie,service:this.name}),this.views.push(f),d.each(a.attributes,function(d,f){var g=a.fromReference(a.get(f));g&&g.isCollection&&b.each(e.getElementByPredicate(f,c),function(){e._registerCollectionView(g,b(this),a)})}),f)}},_registerCollectionView:function(a,b,c){var d=this._getViewForElement(b,!0);if(d)return d;var e=b.children(":first-child");return d=new this.vie.view.Collection({owner:c,collection:a,model:a.model,el:b,template:e,service:this,tagName:b.get(0).nodeName}),this.views.push(d),d},_getElementType:function(a){var c;return b(a).attr("typeof")!==this.options.attributeExistenceComparator?(c=b(a).attr("typeof"),-1!==c.indexOf("://")?"<"+c+">":c):null},getElementSubject:function(a){var c=this;if("undefined"!=typeof document&&a===document)return document.baseURI;var d=void 0,e=null;return b(a).closest(this.options.subjectSelector).each(function(){return e=this,b(this).attr("about")!==c.options.attributeExistenceComparator?(d=b(this).attr("about"),!0):b(this).attr("src")!==c.options.attributeExistenceComparator?(d=b(this).attr("src"),!0):b(this).attr("typeof")!==c.options.attributeExistenceComparator?!0:void("HTML"===b(this).get(0).nodeName&&b("base",this).each(function(){d=b(this).attr("href")}))}),d?"object"==typeof d?d:0===d.indexOf("_:")?d:0===d.indexOf("<")?d:"<"+d+">":e===a?c.getElementSubject(b(a).parent()):void 0},setElementSubject:function(a,c){return b(c).attr("src")?b(c).attr("src",a):b(c).attr("about",a)},getElementPredicate:function(a){var c;return a=b(a),c=a.attr("property"),c||(c=a.attr("rel")),c},getElementBySubject:function(a,c){var d=this;return b(c).find(this.options.subjectSelector).add(b(c).filter(this.options.subjectSelector)).filter(function(){return d.getElementSubject(b(this))!==a?!1:!0})},getElementByPredicate:function(a,c){var d=this,e=this.getElementSubject(c);return b(c).find(this.options.predicateSelector).add(b(c).filter(this.options.predicateSelector)).filter(function(){var c=d.getElementPredicate(b(this));return d.vie.namespaces.curie(c)!==d.vie.namespaces.curie(a)?!1:d.getElementSubject(this)!==e?!1:!0})},_readEntityPredicates:function(a,c,d){var e=this,f={};return this.findPredicateElements(a,c,!0).each(function(){var a=b(this),c=e.getElementPredicate(a);if(""!==c){var g=e.readElementValue(c,a);(null!==g||d)&&(f[c]=g)}}),"HTML"!==b(c).get(0).tagName&&b(c).parent("[rev]").each(function(){var a=b(this).attr("rev");a&&(f[b(this).attr("rev")]=e.getElementSubject(this))}),f},findPredicateElements:function(a,c,d){var e=this;return b(c).find(this.options.predicateSelector).add(b(c).filter(this.options.predicateSelector)).filter(function(){return e.getElementSubject(this)!==a?!1:d?!0:b(this).parents("[property]").length?!1:!0})},readElementValue:function(a,c){var d=c.attr("content");if(d)return d;var e=c.attr("resource");if(e)return["<"+e+">"];var f=c.attr("href");if(f&&c.attr("rel")===a)return["<"+f+">"];if(c.attr("rel")){var g=[],h=this;return b(c).children(this.options.subjectSelector).each(function(){g.push(h.getElementSubject(this))}),g}return c.html()},writeElementValue:function(a,b,c){c instanceof Array&&c.length>0&&(c=c[0]);var d=b.attr("content");if(d)return void b.attr("content",c);var e=b.attr("resource");e&&b.attr("resource",c),b.html(c)},xmlns:function(a){var c;if(a)c=b(a);else{if("undefined"==typeof document)return{};c=b(document)}c=c.add(c.parents());var d={};return c.each(function(a,b){if(b.attributes)for(a=0;a<b.attributes.length;a+=1){var c=b.attributes[a];if(/^xmlns(:(.+))?$/.test(c.nodeName)){var e=/^xmlns(:(.+))?$/.exec(c.nodeName)[2]||"",f=c.nodeValue;(""===e||""!==f)&&(d[e]=c.nodeValue)}}}),d}}}(),function(){e.prototype.StanbolService=function(a){var c={name:"stanbol",url:["http://dev.iks-project.eu/stanbolfull"],timeout:6e4,namespaces:{semdeski:"http://www.semanticdesktop.org/ontologies/2007/01/19/nie#",semdeskf:"http://www.semanticdesktop.org/ontologies/2007/03/22/nfo#",skos:"http://www.w3.org/2004/02/skos/core#",foaf:"http://xmlns.com/foaf/0.1/",opengis:"http://www.opengis.net/gml/",dbpedia:"http://dbpedia.org/ontology/",dbprop:"http://dbpedia.org/property/",owl:"http://www.w3.org/2002/07/owl#",geonames:"http://www.geonames.org/ontology#",enhancer:"http://fise.iks-project.eu/ontology/",entityhub:"http://www.iks-project.eu/ontology/rick/model/",entityhub2:"http://www.iks-project.eu/ontology/rick/query/",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",dcterms:"http://purl.org/dc/terms/",schema:"http://schema.org/",geo:"http://www.w3.org/2003/01/geo/wgs84_pos#"},rules:[{left:["?subject a <http://fise.iks-project.eu/ontology/EntityAnnotation>","?subject enhancer:entity-type ?type","?subject enhancer:confidence ?confidence","?subject enhancer:entity-reference ?entity","?subject dcterms:relation ?relation","?relation a <http://fise.iks-project.eu/ontology/TextAnnotation>","?relation enhancer:selected-text ?selected-text","?relation enhancer:selection-context ?selection-context","?relation enhancer:start ?start","?relation enhancer:end ?end"],right:["?entity a ?type","?entity enhancer:hasTextAnnotation ?relation","?entity enhancer:hasEntityAnnotation ?subject"]}]};this.options=b.extend(!0,c,a?a:{}),this.vie=null,this.name=this.options.name,b.ajaxSetup({converters:{"text application/rdf+json":function(a){return JSON.parse(a)}},timeout:this.options.timeout})},e.prototype.StanbolService.prototype={init:function(){for(var a in this.options.namespaces){var c=this.options.namespaces[a];this.vie.namespaces.add(a,c)}this.rules=b.extend([],e.Util.transformationRules(this)),this.rules=b.merge(this.rules,this.options.rules?this.options.rules:[]),this.connector=new this.vie.StanbolConnector(this.options),this.vie.types.addOrOverwrite("enhancer:EntityAnnotation",[]).inherit("owl:Thing"),this.vie.types.addOrOverwrite("enhancer:TextAnnotation",[]).inherit("owl:Thing"),this.vie.types.addOrOverwrite("enhancer:Enhancement",[]).inherit("owl:Thing")},analyze:function(a){var c=this,f=a instanceof this.vie.Analyzable;if(!f)throw"Invalid Analyzable passed";var g=a.options.element?a.options.element:b("body"),h=c._extractText(g);if(h.length>0){var i=function(b){d.defer(function(){var d=e.Util.rdf2Entities(c,b);a.resolve(d)})},j=function(b){a.reject(b)};this.connector.analyze(h,i,j)}else console.warn("No text found in element."),a.resolve([])},find:function(a){var b=a instanceof this.vie.Findable;if(!b)throw"Invalid Findable passed";var c=this,f=escape(a.options.term);f||(console.warn("StanbolConnector: No term to look for!"),a.resolve([]));var g="undefined"==typeof a.options.limit?20:a.options.limit,h="undefined"==typeof a.options.offset?0:a.options.offset,i=function(b){d.defer(function(){var d=e.Util.rdf2Entities(c,b);a.resolve(d)})},j=function(b){a.reject(b)},k=this.vie;if(a.options.properties){var l=a.options.properties;a.options.ldPath=d(l).map(function(a){return k.namespaces.isCurie(a)?k.namespaces.uri(a)+";":a}).join("")}if(a.options.field&&k.namespaces.isCurie(m)){var m=a.options.field;a.options.field=k.namespaces.uri(m)}this.connector.find(f,g,h,i,j,a.options)},load:function(a){var b=a instanceof this.vie.Loadable;if(!b)throw"Invalid Loadable passed";var c=this,f=a.options.entity;f||(console.warn("StanbolConnector: No entity to look for!"),a.resolve([]));var g=function(b){d.defer(function(){var d=e.Util.rdf2Entities(c,b);a.resolve(d)})},h=function(b){a.reject(b)};this.connector.load(f,g,h)},_extractText:function(a){if(a.get(0)&&a.get(0).tagName&&("TEXTAREA"==a.get(0).tagName||"INPUT"==a.get(0).tagName&&a.attr("type","text")))return a.get(0).val();var c=a.text().replace(/\s+/g," ").replace(/\0\b\n\r\f\t/g,"");return b.trim(c)}},e.prototype.StanbolConnector=function(a){a=a?a:{},this.options=a,this.baseUrl=d.isArray(a.url)?a.url:[a.url],this.enhancerUrlPostfix=a.enhancerUrlPostfix?a.enhancerUrlPostfix:"/enhancer",this.entityhubUrlPostfix=a.entityhubUrlPostfix?a.entityhubUrlPostfix:"/entityhub",this.entityhubSite=a.entityhubSite},e.prototype.StanbolConnector.prototype={analyze:function(a,c,e,f){if(f||(f={urlIndex:0}),f.urlIndex>=this.baseUrl.length)return void e("Could not connect to the given Stanbol endpoints! Please check for their setup!");var g=this.baseUrl[f.urlIndex].replace(/\/$/,"");g+=this.enhancerUrlPostfix;var h=f.format||"application/rdf+json",i=function(a,b,c,e,f){return function(){console.error("Stanbol connection error",arguments),a.analyze(b,c,e,d.extend(f,{urlIndex:f.urlIndex+1}))}}(this,a,c,e,f);return"undefined"!=typeof exports&&"undefined"!=typeof process?this._analyzeNode(g,a,c,i,f,h):void b.ajax({success:function(a){c(a)},error:i,type:"POST",url:g,data:a,dataType:h,contentType:"text/plain",accepts:{"application/rdf+json":"application/rdf+json"}})},_analyzeNode:function(a,b,c,d,e,f){var g=require("request"),h=g({method:"POST",uri:a,body:b,headers:{"Content-Type":"text/plain",Accept:f}},function(a,b,e){try{c({results:JSON.parse(e)})}catch(f){d(f)}});h.end()},load:function(a,c,e,f){if(f||(f={urlIndex:0}),f.urlIndex>=this.baseUrl.length)return void e("Could not connect to the given Stanbol endpoints! Please check for their setup!");a=a.replace(/^</,"").replace(/>$/,"");var g=this.baseUrl[f.urlIndex].replace(/\/$/,"");g+=this.entityhubUrlPostfix+(this.entityhubSite?"/site/"+this.entityhubSite:"/sites")+"/entity?id="+escape(a);var h=f.format||"application/rdf+json",i=function(a,b,c,e,f){return function(){a.load(b,c,e,d.extend(f,{urlIndex:f.urlIndex+1}))}}(this,a,c,e,f);return"undefined"!=typeof exports&&"undefined"!=typeof process?this._loadNode(g,c,i,f,h):void b.ajax({success:function(a){c(a)},error:i,type:"GET",url:g,data:null,dataType:h,contentType:"text/plain",accepts:{"application/rdf+json":"application/rdf+json"}})},_loadNode:function(a,b,c,d,e){var f=require("request"),g=f({method:"GET",uri:a,headers:{Accept:e}},function(a,d,e){try{b(JSON.parse(e))}catch(f){c(f)}});return g.end(),this},find:function(a,c,e,f,g,h){if(h||(h={}),"number"!=typeof h.urlIndex&&(h.urlIndex=0),h.urlIndex>=this.baseUrl.length)return void g("Could not connect to the given Stanbol endpoints! Please check for their setup!");var i=this.baseUrl[h.urlIndex].replace(/\/$/,"");i+=this.entityhubUrlPostfix+(this.entityhubSite?"/site/"+this.entityhubSite:"/sites")+"/find";var j=h.format||"application/rdf+json",k=h.field||"rdfs:label";null==e&&(e=0),null==c&&(c=10);var l=function(a,b,c,e,f,g,h){return function(){a.find(b,c,e,f,g,d.extend(h,{urlIndex:h.urlIndex+1}))}}(this,a,c,e,f,g,h);return"undefined"!=typeof exports&&"undefined"!=typeof process?this._findNode(i,a,c,e,f,l,h,j):void b.ajax({success:function(a){f(a)},error:l,type:"POST",url:i,data:"name="+a+"&limit="+c+"&offset="+e+"&field="+k+"&ldpath="+(h.ldPath||""),dataType:j,accepts:{"application/rdf+json":"application/rdf+json"}})},_findNode:function(a,b,c,d,e,f,g,h){var i=require("request"),j=i({method:"POST",uri:a,headers:{Accept:h},body:"name="+b+"&limit="+c+"&offset="+d},function(a,b,c){try{e(JSON.parse(c))}catch(d){f(d)}});return j.end(),this}}}(),function(){e.prototype.ZemantaService=function(a){var c={name:"zemanta",url:["http://api.zemanta.com/services/rest/0.0/"],timeout:6e4,namespaces:{zemanta:"http://s.zemanta.com/ns#"},rules:[{left:["?subject a zemanta:Recognition","?subject zemanta:object ?object","?object owl:sameAs ?entity"],right:["?entity zemanta:hasEntityAnnotation ?subject"]}]};this.options=b.extend(!0,c,a?a:{}),this.vie=null,this.name=this.options.name,b.ajaxSetup({converters:{"text application/rdf+json":function(a){return JSON.parse(a)}},timeout:this.options.timeout})},e.prototype.ZemantaService.prototype={init:function(){for(var a in this.options.namespaces){var c=this.options.namespaces[a];this.vie.namespaces.add(a,c)}this.rules=b.extend([],e.Util.transformationRules(this)),this.rules=b.merge(this.rules,this.options.rules?this.options.rules:[]),this.connector=new this.vie.ZemantaConnector(this.options),this.vie.types.addOrOverwrite("zemanta:EntityAnnotation",[]).inherit("owl:Thing")},analyze:function(a){var c=this,f=a instanceof this.vie.Analyzable;if(!f)throw"Invalid Analyzable passed";var g=a.options.element?a.options.element:b("body"),h=c._extractText(g);if(h.length>0){var i=function(b){d.defer(function(){var d=e.Util.rdf2Entities(c,b);a.resolve(d)})},j=function(b){a.reject(b)};this.connector.analyze(h,i,j)}else console.warn("No text found in element."),a.resolve([])},_extractText:function(a){if(a.get(0)&&a.get(0).tagName&&("TEXTAREA"==a.get(0).tagName||"INPUT"==a.get(0).tagName&&a.attr("type","text")))return a.get(0).val();var c=a.text().replace(/\s+/g," ").replace(/\0\b\n\r\f\t/g,"");return b.trim(c)}},e.prototype.ZemantaConnector=function(a){this.options=a,this.baseUrl=d.isArray(a.url)?a.url:[a.url],this.enhancerUrlPrefix="/"},e.prototype.ZemantaConnector.prototype={analyze:function(a,c,e,f){if(f||(f={urlIndex:0}),f.urlIndex>=this.baseUrl.length)return void e("Could not connect to the given Zemanta endpoints! Please check for their setup!");var g=this.baseUrl[f.urlIndex].replace(/\/$/,"");g+=this.enhancerUrlPrefix;var h=f.format||"application/rdf+json",i=function(a,b,c,e,f){return function(){console.error("Zemanta connection error",arguments),a.analyze(b,c,e,d.extend(f,{urlIndex:f.urlIndex+1}))}}(this,a,c,e,f),j=this._prepareData(a);return"undefined"!=typeof exports&&"undefined"!=typeof process?this._analyzeNode(g,j,c,i,f,h):void b.ajax({success:function(a,b,d){var e=d.responseText.replace(/<z:signature>.*?<\/z:signature>/,"");c(e)},error:i,type:"POST",url:g,data:j})},_analyzeNode:function(a,b,c,d,e,f){var g=require("request"),h=g({method:"POST",uri:a,body:b,headers:{Accept:f}},function(a,b,e){try{c({results:JSON.parse(e)})}catch(f){d(f)}});h.end()},_prepareData:function(a){return{method:"zemanta.suggest_markup",format:"rdfxml",api_key:this.options.api_key,text:a,return_rdf_links:1}}}}(),e.prototype.view||(e.prototype.view={}),e.prototype.view.Collection=c.View.extend({initialize:function(){if(this.template=this.options.template,this.service=this.options.service,!this.service)throw"No RDFa service provided to the Collection View";this.owner=this.options.owner,this.entityViews={},d.bindAll(this,"addItem","removeItem","refreshItems"),this.collection.bind("add",this.addItem),this.collection.bind("remove",this.removeItem);var a=this;this.collection.forEach(function(b){a.registerItem(b,a.collection)})},addItem:function(a,c){if(c===this.collection&&this.template&&0!==this.template.length){var d=this.service._registerEntityView(a,this.cloneElement(this.template,a)),e=b(d.render().el);a.id&&this.service.setElementSubject(a.getSubjectUri(),e),b(this.el).append(e);var f=this.service;e.parent("[rev]").each(function(){var c=b(this).attr("rev"),d={};d[c]=new f.vie.Collection;var e=f.vie.entities.get(f.getElementSubject(this));e&&d[c].addOrUpdate(e),a.set(d)}),this.trigger("add",d),this.entityViews[a.cid]=d,e.show()}},registerItem:function(a,b){var c=this.service.getElementBySubject(a.id,this.el);if(c){var d=this.service._registerEntityView(a,c);this.entityViews[a.cid]=d}},removeItem:function(a){this.entityViews[a.cid]&&(this.trigger("remove",this.entityViews[a.cid]),b(this.entityViews[a.cid].el).remove(),delete this.entityViews[a.cid])},refreshItems:function(a){var c=this;b(this.el).empty(),a.forEach(function(b){c.addItem(b,a)})},cloneElement:function(a,c){var d=b(a).clone(!1),e=this.service;void 0!==d.attr("about")&&d.attr("about",""),d.find("[about]").attr("about","");var f=this.service.getElementSubject(d);return e.findPredicateElements(f,d,!1).each(function(){var a=e.getElementPredicate(b(this));return c.get(a)&&c.get(a).isCollection?!0:void e.writeElementValue(null,b(this),"")}),d}}),e.prototype.view||(e.prototype.view={}),e.prototype.view.Entity=c.View.extend({initialize:function(a){this.service=a.service?a.service:"rdfa",this.vie=a.vie,d.bindAll(this,"render"),this.model.bind("change",this.render)},render:function(){return this.vie.save({element:this.el,entity:this.model}).to(this.service).execute(),this}});var a=this;!function(b){a.XDomainRequest&&b.ajaxTransport(function(a){if(a.crossDomain&&a.async){a.timeout&&(a.xdrTimeout=a.timeout,delete a.timeout);var c;return{send:function(d,e){function f(a,d,f,g){c.onload=c.onerror=c.ontimeout=b.noop,c=void 0,e(a,d,f,g)}if(c=new XDomainRequest,a.dataType){var g="header_Accept="+encodeURIComponent(a.dataType);a.url=a.url+(-1===a.url.indexOf("?")?"?":"&")+g}c.open(a.type,a.url),c.onload=function(a,b){f(200,"OK",{text:c.responseText},"Content-Type: "+c.contentType)},c.onerror=function(a){console.error(JSON.stringify(a)),f(404,"Not Found")},a.xdrTimeout&&(c.ontimeout=function(){f(0,"timeout")},c.timeout=a.xdrTimeout),c.send(a.hasContent&&a.data||null)},abort:function(){c&&(c.onerror=b.noop(),c.abort())}}}})}(b)}();